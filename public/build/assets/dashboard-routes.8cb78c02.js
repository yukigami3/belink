var Xi=Object.defineProperty;var Zi=(e,n,a)=>n in e?Xi(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a;var be=(e,n,a)=>(Zi(e,typeof n!="symbol"?n+"":n,a),a);import{r as f,u as Un,g as $r,$ as We,s as ys,j as t,a as u,A as Oe,U as Ji,m as ye,c as D,b as O,N as el,I as R,d as q,t as Y,e as h,q as W,W as Ge,o as we,f as F,h as J,i as K,D as G,k as Q,T as i,l as j,F as he,n as z,p as Z,B as S,v as Ee,R as ue,w as Hn,x as Ba,y as At,z as ks,C as xs,E as ft,G as Wn,H as tl,J as Ua,L as nl,P as al,K as lt,M as Gn,O as zt,Q as rl,S as He,V as $e,X as Ne,Y as oe,Z as Ha,_ as gt,a0 as Wa,a1 as H,a2 as qn,a3 as T,a4 as ws,a5 as qe,a6 as Kn,a7 as sl,a8 as jn,a9 as A,aa as ol,ab as Et,ac as _t,ad as il,ae as Ze,af as Je,ag as ge,ah as fe,ai as ll,aj as cl,ak as dl,al as ul,am as ml,an as Yn,ao as Qe,ap as Cs,aq as va,ar as ya,as as Jt,at as sn,au as _n,av as Rn,aw as Ss,ax as pt,ay as Ns,az as Is,aA as Ls,aB as pl,aC as bt,aD as hl,aE as fl,aF as gl,aG as An,aH as Ie,aI as bl,aJ as vl,aK as yl,aL as kl,aM as xl,aN as zn,aO as wl,aP as Mr,aQ as _r,aR as Rr,aS as Ga,aT as Cl,aU as Sl,aV as Rt,aW as ot,aX as Tt,aY as et,aZ as mt,a_ as de,a$ as qa,b0 as Nl,b1 as Ar,b2 as Ka,b3 as Il,b4 as Ll,b5 as Dl,b6 as ja,b7 as Pl,b8 as Qn,b9 as Ds,ba as $l,bb as Ml,bc as Ps,bd as ze,be as hn,bf as _l,bg as Ve,bh as xe,bi as De,bj as Xn,bk as Rl,bl as Zn,bm as fn,bn as Al,bo as Jn,bp as zl,bq as El,br as $s,bs as gn,bt as bn,bu as Ms,bv as _s,bw as Rs,bx as vn,by as Ya,bz as Tl,bA as vt,bB as ea,bC as Ke,bD as yt,bE as Fl,bF as Qa,bG as Vl,bH as Ol,bI as Bl,bJ as Ul,bK as $a,bL as Hl,bM as zr,bN as Wl,bO as As,bP as zs,bQ as Gl,bR as ql,bS as Kl,bT as jl,bU as Yl,bV as Ql,bW as Es,bX as Xl,bY as Zl,bZ as Jl,b_ as ec,b$ as tc,c0 as nc,c1 as ac}from"./main.724dba5a.js";import{E as je,M as Ts,B as on,a as it}from"./Edit.d2871342.js";const ta=f.exports.createContext(null);function rc(){f.exports.useEffect(()=>(document.documentElement.classList.add("no-page-overflow"),()=>{document.documentElement.classList.remove("no-page-overflow")}),[])}function sc({children:e,leftSidenavStatus:n,onLeftSidenavChange:a,rightSidenavStatus:r,onRightSidenavChange:s,name:o,leftSidenavCanBeCompact:l,...c}){rc();const d=Un("(max-width: 1024px)"),m=f.exports.useMemo(()=>o?$r(`${o}.sidenav.compact`):!1,[o])?"compact":"open",[b,g]=We(n,d?"closed":m,a),v=f.exports.useMemo(()=>{const C=$r(`${o}.sidenav.right.position`,"open");return d?"closed":C},[d,o]),[y,w]=We(r,v,s),x=f.exports.useCallback(C=>{w(C),ys(`${o}.sidenav.right.position`,C)},[w,o]),k=d&&(b==="open"||y==="open");return t(ta.Provider,{value:{leftSidenavStatus:b,setLeftSidenavStatus:g,rightSidenavStatus:y,setRightSidenavStatus:x,leftSidenavCanBeCompact:l,name:o,isMobileMode:d},children:u("div",{...c,className:"dashboard-grid test-overflow h-full relative isolate",children:[e,t(Oe,{children:k&&t(Ji,{position:"fixed",onClick:()=>{g("closed"),x("closed")}},"dashboard-underlay")})]})})}function oc({className:e,position:n,children:a,...r}){const{isMobileMode:s,leftSidenavStatus:o,setLeftSidenavStatus:l,rightSidenavStatus:c,setRightSidenavStatus:d}=f.exports.useContext(ta),p=n==="left"?o:c,m={open:{display:"flex",width:null},compact:{display:"flex",width:null},closed:{width:0,transitionEnd:{display:"none"}}},b=ic(p==="compact"?"compact":r.size);return t(ye.div,{variants:m,initial:!1,animate:p,transition:{type:"tween",duration:.15},onClick:g=>{const v=g.target;s&&(v.closest("button")||v.closest("a"))&&(l("closed"),d("closed"))},className:D(e,n==="left"?"dashboard-grid-sidenav-left":"dashboard-grid-sidenav-right","overflow-hidden will-change-[width]",b.width,s&&"fixed top-0 bottom-0 z-20 shadow-xl",s&&n==="left"&&"left-0",s&&n==="right"&&"right-0"),children:f.exports.cloneElement(a,{className:D(a.props.className,b.minWidth,"h-full",p==="compact"&&"compact-scrollbar"),isCompactMode:p==="compact"})})}function ic(e){switch(e){case"compact":return{width:"w-80",minWidth:"min-w-80"};case"sm":return{width:"w-224",minWidth:"min-w-224"};case"lg":return{width:"w-288",minWidth:"min-w-288"};default:return{width:"w-240",minWidth:"min-w-240"}}}function lc({children:e}){return f.exports.cloneElement(e,{className:D(e.props.className,"dashboard-grid-content overflow-y-auto")})}const cc=O(t("path",{d:"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z"}),"MenuOpenOutlined");function dc({children:e,className:n,hideToggleButton:a,...r}){const{isMobileMode:s,leftSidenavStatus:o,setLeftSidenavStatus:l,name:c,leftSidenavCanBeCompact:d}=f.exports.useContext(ta),p=d&&!s,m=!a&&(s||d),b=()=>{l(o==="open"?"closed":"open")},g=()=>{const v=o==="compact"?"open":"compact";ys(`${c}.sidenav.compact`,v==="compact"),l(v)};return t(el,{className:D("dashboard-grid-navbar",n),border:"border-b",size:"sm",color:"primary",darkModeColor:"bg-alt",toggleButton:m?t(R,{size:"md",onClick:()=>{p?g():b()},children:t(cc,{})}):void 0,...r,children:e})}const uc=O(t("path",{d:"M12 5.83 15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z"}),"UnfoldMoreOutlined"),ln=O(t("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined");function mc(e){return q(n=>pc(n),{onSuccess:()=>{Y(h("Created workspace")),W.invalidateQueries(Ge.fetchUserWorkspaces)},onError:n=>we(n,e)})}function pc(e){return F.post("workspace",e).then(n=>n.data)}function hc(){const e=J(),{formId:n,close:a}=K(),r=mc(e);return u(G,{children:[t(Q,{children:t(i,{message:"Create workspace"})}),t(j,{children:t(he,{form:e,id:n,onSubmit:()=>{r.mutate(e.getValues(),{onSuccess:s=>{a(s.workspace.id)}})},children:t(z,{name:"name",autoFocus:!0,label:t(i,{message:"Workspace name"}),minLength:3,required:!0})})}),u(Z,{children:[t(S,{variant:"text",onClick:a,children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",type:"submit",form:n,disabled:r.isLoading,children:t(i,{message:"Create"})})]})]})}function fc(e){return F.get(`workspace/${e}`).then(n=>n.data)}function gc(e){return Ee(Ge.workspaceWithMembers(e),()=>fc(e))}const bc=O(t("path",{d:"M9 13.75c-2.34 0-7 1.17-7 3.5V19h14v-1.75c0-2.33-4.66-3.5-7-3.5zM4.34 17c.84-.58 2.87-1.25 4.66-1.25s3.82.67 4.66 1.25H4.34zM9 12c1.93 0 3.5-1.57 3.5-3.5S10.93 5 9 5 5.5 6.57 5.5 8.5 7.07 12 9 12zm0-5c.83 0 1.5.67 1.5 1.5S9.83 10 9 10s-1.5-.67-1.5-1.5S8.17 7 9 7zm7.04 6.81c1.16.84 1.96 1.96 1.96 3.44V19h4v-1.75c0-2.02-3.5-3.17-5.96-3.44zM15 12c1.93 0 3.5-1.57 3.5-3.5S16.93 5 15 5c-.54 0-1.04.13-1.5.35.63.89 1 1.98 1 3.15s-.37 2.26-1 3.15c.46.22.96.35 1.5.35z"}),"GroupOutlined");function vc({className:e,children:n,size:a,color:r,radius:s,selectable:o}){return t("div",{className:D(e,"flex items-center gap-8 flex-wrap"),children:f.exports.Children.map(n,l=>{if(f.exports.isValidElement(l))return f.exports.cloneElement(l,{size:a,color:r,selectable:o,radius:s})})})}const Fs=ue.forwardRef((e,n)=>{const{children:a,inputProps:r,wrapperProps:s,className:o,autoFocus:l,style:c,onClick:d}=e;return t("div",{...s,onClick:d,children:t("div",{...r,role:"group",className:D(o,"flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60"),ref:n,style:c,children:t(Hn,{autoFocus:l,children:a})})})}),yn=f.exports.forwardRef(({className:e,circle:n,size:a="md",src:r,...s},o)=>t("img",{ref:o,src:r,alt:"",className:D("object-cover",e,yc(a),n?"rounded-full":"rounded"),...s}));function yc(e){switch(e){case"xs":return"w-18 h-18";case"sm":return"w-24 h-24";case"md":return"w-32 h-32";default:return e}}function Ma(e){return{id:e,name:`${e}`,description:`${e}`}}function kc(e,n){const a=f.exports.useRef(null),r=Ba(n),{displayWith:s=ce=>ce.name,validateWith:o,children:l,suggestions:c,isLoading:d,inputValue:p,onInputValueChange:m,onItemSelected:b,placeholder:g,onOpenChange:v,chipSize:y="md",openMenuOnFocus:w=!0,showEmptyMessage:x,value:k,defaultValue:C,onChange:L,valueKey:N,isAsync:_,allowCustomValue:V=!0,showDropdownArrow:I,...M}=e,P=At({...e,flexibleHeight:!0}),[te,ke]=Cc(e),[ne,Ce]=f.exports.useState(!1),_e=t(Gn,{isIndeterminate:!0,size:"sm","aria-label":"loading..."}),U=I?t(zt,{}):null,{fieldProps:E,inputProps:le}=ks({...M,focusRef:r,endAdornment:d&&ne?_e:U});return t(xs,{fieldClassNames:P,...E,children:u(Fs,{ref:a,className:D("flex items-center flex-wrap",P.input),onClick:()=>{var ce;(ce=r.current)==null||ce.focus()},children:[t(xc,{displayChipUsing:s,items:te,setItems:ke,chipSize:y}),t(wc,{showEmptyMessage:x,inputProps:le,inputValue:p,onInputValueChange:m,fieldRef:a,inputRef:r,chips:te,setChips:ke,validateWith:o,isLoading:d,suggestions:c,placeholder:g,openMenuOnFocus:w,listboxIsOpen:ne,setListboxIsOpen:Ce,allowCustomValue:V,children:l})]})})}function xc({items:e,setItems:n,displayChipUsing:a,chipSize:r}){const s=ft(),o=f.exports.useCallback(l=>{const c=e.findIndex(p=>p.id===l),d=[...e];return c>-1&&(d.splice(c,1),n(d)),d},[e,n]);return t(vc,{className:"flex-shrink-0 flex-wrap max-w-full my-8",size:r,selectable:!0,children:e.map(l=>t(Wn,{errorMessage:l.errorMessage,adornment:l.image?t(yn,{circle:!0,src:l.image}):null,onRemove:()=>{o(l.id).length?s.focusPrevious({tabbable:!0}):s.focusLast()},children:a(l)},l.id))})}function wc(e){const{inputRef:n,fieldRef:a,validateWith:r,setChips:s,chips:o,suggestions:l,inputProps:c,placeholder:d,openMenuOnFocus:p,listboxIsOpen:m,setListboxIsOpen:b,allowCustomValue:g}=e,v="outline-none text-sm mx-8 my-4 h-30 flex-auto",y=ft(),w=f.exports.useCallback(U=>{U=(U||[]).filter(E=>{const le=!E||!E.id||!E.name;return!(o.findIndex(Qt=>Qt.id===(E==null?void 0:E.id))>-1)&&!le}),U.length&&(r&&(U=U.map(E=>r(E))),s([...o,...U]))},[o,s,r]),x=tl({...e,clearInputOnItemSelection:!0,isOpen:m,onOpenChange:b,items:l,selectionMode:"none",role:"listbox",virtualFocus:!0,onItemSelected:U=>{ke(U)}}),{state:{activeIndex:k,setActiveIndex:C,isOpen:L,setIsOpen:N,inputValue:_,setInputValue:V},refs:I,listboxId:M,collection:P,onInputChange:te}=x,ke=U=>{const E=P.size&&k!=null?[...P.values()][k]:null;E!=null&&E.item?w([E.item]):g&&w([Ma(E?E.value:U)]),V(""),C(null),N(!1)};Ua(()=>{a.current&&I.reference.current!==a.current&&x.reference(a.current)},[a,x,I]);const{handleTriggerKeyDown:ne,handleListboxKeyboardNavigation:Ce}=rl(x),_e=He(()=>{p&&!L&&N(!0)});return t(nl,{listbox:x,mobileOverlay:al,onPointerDown:U=>{U.preventDefault()},children:t("input",{type:"text",className:D(v,"bg-transparent"),placeholder:d,...lt(c,{ref:n,value:_,onChange:te,onPaste:U=>{const le=U.clipboardData.getData("text").match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);if(le){U.preventDefault();const ce=window.getSelection();ce!=null&&ce.rangeCount&&(ce.deleteFromDocument(),w(le.map(Qt=>Ma(Qt))))}},"aria-autocomplete":"list","aria-controls":L?M:void 0,autoComplete:"off",autoCorrect:"off",spellCheck:"false",onKeyDown:U=>{const E=U.target;if(U.key==="Enter"){U.preventDefault(),ke(E.value);return}if(U.key==="Escape"&&L&&(N(!1),V("")),U.key==="ArrowUp"&&L&&(k===0||k==null)){C(null);return}if(k!=null&&(U.key==="ArrowLeft"||U.key==="ArrowRight")){U.preventDefault();return}if((U.key==="ArrowLeft"||U.key==="Backspace"||U.key==="Delete")&&E.selectionStart===0&&k==null&&o.length){y.focusPrevious({tabbable:!0});return}ne(U)||Ce(U)},onFocus:_e,onClick:_e})})})}function Cc({onChange:e,value:n,defaultValue:a,valueKey:r}){const s=f.exports.useMemo(()=>Er(n),[n]),o=f.exports.useMemo(()=>Er(a),[a]),l=f.exports.useCallback(c=>{const d=r?c.map(p=>p[r]):c;e==null||e(d)},[e,r]);return We(s||void 0,o||[],l)}function Er(e){if(e!=null)return typeof e[0]!="object"?e.map(n=>Ma(n)):e}const Vs=ue.forwardRef(kc);function Sc({workspaceId:e,...n}){return F.post(`workspace/${e}/invite`,n).then(a=>a.data)}function Nc(){return q(e=>Sc(e),{onSuccess:(e,n)=>{W.invalidateQueries(Ge.workspaceWithMembers(n.workspaceId))},onError:e=>$e(e)})}function Ic({workspaceId:e,inviteId:n,...a}){return F.post(`workspace/${e}/${n}/resend`,a).then(r=>r.data)}function Lc(){return q(e=>Ic(e),{onSuccess:()=>{Y("Invite sent")},onError:e=>$e(e)})}const Dc=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function Pc(e){return!e||e.length>320?!1:Dc.test(e)}function $c({workspaceId:e,member:n,...a}){const r=n.model_type,s=n.model_type==="invite"?n.id:n.member_id;return F.post(`workspace/${e}/${r}/${s}/change-role`,a).then(o=>o.data)}function Mc(){return q(e=>$c(e),{onSuccess:(e,n)=>{Y(h("Role changed")),W.invalidateQueries(Ge.workspaceWithMembers(n.workspaceId))},onError:e=>$e(e)})}function _c({workspaceId:e,memberId:n,memberType:a}){const r=a==="invite"?`workspace/invite/${n}`:`workspace/${e}/member/${n}`;return F.delete(r).then(s=>s.data)}function Os(){const{workspaceId:e,setWorkspaceId:n}=Ne(),{user:a}=oe();return q(r=>_c(r),{onSuccess:(r,s)=>{W.invalidateQueries(Ge.fetchUserWorkspaces),W.invalidateQueries(Ge.workspaceWithMembers(s.workspaceId)),s.memberId===(a==null?void 0:a.id)&&e===s.workspaceId&&n(Ha.id)},onError:r=>$e(r)})}function Bs(){return t(gt,{isDanger:!0,title:t(i,{message:"Leave workspace"}),body:u("div",{children:[t(i,{message:"Are you sure you want to leave this workspace?"}),t("div",{className:"font-semibold mt-8",children:t(i,{message:"All resources you've created in the workspace will be transferred to workspace owner."})})]}),confirm:t(i,{message:"Leave"})})}function Rc({workspace:e}){const{data:n,isLoading:a}=gc(e.id);return u(G,{size:"lg",children:[t(Q,{children:t(i,{message:"Manage workspace members"})}),t(j,{children:a?t("div",{className:"flex items-center justify-center min-h-[238px]",children:t(Gn,{isIndeterminate:!0,"aria-label":"Loading workspace..."})}):t(Ac,{workspace:n.workspace})})]})}function Ac({workspace:e}){const n=Xa(e),a=[...e.members||[],...e.invites||[]];return u("div",{children:[n.invite&&t(Tc,{workspace:e}),u("div",{className:"flex items-center gap-10 mb-14 text-base",children:[t(bc,{className:"icon-sm"}),t(i,{message:"Members of `:workspace`",values:{workspace:e.name}})]}),t(Oe,{initial:!1,children:a.map(r=>t(zc,{workspace:e,member:r},`${r.model_type}.${r.id}`))})]})}function zc({workspace:e,member:n}){return u(ye.div,{initial:{x:"-100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"100%",opacity:0},transition:{type:"tween",duration:.125},className:"flex items-start text-sm gap-14 mb-20",children:[t("img",{className:"w-36 h-36 rounded flex-shrink-0",src:n.avatar,alt:""}),u("div",{className:"md:flex flex-auto items-center justify-between gap-14 min-w-0",children:[u("div",{className:"overflow-hidden mb-10 md:mb-0 md:mr-10",children:[u("div",{className:"flex items-center justify-start gap-6",children:[t("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:n.display_name}),t(Oc,{workspace:e,member:n})]}),t("div",{className:"text-muted",children:n.email})]}),t(Ec,{workspace:e,member:n})]})]},`${n.model_type}.${n.id}`)}function Xa(e){var o;const{user:n}=oe(),a={update:!1,invite:!1,delete:!1},r=["update","invite","delete"],s=(o=e.members)==null?void 0:o.find(l=>l.id===(n==null?void 0:n.id));return s&&r.forEach(l=>{var c;a[l]=s.is_owner||!!((c=s.permissions)!=null&&c.find(d=>d.name===`workspace_members.${l}`))}),a}function Ec({workspace:e,member:n}){const[a,r]=f.exports.useState(n.role_id),s=Mc(),{user:o}=oe(),l=Xa(e),c=n.model_type==="member"&&n.is_owner,d=n.model_type==="member"&&(o==null?void 0:o.id)===n.id,p=!l.update||c||d?t("div",{className:"text-muted ml-auto first:capitalize",children:t(i,{message:n.role_name})}):t(Us,{className:"ml-auto flex-shrink-0",size:"xs",value:a,isDisabled:s.isLoading,onChange:m=>{r(m),s.mutate({roleId:m,workspaceId:e.id,member:n})}});return u(Wa,{children:[p,!c&&(d||l.delete)&&t(Fc,{type:d?"leave":"remove",member:n,workspace:e})]})}function Tc({workspace:e}){const{trans:n}=H(),[a,r]=f.exports.useState([]),s=a.every(m=>!m.invalid),o=m=>m.description||m.name,[l,c]=f.exports.useState(),d=Nc(),{data:p}=qn(["workspaceRoles"]);return f.exports.useEffect(()=>{var m;!l&&((m=p==null?void 0:p.workspaceRoles)==null?void 0:m.length)&&c(p.workspaceRoles[0].id)},[p,l]),u("div",{className:"mb-30",children:[t(Vs,{value:a,onChange:r,displayWith:o,validateWith:m=>{const b=!Pc(m.description);return{...m,invalid:b,errorMessage:b?n({message:"Not a valid email"}):void 0}},placeholder:n({message:"Enter email addresses"}),label:t(i,{message:"Invite people"})}),u("div",{className:"flex items-center gap-14 justify-between mt-14",children:[t(Us,{onChange:c,value:l}),a.length&&l?t(S,{variant:"flat",color:"primary",size:"sm",disabled:d.isLoading||!s,onClick:()=>{d.mutate({emails:a.map(m=>o(m)),roleId:l,workspaceId:e.id},{onSuccess:()=>{r([])}})},children:t(i,{message:"Invite"})}):null]})]})}function Fc({member:e,workspace:n,type:a}){const r=Os(),{close:s}=K();return u(T,{type:"modal",onClose:o=>{o&&(r.mutate({workspaceId:n.id,memberId:e.id,memberType:e.model_type}),a==="leave"&&(s(),Y(h("Left workspace"))))},children:[t(R,{size:"md",className:"text-muted flex-shrink-0",disabled:r.isLoading,children:a==="leave"?t(ws,{}):t(qe,{})}),a==="leave"?t(Bs,{}):t(Vc,{member:e})]})}function Vc({member:e}){return t(gt,{isDanger:!0,title:t(i,{message:"Remove member"}),body:u("div",{children:[t(i,{message:"Are you sure you want to remove `:name`?",values:{name:e.display_name}}),t("div",{className:"font-semibold mt-8",children:t(i,{message:"All workspace resources created by `:name` will be transferred to workspace owner.",values:{name:e.display_name}})})]}),confirm:t(i,{message:"Remove"})})}function Us({value:e,onChange:n,size:a="xs",className:r,isDisabled:s}){var c;const{data:o}=qn(["workspaceRoles"]),l=(c=o==null?void 0:o.workspaceRoles)==null?void 0:c.find(d=>d.id===e);return!e||!l||!(o!=null&&o.workspaceRoles)?null:u(Kn,{selectionMode:"single",selectedValue:e,onSelectionChange:d=>{n(d)},children:[t(S,{className:r,size:a,variant:"flat",color:"chip",disabled:s,endIcon:t(sl,{}),children:l.name}),t(jn,{children:o.workspaceRoles.map(d=>t(A,{value:d.id,description:d.description,children:d.name},d.id))})]})}function Oc({member:e,workspace:n}){const{user:a}=oe(),r=Xa(n);return(a==null?void 0:a.id)===e.id?u("div",{className:"font-medium",children:["(",t(i,{message:"You"}),")"]}):e.model_type==="invite"?u("div",{className:"flex items-center gap-4",children:[t("div",{children:"\xB7"}),t("div",{className:"font-medium",children:t(i,{message:"Invited"})}),r.invite?u(Wa,{children:[t("div",{children:"\xB7"}),t(Bc,{member:e,workspace:n})]}):null]}):null}function Bc({member:e,workspace:n}){const a=Lc();return u(T,{type:"modal",onClose:r=>{r&&a.mutate({workspaceId:n.id,inviteId:e.id})},children:[t(S,{variant:"link",size:"sm",color:"primary",disabled:a.isLoading,children:t(i,{message:"Resend invite"})}),t(gt,{title:t(i,{message:"Resend invite"}),body:t(i,{message:"Are you sure you want to send this invite again?"}),confirm:t(i,{message:"Send"})})]})}const Uc=O(t("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm0 8c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm-6 4c.22-.72 3.31-2 6-2 2.7 0 5.8 1.29 6 2H9zm-3-3v-3h3v-2H6V7H4v3H1v2h3v3z"}),"PersonAddOutlined"),Hc=O(t("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined");function Wc({id:e,...n}){return F.put(`workspace/${e}`,n).then(a=>a.data)}function Gc(e){const{close:n}=K();return q(a=>Wc(a),{onSuccess:a=>{n(),Y(h("Updated workspace")),W.invalidateQueries(Ge.fetchUserWorkspaces),W.invalidateQueries(Ge.workspaceWithMembers(a.workspace.id))},onError:a=>we(a,e)})}function qc({workspace:e}){const n=J({defaultValues:{id:e.id,name:e.name}}),{formId:a,close:r}=K(),s=Gc(n);return u(G,{children:[t(Q,{children:t(i,{message:"Rename workspace"})}),t(j,{children:t(he,{form:n,id:a,onSubmit:()=>{s.mutate(n.getValues())},children:t(z,{name:"name",autoFocus:!0,label:t(i,{message:"Name"}),minLength:3,required:!0})})}),u(Z,{children:[t(S,{variant:"text",onClick:r,children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",type:"submit",form:a,disabled:s.isLoading,children:t(i,{message:"Rename"})})]})]})}function Kc({id:e}){return F.delete(`workspace/${e}`).then(n=>n.data)}function jc(){const{workspaceId:e,setWorkspaceId:n}=Ne();return q(a=>Kc(a),{onSuccess:(a,r)=>{Y(h("Deleted workspace")),W.invalidateQueries(Ge.fetchUserWorkspaces),W.invalidateQueries(Ge.workspaceWithMembers(r.id)),e===r.id&&n(Ha.id)},onError:a=>$e(a)})}function Hs({onChange:e,className:n,trigger:a}){const{data:r,isFetched:s,isFetching:o}=ol(),{workspaceId:l,setWorkspaceId:c}=Ne(),d=r==null?void 0:r.find(x=>x.id===l),[p,m]=f.exports.useState(null),[b,g]=f.exports.useState(!1),{hasPermission:v}=oe();if(f.exports.useEffect(()=>{s&&!o&&!d&&c(Ha.id)},[d,r,c,s,o]),!d||!v("workspaces.create"))return null;const y=u(Et,{className:D("flex items-center gap-10 hover:bg-hover rounded ring-inset focus-visible:ring-2",n),children:[u("span",{className:"block flex-auto mr-auto text-left overflow-hidden",children:[t("span",{className:"block text-sm text-main font-medium overflow-hidden overflow-ellipsis",children:d.default?t(i,{message:d.name}):d.name}),t("span",{className:"block text-muted text-xs",children:d.default?t(i,{message:"Personal workspace"}):t(i,{message:":count members",values:{count:d.members_count}})})]}),t(uc,{className:"icon-md shrink-0"})]}),w=a||y;return u(f.exports.Fragment,{children:[u(T,{type:"popover",isOpen:b,onClose:()=>{g(!1)},children:[f.exports.cloneElement(w,{onClick:()=>g(!b)}),t(G,{size:"min-w-320",children:u(j,{padding:"p-10",children:[t("div",{className:"mb-16 pb-10 border-b",children:r.map(x=>t(Yc,{workspace:x,setDialog:m,setSelectorIsOpen:g,onChange:e},x.id))}),t("div",{className:"text-center mb-4 px-4",children:t(S,{onClick:x=>{x.preventDefault(),x.stopPropagation(),m({name:"newWorkspace"}),g(!1)},variant:"outline",startIcon:t(ln,{}),color:"primary",className:"w-full h-40",children:t(i,{message:"Create new workspace"})})})]})})]}),t(Qc,{dialog:p,setDialog:m,onChange:e})]})}function Yc({workspace:e,onChange:n,setSelectorIsOpen:a,setDialog:r}){const{workspaceId:s,setWorkspaceId:o}=Ne(),l=s===e.id;return u("div",{onClick:()=>{o(e.id),n==null||n(e.id),a(!1)},className:D("p-10 mb-4 text-left flex items-center gap-12 rounded-lg cursor-pointer",l&&"bg-primary/5",!l&&"hover:bg-hover"),children:[t(_t,{size:"sm",className:D("flex-shrink-0 text-primary",!l&&"invisible")}),u("div",{className:"flex-auto",children:[t("div",{className:D("text-sm",l&&"font-semibold"),children:e.name}),t("div",{className:"text-muted text-sm",children:e.default?t(i,{message:"Personal workspace"}):t(i,{message:":count members",values:{count:e.members_count}})})]}),e.id!==0&&t(Zc,{setSelectorIsOpen:a,workspace:e,setDialog:r})]})}function Qc({dialog:e,setDialog:n,onChange:a}){const r=jc(),s=Os(),{user:o}=oe(),{setWorkspaceId:l}=Ne();return u(T,{type:"modal",isOpen:!!(e!=null&&e.name),onClose:c=>{(e==null?void 0:e.name)==="deleteWorkspace"&&c&&r.mutate({id:e.workspace.id}),(e==null?void 0:e.name)==="leaveWorkspace"&&c&&(o==null?void 0:o.id)&&s.mutate({workspaceId:e.workspace.id,memberId:o.id,memberType:"member"}),(e==null?void 0:e.name)==="newWorkspace"&&c&&(l(c),a==null||a(c)),n(null)},children:[(e==null?void 0:e.name)==="newWorkspace"&&t(hc,{}),(e==null?void 0:e.name)==="updateWorkspace"&&t(qc,{workspace:e.workspace}),(e==null?void 0:e.name)==="workspaceMembers"&&t(Rc,{workspace:e.workspace}),(e==null?void 0:e.name)==="deleteWorkspace"&&t(Xc,{workspace:e.workspace}),(e==null?void 0:e.name)==="leaveWorkspace"&&t(Bs,{})]})}function Xc({workspace:e}){return t(gt,{isDanger:!0,title:t(i,{message:"Delete workspace"}),body:t(i,{message:"Are you sure you want to delete \u201C:name\u201C?",values:{name:e.name}}),confirm:t(i,{message:"Delete"})})}function Zc({setSelectorIsOpen:e,setDialog:n,workspace:a}){const{user:r}=oe();return u(Kn,{onItemSelected:s=>{e(!1),n({name:s,workspace:a})},children:[t(S,{onClick:s=>{s.preventDefault(),s.stopPropagation()},color:"primary",size:"xs",variant:"outline",endIcon:t(zt,{}),children:t(i,{message:"Manage"})}),u(jn,{children:[t(A,{onClick:s=>s.stopPropagation(),value:"workspaceMembers",startIcon:t(Uc,{}),children:t(i,{message:"Members"})}),a.owner_id===(r==null?void 0:r.id)&&t(A,{onClick:s=>s.stopPropagation(),value:"updateWorkspace",startIcon:t(je,{}),children:t(i,{message:"Rename"})}),a.owner_id!==(r==null?void 0:r.id)&&t(A,{onClick:s=>s.stopPropagation(),value:"leaveWorkspace",startIcon:t(ws,{}),children:t(i,{message:"Leave"})}),a.owner_id===(r==null?void 0:r.id)&&t(A,{onClick:s=>s.stopPropagation(),value:"deleteWorkspace",startIcon:t(Hc,{}),children:t(i,{message:"Delete"})})]})]})}const Ws="link/usage";function na(){return Ee([Ws],()=>Jc())}function Jc(){return F.get(Ws).then(e=>e.data)}function ed(e){return t(il,{...e,role:"meter progressbar"})}const td=O(t("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined"),Gs={links:h("Links"),biolinks:h("Biolinks"),link_clicks:h("Visitors"),link_overlays:h("Link overlays"),custom_pages:h("Custom link pages"),custom_domains:h("Custom domains"),link_groups:h("Link groups"),tracking_pixels:h("Tracking pixels")};function nd(){const{data:e}=na();if(!e)return null;const n=t(i,{message:"Unlimited"});return t("ul",{children:Object.entries(Gs).map(([a,r])=>{const s=e==null?void 0:e.usage[a];if(!s)return null;const o=t(i,{...r});return t("li",{className:"mt-8",children:s.total?t(i,{message:":used out of :total :name",values:{used:t(Ze,{value:s.used}),total:s.total?t(Ze,{value:s.total}):n,name:o}}):t(i,{message:":count :name created",values:{count:s.used,name:o}})},a)})})}function qs({className:e}){var o,l;const{user:n}=oe(),a=(o=n==null?void 0:n.subscriptions)==null?void 0:o[0],r=(l=a==null?void 0:a.product)==null?void 0:l.name,s=a!=null&&a.renews_at?t(Je,{date:a.renews_at}):null;return u(T,{type:"popover",triggerOnHover:!0,children:[t(R,{size:"md",className:e,children:t(td,{})}),t(G,{size:"auto",children:u(j,{children:[u("div",{className:"border-b pb-10 mb-10",children:[t("div",{className:"font-semibold",children:t(i,{message:"Current plan: :planName",values:{planName:r||t(i,{message:"Free"})}})}),t("div",{className:"text-muted text-xs",children:t(i,{message:"Next payment: :date",values:{date:s||t(i,{message:"Never"})}})})]}),t(nd,{})]})})]})}function ad(){const{isLoading:e,data:n}=na(),a=n==null?void 0:n.usage.links;if(!a)return t("div",{className:"h-[53px] pt-24 mt-24 border-t"});const r=t("span",{className:D("whitespace-nowrap",e&&"invisible"),children:a.total?t(i,{message:":used of :available links created",values:{used:t(Ze,{value:a.used}),available:t(Ze,{value:a.total})}}):t(i,{message:":count links created",values:{count:a.used}})});return u("div",{className:"border-t items-start gap-8 flex pl-6 pt-24 mt-24",children:[t(qs,{className:"-mt-14"}),t(ed,{className:"flex-auto max-w-144",size:"xs",value:a.total&&a.used?a.used/a.total*100:0,label:r,showValueLabel:!1,labelPosition:"bottom"})]})}function Ks(e){const{isSubscribed:n}=oe();return t(S,{elementType:ge,to:n?"/billing/change-plan":"/pricing",variant:"outline",color:"primary",size:"xs",...e,children:t(i,{message:"Upgrade"})})}function rd({className:e,isCompactMode:n}){const{billing:a}=fe();return u("div",{className:D("text-sm pt-26 text-muted font-medium bg-alt flex flex-col gap-20 border-r overflow-y-auto relative",e),children:[u("div",{className:"flex-auto px-12",children:[t(ll,{matchDescendants:r=>r==="/dashboard",menu:"dashboard-sidebar",orientation:"vertical",onlyShowIcons:n,gap:"gap-8",itemClassName:({isActive:r})=>D("block w-full rounded py-12 px-16 border-l-4",r?"bg-primary/hover border-l-primary":"border-l-transparent hover:bg-hover")}),!n&&t(ad,{}),a.enable&&!n&&t("div",{className:"mt-14 pl-60",children:t(Ks,{})})]}),!n&&t(Hs,{className:"w-full px-24 py-18 border-t flex-shrink-0 mt-auto"}),n&&t(qs,{className:"flex-shrink-0 mx-auto mb-10"})]})}function sd(){const{links:{dash_footer:e}}=fe();return u(sc,{name:"belink-dashboard",leftSidenavCanBeCompact:!0,children:[t(od,{}),t(oc,{position:"left",children:t(rd,{})}),t(lc,{children:u("div",{className:"bg dark:bg-alt",children:[t(cl,{slot:"dashboard",className:"mt-50 mb-20"}),t(dl,{}),e&&t(ul,{padding:"px-16 md:px-28 pt-24 pb-28 md:pb-24"})]})})]})}function od(e){const{billing:n}=fe(),{leftSidenavStatus:a}=f.exports.useContext(ta);return t(dc,{...e,size:"sm",color:"primary",menuPosition:"dashboard-navbar",rightChildren:a==="compact"&&t(Ks,{variant:"flat",color:"paper"}),children:a==="compact"&&(n==null?void 0:n.enable)&&t(Hs,{trigger:t(S,{variant:"text",endIcon:t(zt,{}),children:t(i,{message:"Workspaces"})})})})}function id(e){return e instanceof ml?"day":"minute"}function _a(e,n,a){return n!=null&&e.compare(n)<0||a!=null&&e.compare(a)>0}function js(e,n){var p;const a=Yn(),[r,s]=f.exports.useState(!1),o=(p=n.closeDialogOnSelection)!=null?p:!0,l=n.granularity||id(e),c=n.min?Qe(n.min,a):void 0,d=n.max?Qe(n.max,a):void 0;return{timezone:a,granularity:l,min:c,max:d,calendarIsOpen:r,setCalendarIsOpen:s,closeDialogOnSelection:o}}function Ys(e){return e.set({hour:0,minute:0,second:0,millisecond:0})}function Ae(e){return e.set({hour:24-1,minute:60-1,second:60-1,millisecond:1e3-1})}function Ft(){const e=Yn();return f.exports.useMemo(()=>Cs(e),[e])}function Qs(e){var _e,U;const n=Ft(),[a,r]=f.exports.useState({start:(!e.value||!e.value.start)&&!((_e=e.defaultValue)!=null&&_e.start),end:(!e.value||!e.value.end)&&!((U=e.defaultValue)!=null&&U.end)}),s=e.onChange,[o,l]=We(e.value?xa(e.value,n):void 0,e.value?void 0:xa(e.defaultValue,n),e.onChange),{min:c,max:d,granularity:p,timezone:m,calendarIsOpen:b,setCalendarIsOpen:g,closeDialogOnSelection:v}=js(o.start,e),y=f.exports.useCallback(()=>{r({start:!0,end:!0}),l(xa(null,n)),s==null||s(null),g(!1)},[n,l,s,g]),[w,x]=f.exports.useState(null),[k,C]=f.exports.useState(!1),[L,N]=f.exports.useState(o),[_,V]=f.exports.useState(()=>Tr(o,d)),I=f.exports.useCallback(E=>{let le=E.start,ce=E.end;c&&(le=va(le,c));const Qt=d?ya(d,ce):ce;le=ya(le,Qt);const Qi=c?va(c,le):le;return ce=va(ce,Qi),d&&(ce=ya(ce,d)),{start:Qe(le,m),end:Qe(ce,m)}},[c,d,m]),M=f.exports.useCallback(E=>{const le={...I(E),preset:E.preset};l(le),N(le),V(Tr(le,d)),r({start:!1,end:!1})},[l,I,d]),P=f.exports.useCallback(E=>!a.start&&Jt(E,L.start)||!a.end&&Jt(E,L.end),[L,a]),te=f.exports.useCallback(E=>(k||!a.start&&!a.end)&&E.compare(L.start)>=0&&E.compare(L.end)<=0,[L,a,k]),ke=f.exports.useCallback(E=>Jt(E,L.start),[L]),ne=f.exports.useCallback(E=>Jt(E,L.end),[L]),Ce=f.exports.useCallback((E,le)=>({onPointerEnter:()=>{k&&le&&N(ka({start:w,end:E,timezone:m}))},onClick:()=>{if(!k)C(!0),x(E),N(ka({start:E,end:E,timezone:m}));else{const ce=ka({start:Ys(Qe(w,m)),end:Ae(Qe(E,m)),timezone:m});C(!1),x(null),M==null||M(ce),v&&(g==null||g(!1))}}}),[w,k,M,g,v,m]);return{selectedValue:o,setSelectedValue:M,calendarIsOpen:b,setCalendarIsOpen:g,dayIsActive:P,dayIsHighlighted:te,dayIsRangeStart:ke,dayIsRangeEnd:ne,getCellProps:Ce,calendarDates:_,setIsPlaceholder:r,isPlaceholder:a,clear:y,setCalendarDates:V,min:c,max:d,granularity:p,timezone:m,closeDialogOnSelection:v}}function Tr(e,n){let a=sn(_n(e.start)),r=sn(Rn(e.end));return Ss(a,r)&&(r=Rn(r.add({months:1}))),n&&r.compare(n)>0&&(r=a,a=_n(a.subtract({months:1}))),[a,r]}function ka(e){const n=Qe(e.start,e.timezone),a=Qe(e.end,e.timezone);return n.compare(a)>0?{start:a,end:n}:{start:n,end:a}}function xa(e,n){return(e==null?void 0:e.start)&&(e==null?void 0:e.end)?e:!(e!=null&&e.start)&&(e==null?void 0:e.end)?(e.start=e.end.subtract({months:1}),e):!(e!=null&&e.end)&&(e==null?void 0:e.start)?(e.end=e.start.add({months:1}),e):{start:n,end:n.add({months:1})}}const Za=O(t("path",{d:"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z"}),"DateRangeOutlined"),Ja=f.exports.memo(({start:e,end:n,options:a,preset:r})=>{const{dates:s}=fe(),o=Yn(),l=pt(a||Ns[r||(s==null?void 0:s.format)]);if(!e||!n)return null;let c;try{c=l.formatRange(Fr(e,o),Fr(n,o))}catch{c=""}return t(f.exports.Fragment,{children:c})},Is);function Fr(e,n){return typeof e=="string"?Ls(e,n).toDate():"toDate"in e?e.toDate(n):e}const er=ue.forwardRef(({inputRef:e,wrapperProps:n,children:a,onBlur:r,...s},o)=>{const l=At(s),c=Ba(o),{fieldProps:d,inputProps:p}=ks({...s,focusRef:c,labelElementType:"span"});return l.wrapper=D(l.wrapper,s.disabled&&"pointer-events-none"),t(xs,{wrapperProps:lt(n,{onBlur:m=>{c.current.contains(m.relatedTarget)||r==null||r(m)},onClick:()=>{pl(c).focusFirst()}}),fieldClassNames:l,ref:c,...d,children:t(Fs,{inputProps:p,className:D(l.input,"gap-10"),ref:e,children:a})})}),kn=O(t("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"KeyboardArrowLeftOutlined"),Vt=O(t("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRightOutlined");function ld({date:e,currentMonth:n,state:{dayIsActive:a,dayIsHighlighted:r,dayIsRangeStart:s,dayIsRangeEnd:o,getCellProps:l,timezone:c,min:d,max:p}}){const{localeCode:m}=bt(),b=hl(e,m),g=a(e),v=r(e),y=s(e),w=o(e),x=fl(e,c),k=Ss(e,n),C=_a(e,d,p);return u("div",{role:"button","aria-disabled":C,className:D("w-40 h-40 text-sm relative isolate flex-shrink-0",C&&"text-disabled pointer-events-none",!k&&"invisible pointer-events-none"),...l(e,k),children:[t("span",{className:D("absolute inset-0 flex items-center justify-center rounded-full w-full h-full select-none z-10 cursor-pointer",!g&&!x&&"hover:bg-hover",g&&"bg-primary text-on-primary font-semibold",x&&!g&&"bg-chip"),children:e.day}),v&&k&&t("span",{className:D("absolute w-full h-full inset-0 bg-primary/focus",(y||b===0||e.day===1)&&"rounded-l-full",(w||b===6||e.day===n.calendar.getDaysInMonth(n))&&"rounded-r-full")})]})}function cd({startDate:e,state:n,isFirst:a,isLast:r}){const{localeCode:s}=bt(),o=gl(e,s),l=An(e,s);return u("div",{className:"w-280 flex-shrink-0",children:[t(dd,{isFirst:a,isLast:r,state:n,currentMonth:e}),u("div",{className:"block",role:"grid",children:[t(ud,{state:n,startDate:e}),[...new Array(o).keys()].map(c=>t(ye.div,{className:"flex mb-6",children:[...new Array(7).keys()].map(d=>t(ld,{date:l.add({weeks:c,days:d}),currentMonth:e,state:n},d))},c))]})]})}function dd({currentMonth:e,isFirst:n,isLast:a,state:{calendarDates:r,setCalendarDates:s,timezone:o,min:l,max:c}}){const d=g=>{const v=r.length;let y;g==="forward"?y=r.map(w=>Rn(w.add({months:v}))):y=r.map(w=>Rn(w.subtract({months:v}))),s(y)},p=pt({month:"long",year:"numeric",era:e.calendar.identifier!=="gregory"?"long":void 0,calendar:e.calendar.identifier}),m=_a(e.subtract({days:1}),l,c),b=_a(_n(e.add({months:1})),l,c);return u("div",{className:"flex items-center justify-between gap-10",children:[t(R,{size:"md",className:D("text-muted",!n&&"invisible"),disabled:!n||m,"aria-hidden":!n,onClick:()=>{d("backward")},children:t(kn,{})}),t("div",{className:"text-sm font-semibold select-none",children:p.format(e.toDate(o))}),t(R,{size:"md",className:D("text-muted",!a&&"invisible"),disabled:!a||b,"aria-hidden":!a,onClick:()=>{d("forward")},children:t(Vt,{})})]})}function ud({state:{timezone:e},startDate:n}){const{localeCode:a}=bt(),r=pt({weekday:"short"}),s=An(n,a);return t("div",{className:"flex",children:[...new Array(7).keys()].map(o=>{const c=s.add({days:o}).toDate(e),d=r.format(c);return t("div",{className:"w-40 h-40 text-sm font-semibold relative flex-shrink-0",children:t("div",{className:"absolute flex items-center justify-center w-full h-full select-none",children:d})},o)})})}function Xs({state:e,visibleMonths:n=1}){return Ie()&&(n=1),t(Wa,{children:[...new Array(n).keys()].map(r=>{const s=sn(_n(e.calendarDates[r])),o=r===0,l=r===n-1;return t(cd,{state:e,startDate:s,isFirst:o,isLast:l},r)})})}const Zs=O(t("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z"}),"ArrowRightAltOutlined");function md(e,n,a,r){switch(n){case"era":case"year":case"month":case"day":return e.cycle(n,a,{round:n==="year"})}if("hour"in e)switch(n){case"dayPeriod":{const s=e.hour,o=s>=12;return e.set({hour:o?s-12:s+12})}case"hour":case"minute":case"second":return e.cycle(n,a,{round:n!=="hour",hourCycle:r.hour12?12:24})}return e}function pd(e,n,a,r){switch(n){case"day":case"month":case"year":return e.set({[n]:a})}if("hour"in e)switch(n){case"dayPeriod":{const s=e.hour,o=s>=12;return a>=12===o?e:e.set({hour:o?s-12:s+12})}case"hour":if(r.hour12){const o=e.hour>=12;!o&&a===12&&(a=0),o&&a<12&&(a+=12)}case"minute":case"second":return e.set({[n]:a})}return e}const Vr={year:5,month:2,day:7,hour:2,minute:15,second:15,dayPeriod:1};function hd({segment:e,domProps:n,value:a,onChange:r,isPlaceholder:s,state:{timezone:o,calendarIsOpen:l,setCalendarIsOpen:c}}){const d=Ie(),p=f.exports.useRef(""),{localeCode:m}=bt(),b=ft(),g=pt({timeZone:o}),v=f.exports.useMemo(()=>new bl(m,{maximumFractionDigits:0}),[m]),y=I=>{r(pd(a,e.type,I,g.resolvedOptions()))},w=I=>{r(md(a,e.type,I,g.resolvedOptions()))},x=()=>{if(v.isValidPartialNumber(e.text)){const I=e.text.slice(0,-1),M=v.parse(I);if(I.length===0||M===0){const P=vl(o);e.type in P&&y(P[e.type])}else y(M);p.current=I}else e.type==="dayPeriod"&&w(-1)},k=I=>{var M;if(!(I.ctrlKey||I.metaKey||I.shiftKey||I.altKey)){switch(I.key){case"ArrowLeft":I.preventDefault(),I.stopPropagation(),b.focusPrevious();break;case"ArrowRight":I.preventDefault(),I.stopPropagation(),b.focusNext();break;case"Enter":(M=I.target.closest("form"))==null||M.requestSubmit(),c(!l);break;case"Tab":break;case"Backspace":case"Delete":{I.preventDefault(),I.stopPropagation(),x();break}case"ArrowUp":I.preventDefault(),p.current="",w(1);break;case"ArrowDown":I.preventDefault(),p.current="",w(-1);break;case"PageUp":I.preventDefault(),p.current="",w(Vr[e.type]||1);break;case"PageDown":I.preventDefault(),p.current="",w(-(Vr[e.type]||1));break;case"Home":I.preventDefault(),p.current="",y(e.maxValue);break;case"End":I.preventDefault(),p.current="",y(e.minValue);break}_(I.key)}},C=pt({hour:"numeric",hour12:!0}),L=f.exports.useMemo(()=>{const I=new Date;return I.setHours(0),C.formatToParts(I).find(M=>M.type==="dayPeriod").value},[C]),N=f.exports.useMemo(()=>{const I=new Date;return I.setHours(12),C.formatToParts(I).find(M=>M.type==="dayPeriod").value},[C]),_=I=>{const M=p.current+I;switch(e.type){case"dayPeriod":if(L.toLowerCase().startsWith(I))y(0);else if(N.toLowerCase().startsWith(I))y(12);else break;b.focusNext();break;case"day":case"hour":case"minute":case"second":case"month":case"year":{if(!v.isValidPartialNumber(M))return;let P=v.parse(M),te=P,ke=e.minValue===0;if(e.type==="hour"&&g.resolvedOptions().hour12){switch(g.resolvedOptions().hourCycle){case"h11":P>11&&(te=v.parse(I));break;case"h12":ke=!1,P>12&&(te=v.parse(I));break}e.value>=12&&P>1&&(P+=12)}else P>e.maxValue&&(te=v.parse(I));if(Number.isNaN(P))return;const ne=te!==0||ke;ne&&y(te),Number(`${P}0`)>e.maxValue||M.length>=String(e.maxValue).length?(p.current="",ne&&b.focusNext()):p.current=M;break}}},V=d?{}:{"aria-label":e.type,"aria-valuetext":s?void 0:`${e.value}`,"aria-valuemin":e.minValue,"aria-valuemax":e.maxValue,"aria-valuenow":s?void 0:e.value,tabIndex:0,onKeyDown:k};return t("div",{...lt(n,{...V,onFocus:I=>{p.current="",I.target.scrollIntoView({block:"nearest"})},onClick:I=>{I.preventDefault(),I.stopPropagation()}}),className:"p-2 outline-none caret-transparent cursor-default rounded focus:bg-primary focus:text-on-primary select-none whitespace-nowrap box-content tabular-nums text-center",children:e.text.padStart(e.minLength,"0")})}function fd({segment:e,domProps:n}){const a=ft();return t("div",{...n,onPointerDown:r=>{r.pointerType==="mouse"&&(r.preventDefault(),a.focusNext({from:r.target})||a.focusPrevious({from:r.target}))},"aria-hidden":!0,className:"min-w-4 cursor-default select-none",children:e.text})}function gd(e,n,a){switch(n){case"year":return{value:e.year,placeholder:"yyyy",minValue:1,maxValue:e.calendar.getYearsInEra(e)};case"month":return{value:e.month,placeholder:"mm",minValue:kl(e),maxValue:e.calendar.getMonthsInYear(e)};case"day":return{value:e.day,minValue:yl(e),maxValue:e.calendar.getDaysInMonth(e),placeholder:"dd"}}if("hour"in e)switch(n){case"dayPeriod":return{value:e.hour>=12?12:0,minValue:0,maxValue:12,placeholder:"--"};case"hour":if(a.hour12){const r=e.hour>=12;return{value:e.hour,minValue:r?12:0,maxValue:r?23:11,placeholder:"--"}}return{value:e.hour,minValue:0,maxValue:23,placeholder:"--"};case"minute":return{value:e.minute,minValue:0,maxValue:59,placeholder:"--"}}return{}}function cn({segmentProps:e,state:n,value:a,onChange:r,isPlaceholder:s}){const{granularity:o}=n,l=f.exports.useMemo(()=>{const m={year:"numeric",month:"numeric",day:"numeric"};return o==="minute"&&(m.hour="numeric",m.minute="numeric"),m},[o]),c=pt(l),d=f.exports.useMemo(()=>a.toDate(),[a]),p=f.exports.useMemo(()=>c.formatToParts(d).map(m=>{const b=gd(a,m.type,c.resolvedOptions()),g=s&&m.type!=="literal"?b.placeholder:m.value;return{type:m.type,text:m.value===", "?" ":g,...b,minLength:m.type!=="literal"?String(b.maxValue).length:1}}),[d,c,s,a]);return t("div",{className:"flex items-center",children:p.map((m,b)=>m.type==="literal"?t(fd,{domProps:e,segment:m},b):t(hd,{isPlaceholder:s,domProps:e,state:n,value:a,onChange:r,segment:m},b))})}function aa({children:e,className:n,padding:a,dataTestId:r}){return t(Hn,{children:t("ul",{"data-testid":r,className:D("text-base sm:text-sm outline-none",n,a!=null?a:"py-4"),children:e})})}function tr({children:e,onSelected:n,borderRadius:a,...r}){const s=ft(),o=!!n,l=f.exports.useRef(null),[c,d]=f.exports.useState(!1),p=m=>{switch(m.key){case"ArrowDown":m.preventDefault(),s.focusNext();break;case"ArrowUp":m.preventDefault(),s.focusPrevious();break;case"Home":m.preventDefault(),s.focusFirst();break;case"End":m.preventDefault(),s.focusLast();break;case"Enter":case"Space":m.preventDefault(),n==null||n();break}};return t("li",{children:t(xl,{className:a||"rounded",isActive:c,isDisabled:r.isDisabled,...r,onFocus:m=>{d(m.target.matches(":focus-visible"))},onBlur:()=>{d(!1)},onClick:()=>{n==null||n()},ref:l,role:o?"button":void 0,onKeyDown:o?p:void 0,tabIndex:o&&!r.isDisabled?0:void 0,children:e})})}function bd(){var a;const e=zn().settings.dates.default_timezone,n=((a=zn().user)==null?void 0:a.timezone)||e||"auto";return!n||n==="auto"?wl():n}const ae=Ys(Cs(bd()));var vs;const Dn=((vs=zn().i18n)==null?void 0:vs.language)||"en",ra=[{key:0,label:h("Today"),getRangeValue:()=>({preset:0,start:ae,end:Ae(ae)})},{key:1,label:h("Yesterday"),getRangeValue:()=>({preset:1,start:ae.subtract({days:1}),end:Ae(ae).subtract({days:1})})},{key:2,label:h("This week"),getRangeValue:()=>({preset:2,start:An(ae,Dn),end:Mr(Ae(ae),Dn)})},{key:3,label:h("Last week"),getRangeValue:()=>({preset:3,start:An(ae,Dn).subtract({weeks:1}),end:Mr(Ae(ae),Dn).add({weeks:1})})},{key:4,label:h("Last 7 days"),getRangeValue:()=>({preset:4,start:ae.subtract({days:7}),end:Ae(ae)})},{key:5,label:h("Last 14 days"),getRangeValue:()=>({preset:5,start:ae.subtract({days:14}),end:Ae(ae)})},{key:6,label:h("Last 30 days"),getRangeValue:()=>({preset:6,start:ae.subtract({days:30}),end:Ae(ae)})},{key:7,label:h("Last 3 months"),getRangeValue:()=>({preset:7,start:ae.subtract({months:3}),end:Ae(ae)})},{key:8,label:h("Last 12 months"),getRangeValue:()=>({preset:8,start:ae.subtract({months:12}),end:Ae(ae)})},{key:9,label:h("This year"),getRangeValue:()=>({preset:9,start:_r(ae),end:Rr(Ae(ae))})},{key:10,label:h("Last year"),getRangeValue:()=>({preset:10,start:_r(ae).subtract({years:1}),end:Rr(Ae(ae)).subtract({years:1})})}];function vd({onPresetSelected:e,selectedValue:n}){return t(aa,{className:"min-w-192",padding:"py-14",dataTestId:"date-range-preset-list",children:ra.map(a=>t(tr,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(n==null?void 0:n.preset)===a.key,onSelected:()=>{const r=a.getRangeValue();e(r)},children:t(i,{...a.label})},a.key))})}function Js(e){return Un("(max-width: 1024px)",e)}function eo({state:e,showInlineDatePickerField:n=!1}){const a=Js(),{close:r}=K(),s=f.exports.useRef(e),o=e.isPlaceholder.start||e.isPlaceholder.end,l=u(Z,{dividerTop:!0,startAction:!o&&!a?t("div",{className:"text-xs",children:t(Ja,{start:e.selectedValue.start.toDate(),end:e.selectedValue.end.toDate(),options:{dateStyle:"medium"}})}):void 0,children:[t(S,{variant:"text",size:"xs",onClick:()=>{e.setSelectedValue(s.current.selectedValue),e.setIsPlaceholder(s.current.isPlaceholder),r()},children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",size:"xs",onClick:()=>{r(e.selectedValue)},children:t(i,{message:"Select"})})]});return u(G,{size:"auto",children:[u(j,{className:"flex",padding:"p-0",children:[!a&&t(vd,{selectedValue:e.selectedValue,onPresetSelected:c=>{e.setSelectedValue(c),e.closeDialogOnSelection&&r(c)}}),t(Oe,{initial:!1,children:t(yd,{state:e,showInlineDatePickerField:n})})]}),!e.closeDialogOnSelection&&l]})}function yd({state:e,showInlineDatePickerField:n}){return u(ye.div,{initial:{width:0,overflow:"hidden"},animate:{width:"auto"},exit:{width:0,overflow:"hidden"},transition:{type:"tween",duration:.125},className:"border-l px-20 pt-10 pb-20",children:[n&&t(kd,{state:e}),t("div",{className:"flex items-start gap-36",children:t(Xs,{state:e,visibleMonths:2})})]})}function kd({state:e}){const{selectedValue:n,setSelectedValue:a}=e;return u(er,{className:"mb-20 mt-10",children:[t(cn,{state:e,value:n.start,onChange:r=>{a({...n,start:r})}}),t(Zs,{className:"block flex-shrink-0 text-muted",size:"md"}),t(cn,{state:e,value:n.end,onChange:r=>{a({...n,end:r})}})]})}const xd={month:"short",day:"2-digit"};function wd({value:e,onChange:n,compactOnMobile:a=!0}){const r=Ie();return u(T,{type:"popover",onClose:s=>{s&&n(s)},children:[t(S,{variant:"outline",color:"chip",endIcon:t(Za,{}),children:t(Ja,{start:e.start,end:e.end,options:r&&a?xd:Ns.short})}),t(Cd,{value:e})]})}function Cd({value:e}){const n=Ie(),a=Qs({defaultValue:e,closeDialogOnSelection:!1});return t(eo,{state:a,showInlineDatePickerField:!n})}function nr(e){const{title:n,description:a,children:r,className:s,contentIsFlex:o=!0,contentClassName:l,contentRef:c}=e;return u("div",{className:D("border rounded min-h-440 h-full flex flex-col flex-auto",s),children:[u("div",{className:"text-xs p-14 flex-shrink-0 flex justify-between",children:[t("div",{className:"font-semibold text-sm",children:n}),a&&t("div",{className:"text-muted",children:a})]}),t("div",{ref:c,className:D("p-14 relative",o&&"flex-auto flex items-center justify-center",l),children:r})]})}function En(){return u("div",{className:"flex items-center gap-10 text-sm absolute mx-auto",children:[t(Gn,{isIndeterminate:!0,size:"sm"}),t(i,{message:"Chart loading"})]})}const Sd=f.exports.lazy(()=>Ga(()=>import("./lazy-chart.5d936f70.js"),["lazy-chart.5d936f70.js","main.724dba5a.js","main.7d8afbcb.css"],import.meta.url));function ar(e){const{title:n,description:a,className:r,contentRef:s,isLoading:o}=e;return t(nr,{title:n,description:a,className:r,contentRef:s,children:u(f.exports.Suspense,{fallback:t(En,{}),children:[t(Sd,{...e}),o&&t(En,{})]})})}function rr(e,{localeCode:n="en",shareFirstDatasetLabels:a=!0}){if(!e)return{datasets:[]};const r=[];return{...e,datasets:e.datasets.map((s,o)=>{const l=s.data.map((c,d)=>{let p;return o===0||!a?(p=Nd(c,e.granularity,n),r[d]=p):p=r[d],{...p,value:c.value}});return{...s,data:l}})}}function Nd(e,n,a){return e.label!=null?{label:e.label}:e.date?Id(e,n,a):{label:""}}function Id({date:e,endDate:n,value:a},r="day",s){const o=Rt(e).toDate(),l=n?Rt(n).toDate():null;switch(r){case"minute":return{label:Re(s,{second:"2-digit"}).format(o),tooltipTitle:Re(s,{day:"2-digit",hour:"numeric",minute:"numeric",second:"2-digit"}).format(o)};case"hour":return{label:Re(s,{hour:"numeric",minute:"numeric"}).format(o),tooltipTitle:Re(s,{month:"short",day:"2-digit",hour:"numeric",minute:"numeric"}).format(o)};case"day":return{label:Re(s,{day:"2-digit",weekday:"short"}).format(o),tooltipTitle:Re(s,{day:"2-digit",weekday:"short",month:"short"}).format(o)};case"week":return{label:Re(s,{month:"short",day:"2-digit"}).format(o),tooltipTitle:Re(s,{day:"2-digit",month:"long",year:"numeric"}).formatRange(o,l)};case"month":return{label:Re(s,{month:"short",year:"numeric"}).format(o),tooltipTitle:Re(s,{month:"long",year:"numeric"}).format(o)};case"year":return{label:Re(s,{year:"numeric"}).format(o),tooltipTitle:Re(s,{year:"numeric"}).format(o)}}}const Re=Cl((e,n)=>new Sl(e,n),{equals:(e,n)=>Is(e,n),callTimeout:void 0}),Xe=[["rgb(66,165,245)","rgba(66,165,245,0.2)"],["rgb(102,187,106)","rgba(102,187,106,0.2)"],["rgb(255,112,67)","rgb(255,112,67,0.2)"],["rgb(92,107,192)","rgb(92,107,192,0.2)"],["rgb(141,110,99)","rgb(141,110,99,0.2)"],["rgb(255,167,38)","rgb(255,167,38,0.2)"]],Ld={parsing:{xAxisKey:"label",yAxisKey:"value"},datasets:{line:{fill:"origin",tension:.1,pointBorderWidth:4,pointHitRadius:10}},plugins:{tooltip:{intersect:!1,mode:"index"}}};function Dd({data:e,className:n,...a}){const{localeCode:r}=bt(),s=f.exports.useMemo(()=>{const o=rr(e,{localeCode:r});return o.datasets=o.datasets.map((l,c)=>({...l,backgroundColor:Xe[c][1],borderColor:Xe[c][0],pointBackgroundColor:Xe[c][0]})),o},[e,r]);return t(ar,{...a,className:D(n,"min-w-500"),data:s,type:"line",options:Ld})}const Pd={parsing:{key:"value"},plugins:{tooltip:{intersect:!0}}};function Or({data:e,className:n,...a}){const{localeCode:r}=bt(),s=f.exports.useMemo(()=>{var l;const o=rr(e,{localeCode:r});return o.labels=(l=o.datasets[0])==null?void 0:l.data.map(c=>c.label),o.datasets=o.datasets.map((c,d)=>({...c,backgroundColor:Xe.map(p=>p[1]),borderColor:Xe.map(p=>p[0]),borderWidth:2})),o},[e,r]);return t(ar,{type:"polarArea",data:s,options:Pd,className:D(n,"min-w-500"),...a})}function $d({data:e,isLoading:n,...a}){const r=(e==null?void 0:e.datasets[0].data)||[];return u(nr,{...a,className:"min-w-500 md:min-w-0 w-1/2",title:t(i,{message:"Referrers"}),contentIsFlex:n,contentClassName:"max-h-[370px] overflow-y-auto",children:[n&&t(En,{}),r.map((s,o)=>u("div",{className:"mb-20 text-sm flex items-center justify-between gap-24",children:[s.label?u("div",{className:"flex items-center gap-8",children:[t(ot,{url:s.label}),t("a",{className:D(Tt,"lowercase"),href:s.label,target:"_blank",rel:"noreferrer",children:et(s.label)})]}):t(i,{message:"Direct, Email, SMS"}),t(Wn,{radius:"rounded",size:"xs",color:"primary",className:"font-semibold",children:s.value})]},s.label||o))]})}class Md{getStringForLocale(n,a){let r=this.strings[a];r||(r=_d(a,this.strings,this.defaultLocale),this.strings[a]=r);let s=r[n];if(!s)throw new Error(`Could not find intl message ${n} in ${a} locale`);return s}constructor(n,a="en-US"){this.strings={...n},this.defaultLocale=a}}function _d(e,n,a="en-US"){if(n[e])return n[e];let r=Rd(e);if(n[r])return n[r];for(let s in n)if(s.startsWith(r+"-"))return n[s];return n[a]}function Rd(e){return Intl.Locale?new Intl.Locale(e).language:e.split("-")[0]}function Ad(e){return e&&e.__esModule?e.default:e}var to={},no={};no={alpha:"\u0623\u0644\u0641\u0627",blue:"\u0623\u0632\u0631\u0642",brightness:"\u0627\u0644\u0633\u0637\u0648\u0639",green:"\u0623\u062E\u0636\u0631",hue:"\u062F\u0631\u062C\u0629 \u0627\u0644\u0644\u0648\u0646",lightness:"\u0627\u0644\u0625\u0636\u0627\u0621\u0629",red:"\u0623\u062D\u0645\u0631",saturation:"\u0627\u0644\u062A\u0634\u0628\u0639"};var ao={};ao={alpha:"\u0410\u043B\u0444\u0430",blue:"\u0421\u0438\u043D\u044C\u043E",brightness:"\u042F\u0440\u043A\u043E\u0441\u0442",green:"\u0417\u0435\u043B\u0435\u043D\u043E",hue:"\u041E\u0442\u0442\u0435\u043D\u044A\u043A",lightness:"\u041B\u0435\u043A\u043E\u0442\u0430",red:"\u0427\u0435\u0440\u0432\u0435\u043D\u043E",saturation:"\u041D\u0430\u0441\u0438\u0442\u0435\u043D\u043E\u0441\u0442"};var ro={};ro={alpha:"Alfa",blue:"Modr\xE1",brightness:"Jas",green:"Zelen\xE1",hue:"Odst\xEDn",lightness:"Sv\u011Btlost",red:"\u010Cerven\xE1",saturation:"Sytost"};var so={};so={alpha:"Alfa",blue:"Bl\xE5",brightness:"Lysstyrke",green:"Gr\xF8n",hue:"Tone",lightness:"Lyshed",red:"R\xF8d",saturation:"Farvem\xE6tning"};var oo={};oo={alpha:"Alpha",blue:"Blau",brightness:"Helligkeit",green:"Gr\xFCn",hue:"Farbton",lightness:"Leuchtkraft",red:"Rot",saturation:"S\xE4ttigung"};var io={};io={alpha:"\u0386\u03BB\u03C6\u03B1",blue:"\u039C\u03C0\u03BB\u03B5",brightness:"\u03A6\u03C9\u03C4\u03B5\u03B9\u03BD\u03CC\u03C4\u03B7\u03C4\u03B1",green:"\u03A0\u03C1\u03AC\u03C3\u03B9\u03BD\u03BF",hue:"\u03A4\u03CC\u03BD\u03BF\u03C2",lightness:"\u03A6\u03C9\u03C4\u03B5\u03B9\u03BD\u03CC\u03C4\u03B7\u03C4\u03B1",red:"\u039A\u03CC\u03BA\u03BA\u03B9\u03BD\u03BF",saturation:"\u039A\u03BF\u03C1\u03B5\u03C3\u03BC\u03CC\u03C2"};var lo={};lo={hue:"Hue",saturation:"Saturation",lightness:"Lightness",brightness:"Brightness",red:"Red",green:"Green",blue:"Blue",alpha:"Alpha"};var co={};co={alpha:"Alpha",blue:"Azul",brightness:"Brillo",green:"Verde",hue:"Tono",lightness:"Luminosidad",red:"Rojo",saturation:"Saturaci\xF3n"};var uo={};uo={alpha:"Alfa",blue:"Sinine",brightness:"Heledus",green:"Roheline",hue:"V\xE4rv",lightness:"Valgus",red:"Punane",saturation:"K\xFCllastus"};var mo={};mo={alpha:"Alpha",blue:"Sininen",brightness:"Kirkkaus",green:"Vihre\xE4",hue:"S\xE4vy",lightness:"Valom\xE4\xE4r\xE4",red:"Punainen",saturation:"V\xE4rikyll\xE4isyys"};var po={};po={alpha:"Alpha",blue:"Bleu",brightness:"Luminosit\xE9",green:"Vert",hue:"Teinte",lightness:"Luminosit\xE9",red:"Rouge",saturation:"Saturation"};var ho={};ho={alpha:"\u05D0\u05DC\u05E4\u05D0",blue:"\u05DB\u05D7\u05D5\u05DC",brightness:"\u05D1\u05D4\u05D9\u05E8\u05D5\u05EA",green:"\u05D9\u05E8\u05D5\u05E7",hue:"\u05D2\u05D5\u05D5\u05DF",lightness:"\u05DB\u05DE\u05D5\u05EA \u05D0\u05D5\u05E8",red:"\u05D0\u05D3\u05D5\u05DD",saturation:"\u05E8\u05D5\u05D5\u05D9\u05D4"};var fo={};fo={alpha:"Alfa",blue:"Plava",brightness:"Svjetlina",green:"Zelena",hue:"Nijansa",lightness:"Osvijetljenost",red:"Crvena",saturation:"Zasi\u0107enost"};var go={};go={alpha:"Alfa",blue:"K\xE9k",brightness:"F\xE9nyess\xE9g",green:"Z\xF6ld",hue:"Sz\xEDn\xE1rnyalat",lightness:"Vil\xE1goss\xE1g",red:"Piros",saturation:"Tel\xEDtetts\xE9g"};var bo={};bo={alpha:"Alfa",blue:"Blu",brightness:"Luminosit\xE0",green:"Verde",hue:"Tonalit\xE0",lightness:"Luminosit\xE0",red:"Rosso",saturation:"Saturazione"};var vo={};vo={alpha:"\u30A2\u30EB\u30D5\u30A1",blue:"\u9752",brightness:"\u660E\u308B\u3055",green:"\u7DD1",hue:"\u8272\u76F8",lightness:"\u660E\u5EA6",red:"\u8D64",saturation:"\u5F69\u5EA6"};var yo={};yo={alpha:"\uC54C\uD30C",blue:"\uD30C\uB791",brightness:"\uBA85\uB3C4",green:"\uCD08\uB85D",hue:"\uC0C9\uC870",lightness:"\uBC1D\uAE30",red:"\uBE68\uAC15",saturation:"\uCC44\uB3C4"};var ko={};ko={alpha:"Alfa",blue:"M\u0117lyna",brightness:"Ry\u0161kumas",green:"\u017Dalia",hue:"Atspalvis",lightness:"\u0160viesumas",red:"Raudona",saturation:"\u012Esotinimas"};var xo={};xo={alpha:"Alfa",blue:"Zila",brightness:"Spilgtums",green:"Za\u013Ca",hue:"Nokr\u0101sa",lightness:"Gai\u0161ums",red:"Sarkana",saturation:"Pies\u0101tin\u0101jums"};var wo={};wo={alpha:"Alfa",blue:"Bl\xE5",brightness:"Lysstyrke",green:"Gr\xF8nn",hue:"Fargetone",lightness:"Lyshet",red:"R\xF8d",saturation:"Metning"};var Co={};Co={alpha:"Alfa",blue:"Blauw",brightness:"Helderheid",green:"Groen",hue:"Kleurtoon",lightness:"Lichtsterkte",red:"Rood",saturation:"Verzadiging"};var So={};So={alpha:"Alfa",blue:"Niebieski",brightness:"Jasno\u015B\u0107",green:"Zielony",hue:"Odcie\u0144",lightness:"Jaskrawo\u015B\u0107",red:"Czerwony",saturation:"Nasycenie"};var No={};No={alpha:"Alfa",blue:"Azul",brightness:"Brilho",green:"Verde",hue:"Matiz",lightness:"Luminosidade",red:"Vermelho",saturation:"Satura\xE7\xE3o"};var Io={};Io={alpha:"Alfa",blue:"Azul",brightness:"Luminosidade",green:"Verde",hue:"Tonalidade",lightness:"Claridade",red:"Vermelho",saturation:"Satura\xE7\xE3o"};var Lo={};Lo={alpha:"Alfa",blue:"Albastru",brightness:"Luminozitate",green:"Verde",hue:"Nuan\u021B\u0103",lightness:"Luminozitate",red:"Ro\u0219u",saturation:"Satura\u021Bie"};var Do={};Do={alpha:"\u0410\u043B\u044C\u0444\u0430",blue:"\u0421\u0438\u043D\u0438\u0439",brightness:"\u042F\u0440\u043A\u043E\u0441\u0442\u044C",green:"\u0417\u0435\u043B\u0435\u043D\u044B\u0439",hue:"\u041E\u0442\u0442\u0435\u043D\u043E\u043A",lightness:"\u041E\u0441\u0432\u0435\u0449\u0435\u043D\u043D\u043E\u0441\u0442\u044C",red:"\u041A\u0440\u0430\u0441\u043D\u044B\u0439",saturation:"\u041D\u0430\u0441\u044B\u0449\u0435\u043D\u043D\u043E\u0441\u0442\u044C"};var Po={};Po={alpha:"Alfa",blue:"Modr\xE1",brightness:"Jas",green:"Zelen\xE1",hue:"Odtie\u0148",lightness:"Svetlos\u0165",red:"\u010Cerven\xE1",saturation:"S\xFDtos\u0165"};var $o={};$o={alpha:"Alfa",blue:"Modra",brightness:"Svetlost",green:"Zelena",hue:"Barva",lightness:"Lahkost",red:"Rde\u010Da",saturation:"Nasi\u010Denost"};var Mo={};Mo={alpha:"Alfa",blue:"Plava",brightness:"Osvetljenost",green:"Zelena",hue:"Nijansa",lightness:"Osvetljenje",red:"Crvena",saturation:"Zasi\u0107enje"};var _o={};_o={alpha:"Alfa",blue:"Bl\xE5tt",brightness:"Ljusstyrka",green:"Gr\xF6nt",hue:"Nyans",lightness:"Ljushet",red:"R\xF6tt",saturation:"M\xE4ttnad"};var Ro={};Ro={alpha:"Alfa",blue:"Mavi",brightness:"Parlakl\u0131k",green:"Ye\u015Fil",hue:"Ton",lightness:"Canl\u0131l\u0131k",red:"K\u0131rm\u0131z\u0131",saturation:"Doygunluk"};var Ao={};Ao={alpha:"\u0410\u043B\u044C\u0444\u0430",blue:"\u0421\u0438\u043D\u0456\u0439",brightness:"\u042F\u0441\u043A\u0440\u0430\u0432\u0456\u0441\u0442\u044C",green:"\u0417\u0435\u043B\u0435\u043D\u0438\u0439",hue:"\u0422\u043E\u043D",lightness:"\u041E\u0441\u0432\u0456\u0442\u043B\u0435\u043D\u0456\u0441\u0442\u044C",red:"\u0427\u0435\u0440\u0432\u043E\u043D\u0438\u0439",saturation:"\u041D\u0430\u0441\u0438\u0447\u0435\u043D\u0456\u0441\u0442\u044C"};var zo={};zo={alpha:"Alpha",blue:"\u84DD\u8272",brightness:"\u4EAE\u5EA6",green:"\u7EFF\u8272",hue:"\u8272\u76F8",lightness:"\u660E\u4EAE\u5EA6",red:"\u7EA2\u8272",saturation:"\u9971\u548C\u5EA6"};var Eo={};Eo={alpha:"Alpha",blue:"\u85CD\u8272",brightness:"\u4EAE\u5EA6",green:"\u7DA0\u8272",hue:"\u8272\u76F8",lightness:"\u660E\u4EAE",red:"\u7D05\u8272",saturation:"\u98FD\u548C\u5EA6"};to={"ar-AE":no,"bg-BG":ao,"cs-CZ":ro,"da-DK":so,"de-DE":oo,"el-GR":io,"en-US":lo,"es-ES":co,"et-EE":uo,"fi-FI":mo,"fr-FR":po,"he-IL":ho,"hr-HR":fo,"hu-HU":go,"it-IT":bo,"ja-JP":vo,"ko-KR":yo,"lt-LT":ko,"lv-LV":xo,"nb-NO":wo,"nl-NL":Co,"pl-PL":So,"pt-BR":No,"pt-PT":Io,"ro-RO":Lo,"ru-RU":Do,"sk-SK":Po,"sl-SI":$o,"sr-SP":Mo,"sv-SE":_o,"tr-TR":Ro,"uk-UA":Ao,"zh-CN":zo,"zh-TW":Eo};const zd=new Md(Ad(to));function Ot(e){let n=at.parse(e)||rt.parse(e)||st.parse(e);if(n)return n;throw new Error("Invalid color value: "+e)}class sr{toHexInt(){return this.toFormat("rgb").toHexInt()}getChannelValue(n){if(n in this)return this[n];throw new Error("Unsupported color channel: "+n)}withChannelValue(n,a){if(n in this){let r=this.clone();return r[n]=a,r}throw new Error("Unsupported color channel: "+n)}getChannelName(n,a){return zd.getStringForLocale(n,a)}getColorSpaceAxes(n){let{xChannel:a,yChannel:r}=n,s=a||this.getColorChannels().find(c=>c!==r),o=r||this.getColorChannels().find(c=>c!==s),l=this.getColorChannels().find(c=>c!==s&&c!==o);return{xChannel:s,yChannel:o,zChannel:l}}}class at extends sr{static parse(n){let a=[];if(/^#[\da-f]+$/i.test(n)&&[4,5,7,9].includes(n.length)){const o=(n.length<6?n.replace(/[^#]/gi,"$&$&"):n).slice(1).split("");for(;o.length>0;)a.push(parseInt(o.splice(0,2).join(""),16));a[3]=a[3]!==void 0?a[3]/255:void 0}const r=n.match(/^rgba?\((.*)\)$/);r!=null&&r[1]&&(a=r[1].split(",").map(o=>Number(o.trim())),a=a.map((o,l)=>mt(o,0,l<3?255:1)));var s;return a.length<3?void 0:new at(a[0],a[1],a[2],(s=a[3])!==null&&s!==void 0?s:1)}toString(n){switch(n){case"hex":return"#"+(this.red.toString(16).padStart(2,"0")+this.green.toString(16).padStart(2,"0")+this.blue.toString(16).padStart(2,"0")).toUpperCase();case"hexa":return"#"+(this.red.toString(16).padStart(2,"0")+this.green.toString(16).padStart(2,"0")+this.blue.toString(16).padStart(2,"0")+Math.round(this.alpha*255).toString(16).padStart(2,"0")).toUpperCase();case"rgb":return`rgb(${this.red}, ${this.green}, ${this.blue})`;case"css":case"rgba":return`rgba(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`;default:return this.toFormat(n).toString(n)}}toFormat(n){switch(n){case"hex":case"hexa":case"rgb":case"rgba":return this;case"hsb":case"hsba":return this.toHSB();case"hsl":case"hsla":return this.toHSL();default:throw new Error("Unsupported color conversion: rgb -> "+n)}}toHexInt(){return this.red<<16|this.green<<8|this.blue}toHSB(){const n=this.red/255,a=this.green/255,r=this.blue/255,s=Math.min(n,a,r),o=Math.max(n,a,r),l=o-s,c=o===0?0:l/o;let d=0;if(l!==0){switch(o){case n:d=(a-r)/l+(a<r?6:0);break;case a:d=(r-n)/l+2;break;case r:d=(n-a)/l+4;break}d/=6}return new rt(de(d*360,2),de(c*100,2),de(o*100,2),this.alpha)}toHSL(){const n=this.red/255,a=this.green/255,r=this.blue/255,s=Math.min(n,a,r),o=Math.max(n,a,r),l=(o+s)/2,c=o-s;let d,p;if(c===0)d=p=0;else{switch(p=c/(l<.5?o+s:2-o-s),o){case n:d=(a-r)/c+(a<r?6:0);break;case a:d=(r-n)/c+2;break;case r:d=(n-a)/c+4;break}d/=6}return new st(de(d*360,2),de(p*100,2),de(l*100,2),this.alpha)}clone(){return new at(this.red,this.green,this.blue,this.alpha)}getChannelRange(n){switch(n){case"red":case"green":case"blue":return{minValue:0,maxValue:255,step:1,pageSize:17};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+n)}}formatChannelValue(n,a){let r,s=this.getChannelValue(n);switch(n){case"red":case"green":case"blue":r={style:"decimal"};break;case"alpha":r={style:"percent"};break;default:throw new Error("Unknown color channel: "+n)}return new qa(a,r).format(s)}getColorSpace(){return"rgb"}getColorChannels(){return at.colorChannels}constructor(n,a,r,s){super(),this.red=n,this.green=a,this.blue=r,this.alpha=s}}at.colorChannels=["red","green","blue"];const Ed=/hsb\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%)\)|hsba\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d(.\d+)?)\)/;class rt extends sr{static parse(n){let a;if(a=n.match(Ed)){var r;const[s,o,l,c]=((r=a[1])!==null&&r!==void 0?r:a[2]).split(",").map(d=>Number(d.trim().replace("%","")));return new rt(To(s,360),mt(o,0,100),mt(l,0,100),mt(c!=null?c:1,0,1))}}toString(n){switch(n){case"css":return this.toHSL().toString("css");case"hex":return this.toRGB().toString("hex");case"hexa":return this.toRGB().toString("hexa");case"hsb":return`hsb(${this.hue}, ${de(this.saturation,2)}%, ${de(this.brightness,2)}%)`;case"hsba":return`hsba(${this.hue}, ${de(this.saturation,2)}%, ${de(this.brightness,2)}%, ${this.alpha})`;default:return this.toFormat(n).toString(n)}}toFormat(n){switch(n){case"hsb":case"hsba":return this;case"hsl":case"hsla":return this.toHSL();case"rgb":case"rgba":return this.toRGB();default:throw new Error("Unsupported color conversion: hsb -> "+n)}}toHSL(){let n=this.saturation/100,a=this.brightness/100,r=a*(1-n/2);return n=r===0||r===1?0:(a-r)/Math.min(r,1-r),new st(de(this.hue,2),de(n*100,2),de(r*100,2),this.alpha)}toRGB(){let n=this.hue,a=this.saturation/100,r=this.brightness/100,s=(o,l=(o+n/60)%6)=>r-a*r*Math.max(Math.min(l,4-l,1),0);return new at(Math.round(s(5)*255),Math.round(s(3)*255),Math.round(s(1)*255),this.alpha)}clone(){return new rt(this.hue,this.saturation,this.brightness,this.alpha)}getChannelRange(n){switch(n){case"hue":return{minValue:0,maxValue:360,step:1,pageSize:15};case"saturation":case"brightness":return{minValue:0,maxValue:100,step:1,pageSize:10};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+n)}}formatChannelValue(n,a){let r,s=this.getChannelValue(n);switch(n){case"hue":r={style:"unit",unit:"degree",unitDisplay:"narrow"};break;case"saturation":case"brightness":r={style:"percent"},s/=100;break;case"alpha":r={style:"percent"};break;default:throw new Error("Unknown color channel: "+n)}return new qa(a,r).format(s)}getColorSpace(){return"hsb"}getColorChannels(){return rt.colorChannels}constructor(n,a,r,s){super(),this.hue=n,this.saturation=a,this.brightness=r,this.alpha=s}}rt.colorChannels=["hue","saturation","brightness"];const Td=/hsl\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%)\)|hsla\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d(.\d+)?)\)/;function To(e,n){return(e%n+n)%n}class st extends sr{static parse(n){let a;if(a=n.match(Td)){var r;const[s,o,l,c]=((r=a[1])!==null&&r!==void 0?r:a[2]).split(",").map(d=>Number(d.trim().replace("%","")));return new st(To(s,360),mt(o,0,100),mt(l,0,100),mt(c!=null?c:1,0,1))}}toString(n){switch(n){case"hex":return this.toRGB().toString("hex");case"hexa":return this.toRGB().toString("hexa");case"hsl":return`hsl(${this.hue}, ${de(this.saturation,2)}%, ${de(this.lightness,2)}%)`;case"css":case"hsla":return`hsla(${this.hue}, ${de(this.saturation,2)}%, ${de(this.lightness,2)}%, ${this.alpha})`;default:return this.toFormat(n).toString(n)}}toFormat(n){switch(n){case"hsl":case"hsla":return this;case"hsb":case"hsba":return this.toHSB();case"rgb":case"rgba":return this.toRGB();default:throw new Error("Unsupported color conversion: hsl -> "+n)}}toHSB(){let n=this.saturation/100,a=this.lightness/100,r=a+n*Math.min(a,1-a);return n=r===0?0:2*(1-a/r),new rt(de(this.hue,2),de(n*100,2),de(r*100,2),this.alpha)}toRGB(){let n=this.hue,a=this.saturation/100,r=this.lightness/100,s=a*Math.min(r,1-r),o=(l,c=(l+n/30)%12)=>r-s*Math.max(Math.min(c-3,9-c,1),-1);return new at(Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255),this.alpha)}clone(){return new st(this.hue,this.saturation,this.lightness,this.alpha)}getChannelRange(n){switch(n){case"hue":return{minValue:0,maxValue:360,step:1,pageSize:15};case"saturation":case"lightness":return{minValue:0,maxValue:100,step:1,pageSize:10};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+n)}}formatChannelValue(n,a){let r,s=this.getChannelValue(n);switch(n){case"hue":r={style:"unit",unit:"degree",unitDisplay:"narrow"};break;case"saturation":case"lightness":r={style:"percent"},s/=100;break;case"alpha":r={style:"percent"};break;default:throw new Error("Unknown color channel: "+n)}return new qa(a,r).format(s)}getColorSpace(){return"hsl"}getColorChannels(){return st.colorChannels}constructor(n,a,r,s){super(),this.hue=n,this.saturation=a,this.lightness=r,this.alpha=s}}st.colorChannels=["hue","saturation","lightness"];Ot("#ffffff");Ot("hsl(0, 100%, 50%)");const Fd=Ot("#000000"),Vd=Ot("#FFFFFF");Fd.toHexInt();Vd.toHexInt();function Br(e){try{return Ot(`rgb(${e.split(" ").join(",")})`).toString("hex")}catch{return e}}const Ur="https://www.gstatic.com/charts/loader.js";function Od({placeholderRef:e,data:n}){const{trans:a}=H(),{analytics:r}=fe(),s=r==null?void 0:r.gchart_api_key,{selectedTheme:o}=Nl(),l=f.exports.useRef(),c=f.exports.useCallback(()=>{var v,y;if(typeof google>"u")return;const p=n.map(w=>[w.label,w.value]);p.unshift([a(h("Country")),a(h("Clicks"))]);const m=`${Br(o.colors["--be-paper"])}`,g={colorAxis:{colors:[`${Br(o.colors["--be-primary"])}`]},backgroundColor:m};!l.current&&e.current&&((v=google==null?void 0:google.visualization)==null?void 0:v.GeoChart)&&(l.current=new google.visualization.GeoChart(e.current)),(y=l.current)==null||y.draw(google.visualization.arrayToDataTable(p),g)},[o,n,e]),d=f.exports.useCallback(()=>{Ar.alreadyLoading(Ur)||Ar.loadAsset(Ur,{type:"js"}).then(()=>{google.charts.load("current",{packages:["geochart"],mapsApiKey:s}),google.charts.setOnLoadCallback(()=>{c()})})},[s,c]);return f.exports.useEffect(()=>{d()},[d]),f.exports.useEffect(()=>{c()},[o,c,n]),{drawGoogleChart:c}}function Bd({data:e,isLoading:n,...a}){const r=f.exports.useRef(null),s=e==null?void 0:e.datasets[0].data,o=f.exports.useMemo(()=>s||[],[s]);return Od({placeholderRef:r,data:o}),u(nr,{...a,className:"min-w-500",title:t(i,{message:"Top Locations"}),contentIsFlex:n,children:[n&&t(En,{}),u("div",{className:"flex",children:[t("div",{ref:r,className:"flex-auto w-[480px] min-h-[340px]"}),t("div",{className:"text-sm max-h-[370px] w-[170px] flex-initial overflow-y-auto",children:o.map(l=>u("div",{className:"flex items-center gap-4 mb-4",children:[t("div",{className:"max-w-110 whitespace-nowrap overflow-hidden overflow-ellipsis",children:l.label}),u("div",{children:["(",l.percentage,")%"]})]},l.label))})]})]})}function Ud({data:e,direction:n="vertical",individualBarColors:a=!1,className:r,...s}){const{localeCode:o}=bt(),l=f.exports.useMemo(()=>{const p=rr(e,{localeCode:o});return p.datasets=p.datasets.map((m,b)=>({...m,backgroundColor:a?Xe.map(g=>g[1]):Xe[b][1],borderColor:a?Xe.map(g=>g[0]):Xe[b][0],borderWidth:2})),p},[e,o,a]),c=n==="horizontal",d=f.exports.useMemo(()=>({indexAxis:c?"y":"x",parsing:{xAxisKey:c?"value":"label",yAxisKey:c?"label":"value"}}),[c]);return t(ar,{type:"bar",className:D(r,"min-w-500"),data:l,options:d,...s})}const Hr="reports/clicks";function Hd(e,n){return Ee([Hr,e],()=>Wd(Hr,e),{keepPreviousData:!0,enabled:n.isEnabled})}function Wd(e,n){var r;const a={model:n.model,metrics:(r=n.metrics)==null?void 0:r.join(",")};return a.startDate=n.dateRange.start.toAbsoluteString(),a.endDate=n.dateRange.end.toAbsoluteString(),a.timezone=n.dateRange.start.timeZone,F.get(e,{params:a}).then(s=>s.data)}function Gd({dateRange:e,model:n}){const r="flex flex-col lg:flex-row lg:items-center overflow-x-auto gap-12 md:gap-24 mb-12 md:mb-24";return u(f.exports.Fragment,{children:[u("div",{className:r,children:[t(Pt,{metric:"clicks",model:n,dateRange:e,children:({data:s})=>t(Dd,{className:"flex-auto",title:t(i,{message:"Click count"}),hideLegend:!0,description:t(i,{message:":count total clicks",values:{count:t(Ze,{value:(s==null?void 0:s.report.clicks.total)||0})}})})}),t(Pt,{metric:"devices",model:n,dateRange:e,children:t(Or,{title:t(i,{message:"Top devices"})})})]}),u("div",{className:r,children:[t(Pt,{metric:"referrers",model:n,dateRange:e,children:t($d,{})}),t(Pt,{metric:"locations",model:n,dateRange:e,children:t(Bd,{className:"flex-auto w-1/2 lg:max-w-[740px]"})})]}),u("div",{className:r,children:[t(Pt,{metric:"browsers",model:n,dateRange:e,children:t(Ud,{className:"max-w-500",direction:"horizontal",individualBarColors:!0,hideLegend:!0,title:t(i,{message:"Top browsers"})})}),t(Pt,{metric:"platforms",model:n,dateRange:e,children:t(Or,{className:"max-w-500",title:t(i,{message:"Top platforms"})})})]})]})}function Pt({children:e,metric:n,model:a,dateRange:r}){var m,b;const[s,o]=f.exports.useState(!1),l=Hd({metrics:[n],model:a,dateRange:r},{isEnabled:s}),c=typeof e=="function"?e(l):e,d=f.exports.useRef(),p=f.exports.useCallback(g=>{var v;if(g){const y=new IntersectionObserver(([w])=>{var x;w.isIntersecting&&(o(!0),(x=d.current)==null||x.disconnect(),d.current=void 0)},{threshold:.1});d.current=y,y.observe(g)}else d.current&&((v=d.current)==null||v.disconnect())},[]);return f.exports.cloneElement(c,{data:(b=(m=l.data)==null?void 0:m.report)==null?void 0:b[n],isLoading:l.isLoading,contentRef:p})}function sa({model:e,title:n,actions:a}){const[r,s]=f.exports.useState(()=>ra[2].getRangeValue());return u("div",{className:"min-h-full gap-12 md:gap-24 p-12 md:p-24",children:[t(Ka,{children:t(i,{message:"Clicks report"})}),u("div",{className:"md:flex items-center justify-between gap-24 mb-24",children:[n,u("div",{className:"flex-shrink-0 flex items-center md:justify-end mt-10 md:mt-0 gap-12",children:[a,t("div",{className:"text-sm font-semibold",children:t(wd,{value:r,onChange:s,compactOnMobile:!1})})]})]}),t(Gd,{dateRange:r,model:e})]})}function qd(){const{workspaceId:e}=Ne(),{user:n}=oe(),a=e&&e>0?`workspace=${e}`:`user=${n==null?void 0:n.id}`;return t(sa,{model:a,title:t("h1",{className:"text-3xl font-light",children:t(i,{message:"Clicks report"})})})}const wa="filters";function Kd(e){if(!e)return[];let n=[];try{n=JSON.parse(atob(decodeURIComponent(e))),n.map(a=>(a.valueKey!=null&&(a.value=a.valueKey),a))}catch{}return n}function jd(e,n){return!e||(e=n?e.filter(a=>a.value!=="").map(a=>Yd(a,n)):e,e=e.filter(a=>!a.isInactive),!e.length)?"":encodeURIComponent(btoa(JSON.stringify(e)))}function Yd(e,n){const a=n.find(r=>r.key===e.key);if((a==null?void 0:a.type)==="select"){const r=(a.options||[]).find(s=>s.key===e.value);return{...e,value:r==null?void 0:r.value,valueKey:r==null?void 0:r.key}}return e}function oa(e,n){const[a]=Il(),r=Ll(),s=a.get(wa),o=f.exports.useMemo(()=>{if(!e)return[];const m=Kd(s);return(n||[]).forEach(b=>{if(!m.find(g=>g.key===b)){const g=e.find(v=>v.key===b);m.push({key:b,value:g.defaultValue,operator:g.defaultOperator,isInactive:!0})}}),m.sort((b,g)=>e.findIndex(v=>v.key===b.key)-e.findIndex(v=>v.key===g.key)),m},[s,n,e]),l=f.exports.useCallback(m=>{const b=[...o];return m.forEach(g=>{const v=typeof g=="object"?g.key:g,y=b.findIndex(w=>w.key===v);y>-1&&b.splice(y,1)}),b},[o]),c=f.exports.useCallback(m=>{const b=jd(m,e);b?a.set(wa,b):a.delete(wa),r({search:`?${a}`},{replace:!0})},[e,r,a]),d=f.exports.useCallback(m=>{const g=[...l(m),...m];c(g)},[l,c]),p=f.exports.useCallback(m=>c(l([m])),[l,c]);return{add:d,remove:p,replaceAll:c,decodedFilters:o,encodedFilters:s}}const X=(e,n)=>{const a=e.split("/");return n&&a.push(n),a};function Fo(e,n,a){return Ee(X(e,n),()=>Qd(e,n),{...a,keepPreviousData:!0})}function Qd(e,n){return F.get(e,{params:n}).then(a=>a.data)}const ia=ue.createContext(null);function xn(){return f.exports.useContext(ia)}function la({isFirst:e,isLast:n,isRowHeader:a,width:r,column:s}={}){const o=(s==null?void 0:s.width)||r||"",l=s==null?void 0:s.padding;let c="text-left";return(s==null?void 0:s.align)==="center"?c="text-center":(s==null?void 0:s.align)==="end"&&(c="text-right"),D("overflow-hidden whitespace-nowrap overflow-ellipsis h-48 outline-none focus-visible:outline focus-visible:outline-offset-2",c,!l&&e&&"pl-24 pr-16",!l&&n&&"pr-24 pl-16",!e&&!n&&!l&&"px-16",l,o,s==null?void 0:s.className)}function Vo({isHeader:e,isSelected:n,enableSelection:a,isFirst:r,isDarkMode:s}={}){return D("break-inside-avoid outline-none",!e&&"border-b",!e&&r&&"border-t",n&&!s&&"bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus",n&&s&&"bg-selected hover:bg-focus focus-visible:bg-focus",!n&&!e&&a&&"focus-visible:bg-focus hover:bg-hover")}function Ra(e){return Dl()?e.metaKey:e.ctrlKey}function Xd(e){const{cellCount:n,rowCount:a}=e;return{onKeyDown:s=>{switch(s.key){case"ArrowLeft":Ue(s,{cell:{op:"decrement"}},e);break;case"ArrowRight":Ue(s,{cell:{op:"increment"}},e);break;case"ArrowUp":Ue(s,{row:{op:"decrement"}},e);break;case"ArrowDown":Ue(s,{row:{op:"increment"}},e);break;case"PageUp":Ue(s,{row:{op:"decrement",count:5}},e);break;case"PageDown":Ue(s,{row:{op:"increment",count:5}},e);break;case"Tab":Zd(s);break;case"Home":Ra(s)?Ue(s,{row:{op:"decrement",count:a},cell:{op:"decrement",count:n}},e):Ue(s,{cell:{op:"decrement",count:n}},e);break;case"End":Ra(s)?Ue(s,{row:{op:"increment",count:a},cell:{op:"increment",count:n}},e):Ue(s,{cell:{op:"increment",count:n}},e);break}}}}function Ue(e,n,{cellCount:a,rowCount:r}){var y,w,x,k,C,L,N,_,V;if(((y=document.activeElement)==null?void 0:y.tagName)==="input")return;e.preventDefault();const s=e.currentTarget,o=e.target.closest("[aria-colindex]");if(!o||!s)return;const l=o.closest("[aria-rowindex]");if(!l)return;let c=parseInt(l.getAttribute("aria-rowindex")),d=parseInt(o.getAttribute("aria-colindex"));if(Number.isNaN(c)||Number.isNaN(d))return;const p=(x=(w=n.row)==null?void 0:w.count)!=null?x:1;((k=n.row)==null?void 0:k.op)==="increment"?c=Math.min(r,c+p):((C=n.row)==null?void 0:C.op)==="decrement"&&(c=Math.max(1,c-p));const m=(N=(L=n.cell)==null?void 0:L.count)!=null?N:1;((_=n.cell)==null?void 0:_.op)==="increment"?d=Math.min(a,d+m):((V=n.cell)==null?void 0:V.op)==="decrement"&&(d=Math.max(1,d-m));const b=s.querySelector(`[aria-rowindex="${c}"] [aria-colindex="${d}"]`);if(!b)return;const v=ja(b).nextNode()||b;o.setAttribute("tabindex","-1"),v.setAttribute("tabindex","0"),v.focus()}function Zd(e){const n=e.currentTarget;if(e.shiftKey)n.focus();else{const a=ja(n,{tabbable:!0});let r,s;do s=a.lastChild(),s&&(r=s);while(s);r&&!r.contains(document.activeElement)&&Pl(r)}}const kt=f.exports.createContext(null);function Jd({item:e}){const n=Ie(),{selectedRows:a,enableSelection:r,toggleRow:s,selectionStyle:o}=f.exports.useContext(kt);return!r||o==="highlight"||n?null:t("td",{className:la({isFirst:!0,width:"w-64 flex-shrink-0 flex-grow-0"}),children:t(Qn,{checked:a.includes(e.id),onChange:()=>{s(e)}})})}function eu({rowIndex:e,rowIsHovered:n,index:a,item:r,id:s}){const{enableSelection:o,columns:l}=f.exports.useContext(kt),c=o?!1:a===0,d=a===l.length-1,p=l[a],m=f.exports.useMemo(()=>({index:e,isHovered:n,isPlaceholder:r.isPlaceholder}),[e,n,r.isPlaceholder]);return t("td",{id:s,tabIndex:-1,"data-testid":`col-${p.key}`,className:la({isFirst:c,isLast:d,column:p}),children:p.body(r,m)})}function tu({onMoveStart:e,onMove:n,onMoveEnd:a,minimumMovement:r=0,preventDefault:s,stopPropagation:o=!0,onPress:l,onLongPress:c,...d}){const m=f.exports.useRef({lastPosition:{x:0,y:0},started:!1,longPressTriggered:!1}).current,{addGlobalListener:b,removeGlobalListener:g}=Ds(),v=k=>{!m.el||(e==null?void 0:e(k,m.el))===!1||(m.originalTouchAction=m.el.style.touchAction,m.el.style.touchAction="none",m.originalUserSelect=document.documentElement.style.userSelect,document.documentElement.style.userSelect="none",m.started=!0)},y=k=>{var C;if(k.button===0&&m.id==null){if(m.started=!1,((C=d.onPointerDown)==null?void 0:C.call(d,k))===!1)return;o&&k.stopPropagation(),s&&k.preventDefault(),m.id=k.pointerId,m.el=k.currentTarget,m.lastPosition={x:k.clientX,y:k.clientY},c&&(m.longPressTimer=setTimeout(()=>{c(k,m.el),m.longPressTriggered=!0},400)),(e||n)&&b(window,"pointermove",w,!1),b(window,"pointerup",x,!1),b(window,"pointercancel",x,!1)}},w=k=>{if(k.pointerId===m.id){const C=k.clientX-m.lastPosition.x,L=k.clientY-m.lastPosition.y;(Math.abs(C)>=r||Math.abs(L)>=r)&&!m.started&&v(k),m.started&&(n==null||n(k,C,L),m.lastPosition={x:k.clientX,y:k.clientY})}},x=k=>{var C;if(k.pointerId===m.id){m.longPressTimer&&clearTimeout(m.longPressTimer);const L=m.longPressTriggered;m.longPressTriggered=!1,m.started&&(a==null||a(k)),m.el&&(k.type!=="pointercancel"&&((C=d.onPointerUp)==null||C.call(d,k,m.el),k.target&&m.el.contains(k.target)&&(L?c==null||c(k,m.el):l==null||l(k,m.el))),document.documentElement.style.userSelect=m.originalUserSelect||"",m.el.style.touchAction=m.originalTouchAction||""),m.id=void 0,m.started=!1,g(window,"pointermove",w,!1),g(window,"pointerup",x,!1),g(window,"pointercancel",x,!1)}};return{domProps:{onPointerDown:He(y)}}}function nu(e){return e.shiftKey||Ra(e)}function au(){return Un("((hover: none) and (pointer: coarse))")}const ru=["button","a","input","select","textarea"];function su({item:e,index:n,renderAs:a}){const{selectedRows:r,columns:s,toggleRow:o,selectRow:l,onAction:c,onRowContextMenu:d,enableSelection:p,selectionStyle:m}=f.exports.useContext(kt),b=au(),g=$l(),v=r.includes(e.id),[y,w]=f.exports.useState(!1),x=P=>P.target.closest(ru.join(",")),k=P=>{m==="highlight"&&c&&!b&&!x(P)&&(P.preventDefault(),P.stopPropagation(),c(e,n))},C=!!r.length,L=P=>{x(P)||(m=="checkbox"?p&&(C||!c)?o(e):c&&c(e,n):m==="highlight"&&(b?p&&C?o(e):c==null||c(e,n):p&&l(e,nu(P))))},{domProps:N}=tu({onPress:L,onLongPress:b&&p?()=>o(e):void 0}),_=P=>{p&&P.key===" "?(P.preventDefault(),P.stopPropagation(),m==="checkbox"?o(e):l(e)):P.key==="Enter"&&!r.length&&c&&(P.preventDefault(),P.stopPropagation(),c(e,n))},V=P=>{d==null||d(P,e,n),b&&(P.preventDefault(),P.stopPropagation())},I={"aria-selected":v,className:Vo({isSelected:v,enableSelection:p,isFirst:n===0,isDarkMode:g}),onDoubleClick:He(k),onKeyDown:He(_),onContextMenu:He(V),onPointerEnter:He(()=>w(!0)),onPointerLeave:He(()=>w(!1)),...N},M=a||"tr";return u(M,{item:M==="tr"?void 0:e,...I,children:[t(Jd,{item:e}),s.map((P,te)=>t(eu,{rowIndex:n,rowIsHovered:y,index:te,item:e},`${e.id}-${P.key}`))]})}const en=O(t("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownwardOutlined");function ou({index:e}){const{enableSelection:n,columns:a,sortDescriptor:r,onSortChange:s}=f.exports.useContext(kt),o=n?!1:e===0,l=e===a.length-1,c=a[e],d=la({isFirst:o,isLast:l,column:c}),[p,m]=f.exports.useState(!1),b=c.sortingKey||c.key,g=c.allowsSorting,{orderBy:v,orderDir:y}=r||{},w=g&&v===b;let x;w&&y==="asc"?x="ascending":w&&y==="desc"?x="descending":g&&(x="none");const k=()=>{if(!g)return;let N;w&&y==="desc"?N={orderDir:"asc",orderBy:b}:w&&y==="asc"?N={orderBy:void 0,orderDir:void 0}:N={orderDir:"desc",orderBy:b},s==null||s(N)},C=w||p,L={visible:{opacity:1,y:0},hidden:{opacity:0,y:"-25%"}};return u("th",{onMouseEnter:()=>{m(!0)},onMouseLeave:()=>{m(!1)},onKeyDown:N=>{(N.key===" "||N.key==="Enter")&&(N.preventDefault(),k())},onClick:k,tabIndex:-1,"aria-sort":x,"data-testid":`header-col-${c.key}`,className:D(d,"text-muted font-medium text-xs",g&&"cursor-pointer"),children:[c.hideHeader?t("div",{className:"sr-only",children:c.header()}):c.header(),t(Oe,{children:g&&t(ye.span,{variants:L,animate:C?"visible":"hidden",initial:!1,transition:{type:"tween"},className:"inline-block ml-6 -mt-2","data-testid":"table-sort-button","aria-hidden":!C,children:t(en,{size:"xs",className:D("text-muted",y==="asc"&&v===b&&"rotate-180 transition-transform")})},"sort-icon")})]})}function iu(){const e=Ie(),{trans:n}=H(),{data:a,selectedRows:r,onSelectionChange:s,enableSelection:o,selectionStyle:l}=f.exports.useContext(kt);if(!o||l==="highlight"||e)return null;const c=!!a.length&&a.length===r.length,d=!c&&!!r.length;return t("th",{"aria-colindex":1,className:la({width:"w-64 flex-shrink-0 flex-grow-0",isFirst:!0}),children:t(Qn,{"aria-label":n({message:"Select all"}),inputTestId:"select-all-checkbox",isIndeterminate:d,checked:c,onChange:()=>{s(c?[]:a.map(p=>p.id))}})})}function lu({className:e,columns:n,hideHeaderRow:a,data:r,selectedRows:s,defaultSelectedRows:o,onSelectionChange:l,sortDescriptor:c,onSortChange:d,enableSelection:p=!0,selectionStyle:m="checkbox",ariaLabelledBy:b,onRowContextMenu:g,onAction:v,renderRowAs:y,tableBody:w,meta:x,...k}){const[C,L]=We(s,o||[],l),[N,_]=We(c,void 0,d),V=f.exports.useCallback(ne=>{const Ce=[...C];if(!Ce.includes(ne.id))Ce.push(ne.id);else{const _e=Ce.indexOf(ne.id);Ce.splice(_e,1)}L(Ce)},[C,L]),I=f.exports.useCallback((ne,Ce)=>{let _e=[];ne&&(_e=Ce?[...C==null?void 0:C.filter(U=>U!==ne.id),ne.id]:[ne.id]),L(_e)},[C,L]),M=f.exports.useMemo(()=>({selectedRows:C,onSelectionChange:L,enableSelection:p,selectionStyle:m,data:r,columns:n,sortDescriptor:N,onSortChange:_,toggleRow:V,selectRow:I,onAction:v,onRowContextMenu:g,meta:x}),[n,r,p,m,v,g,L,_,C,N,V,I,x]),P=Xd({cellCount:p?n.length+1:n.length,rowCount:r.length+1}),te=a?null:t("thead",{children:u("tr",{"aria-rowindex":1,className:Vo({isHeader:!0}),children:[t(iu,{}),n.map((ne,Ce)=>t(ou,{index:Ce},ne.key))]})}),ke=y;return w?w=f.exports.cloneElement(w,{renderRowAs:ke}):w=t(cu,{renderRowAs:ke}),t(kt.Provider,{value:M,children:u("table",{...k,"aria-multiselectable":p?!0:void 0,"aria-labelledby":b,className:D(e,"select-none isolate outline-none text-sm w-full max-w-full align-top"),...P,children:[te,w]})})}function cu({renderRowAs:e}){const{data:n}=f.exports.useContext(kt);return t("tbody",{children:n.map((a,r)=>t(su,{item:a,index:r,renderAs:e},a.id))})}const du=15,uu=[{key:10},{key:15},{key:20},{key:50},{key:100}];function mu({query:e}){var c;const n=Ie(),a=Ml(),{params:r,setParams:s}=xn(),o=(c=e.data)==null?void 0:c.pagination;if(!o)return null;const l=t(Ps,{"data-testid":"paginate-per-page",minWidth:"min-w-auto",selectionMode:"single",disabled:e.isLoading,labelPosition:"side",size:"xs",label:t(i,{message:"Items per page"}),selectedValue:r.perPage||du,onSelectionChange:d=>{s({...r,perPage:d})},children:uu.map(d=>t(A,{value:d.key,children:d.key},d.key))});return u("div",{className:"flex items-center justify-end gap-20 px-20 h-54 select-none",children:[!n&&l,o.from&&o.to&&t("div",{className:"text-sm","data-testid":"pagination-info","data-total":o.total,children:t(i,{message:":from - :to of :total",values:{from:o.from,to:o.to,total:a.format(o.total)}})}),u("div",{className:"text-muted",children:[t(R,{"data-testid":"paginate-prev",disabled:e.isLoading||!o.prev_page,onClick:()=>{s({...r,page:o.prev_page})},children:t(kn,{})}),t(R,{"data-testid":"paginate-next",disabled:e.isLoading||!o.next_page,onClick:()=>{s({...r,page:o.next_page})},children:t(Vt,{})})]})]})}const Oo=O(t("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"SearchOutlined"),Wr=O(t("path",{d:"M7 6h10l-5.01 6.3L7 6zm-2.75-.39C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAltOutlined");class ee{constructor(n){be(this,"defaultValue");be(this,"defaultOperator");be(this,"key");be(this,"label");be(this,"description");be(this,"type");be(this,"inputType");be(this,"options");be(this,"operators");be(this,"model");this.defaultValue=n.defaultValue!==void 0?n.defaultValue:"",this.key=n.key,this.label=n.label,this.description=n.description,this.defaultOperator=n.defaultOperator||Se.eq,this.type=n.type||B.Select,this.inputType=n.inputType,this.options=n.options||[],this.operators=n.operators||[],this.model=n.model}}var B=(e=>(e.Select="select",e.DatePicker="datePicker",e.SelectModel="selectModel",e.Input="input",e.BooleanToggle="booleanToggle",e))(B||{}),Se=(e=>(e.eq="=",e.ne="!=",e.gt=">",e.gte=">=",e.lt="<",e.lte="<=",e.has="has",e.doesntHave="doesntHave",e.between="between",e))(Se||{});const Tn=["=","!=",">",">=","<","<="],Bo=ue.forwardRef(({variant:e="default",mode:n="single",children:a,className:r,...s},o)=>{const[l,c]=We(s.expandedValues,s.defaultExpandedValues||[],s.onExpandedChange);return t("div",{className:D(e==="outline"&&"space-y-10",r),ref:o,role:"presentation",children:t(Oe,{children:t(Hn,{children:ue.Children.map(a,(d,p)=>f.exports.isValidElement(d)?f.exports.cloneElement(d,{key:d.key||p,value:d.props.value||p,mode:n,variant:e,expandedValues:l,setExpandedValues:c}):null)})})})});function $t({children:e,label:n,disabled:a,bodyClassName:r,startIcon:s,description:o,endAppend:l,chevronPosition:c="right",dataTestId:d,...p}){const{expandedValues:m,setExpandedValues:b,variant:g,value:v,mode:y}=p,w=f.exports.useRef(null),x=!a&&m.includes(v),k=ft(),C=f.exports.useId(),L=`${C}-button`,N=`${C}-panel`,_=P=>{switch(P.key){case"ArrowDown":k.focusNext();break;case"ArrowUp":k.focusPrevious();break;case"Home":k.focusFirst();break;case"End":k.focusLast();break}},V={open:{height:"auto",visibility:"visible",transitionEnd:{overflow:"auto"}},closed:{height:0,overflow:"hidden",transitionEnd:{visibility:"hidden"}}},I=()=>{const P=m.indexOf(v);if(P>-1){const te=[...m];te.splice(P,1),b(te)}else b(y==="single"?[v]:[...m,v])},M=t("div",{className:D(g==="minimal"&&""),children:t(zt,{"aria-hidden":"true",size:"md",className:D(a?"text-disabled":"text-muted",x&&"rotate-180 transition-transform")})});return u("div",{className:D(g==="default"&&"border-b",g==="outline"&&"border rounded",a&&"text-disabled"),children:[u("h3",{className:D("flex items-center text-sm justify-between w-full",a&&"pointer-events-none",x&&g!=="minimal"&&"border-b",g==="outline"?x?"rounded-t":"rounded":void 0),children:[u("button",{"data-testid":d,disabled:a,"aria-expanded":x,id:L,"aria-controls":N,type:"button",ref:w,onKeyDown:_,onClick:()=>{a||I()},className:"flex items-center text-left gap-10 flex-auto pl-14 pr-10 py-10 hover:bg-hover outline-none focus-visible:bg-primary/focus",children:[c==="left"&&M,s&&f.exports.cloneElement(s,{size:"md",className:D(s.props.className,a?"text-disabled":"text-muted")}),u("div",{className:"flex-auto overflow-hidden overflow-ellipsis",children:[t("div",{"data-testid":"accordion-label",children:n}),o&&t("div",{className:"text-muted text-xs",children:o})]}),c==="right"&&M]}),l&&t("div",{className:"flex-shrink-0 text-sm text-muted px-4",children:l})]}),t(ye.div,{"aria-labelledby":C,role:"region",variants:V,transition:{type:"tween",duration:.2},initial:!1,animate:x?"open":"closed",children:t("div",{className:D("p-16",r),children:e})})]})}function Uo({filter:e}){return t(ze,{size:"sm",autoFocus:!0,name:`${e.key}.value`,selectionMode:"single",children:e.options.map(n=>t(A,{value:n.key,children:t(i,{...n.label})},n.key))})}function pu(e){var g,v;const{granularity:n,closeDialogOnSelection:a,...r}=e,s=Qs(e),o=f.exports.useRef(null),c=Ie()&&n!=="day",d=t(T,{offset:8,placement:"bottom-start",isOpen:s.calendarIsOpen,onOpenChange:s.setCalendarIsOpen,type:"popover",triggerRef:o,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:t(eo,{state:s})}),p={onClick:y=>{y.stopPropagation(),y.preventDefault(),hu(y)?s.setCalendarIsOpen(!1):s.setCalendarIsOpen(!0)}},m=s.selectedValue,b=s.setSelectedValue;return u(f.exports.Fragment,{children:[u(er,{ref:o,wrapperProps:p,endAdornment:c?void 0:t(Za,{}),...r,children:[t(cn,{isPlaceholder:(g=s.isPlaceholder)==null?void 0:g.start,state:s,segmentProps:p,value:m.start,onChange:y=>{b({...m,start:y})}}),t(Zs,{className:"block flex-shrink-0 text-muted",size:"md"}),t(cn,{isPlaceholder:(v=s.isPlaceholder)==null?void 0:v.end,state:s,segmentProps:p,value:m.end,onChange:y=>{b({...m,end:y})}})]}),d]})}function hu(e){return["hour","minute","dayPeriod"].includes(e.currentTarget.ariaLabel||"")}function fu(e){const{field:{onChange:n,onBlur:a,value:r,ref:s},fieldState:{invalid:o,error:l}}=hn({name:e.name}),c={onChange:d=>{n(d?Ho(d):null)},onBlur:a,value:gu(r),invalid:o,errorMessage:l==null?void 0:l.message,inputRef:s};return t(pu,{...lt(c,e)})}function gu(e){const{start:n,end:a,preset:r}=e||{},s={preset:r};return n&&(s.start=typeof n=="string"?Rt(n):n),a&&(s.end=typeof a=="string"?Rt(a):a),s}function Ho({start:e,end:n,preset:a}={}){const r={preset:a};return e&&(r.start=e.toAbsoluteString()),n&&(r.end=n.toAbsoluteString()),r}function Wo({filter:e}){return t(fu,{size:"sm",name:`${e.key}.value`,autoFocus:!0,granularity:"day",closeDialogOnSelection:!0})}const Go=e=>`normalized-models/${e}`;function bu(e,n,a){return Ee([Go(e),n],()=>vu(e,n),{keepPreviousData:!0,...a})}async function vu(e,n){return F.get(Go(e),{params:n}).then(a=>a.data)}const qo=(e,n)=>`normalized-models/${e}/${n}`;function Ko(e,n){return Ee([qo(e,n)],()=>yu(e,n),{enabled:e!=null&&n!=null})}async function yu(e,n){return F.get(qo(e,n),{}).then(a=>a.data)}function ku({modelType:e,label:n,className:a,value:r,defaultValue:s="",onChange:o,description:l,errorMessage:c,invalid:d,openMenuOnFocus:p,autoFocus:m}){var L;const b=f.exports.useRef(null),[g,v]=f.exports.useState(""),[y,w]=We(r,s,o),x=bu(e,{query:g}),{trans:k}=H(),C=At({size:"md"});return y?u("div",{className:a,children:[t("div",{className:C.label,children:n}),t("div",{className:D("p-10 border rounded mb-20",d&&"border-danger"),children:t(Oe,{initial:!1,mode:"wait",children:t(xu,{modelType:e,modelId:y,onEditClick:()=>{w(""),v(""),requestAnimationFrame(()=>{var N;(N=b.current)==null||N.focus()})}})})}),l&&!c&&t("div",{className:C.description,children:l}),c&&t("div",{className:C.error,children:c})]}):t(_l,{className:a,invalid:d,errorMessage:c,description:l,isAsync:!0,placeholder:k(h("Find item..")),label:n,isLoading:x.isFetching,items:(L=x.data)==null?void 0:L.results,inputValue:g,onInputValueChange:v,clearInputOnItemSelection:!0,selectionMode:"single",selectedValue:y,onSelectionChange:w,ref:b,openMenuOnFocus:p,autoFocus:m,children:N=>t(A,{value:N.id,description:N.description,startIcon:t(yn,{src:N.image}),children:N.name},N.id)})}function xu({modelType:e,modelId:n,onEditClick:a}){const{data:r,isLoading:s}=Ko(e,n);return s||!(r!=null&&r.model)?t(wu,{},"skeleton"):u(ye.div,{className:"flex items-center gap-10",...Ve,children:[t(yn,{src:r.model.image}),u("div",{children:[t("div",{children:r.model.name}),t("div",{className:"text-muted text-xs",children:r.model.description})]}),t(xe,{label:t(i,{message:"Change item"}),children:t(R,{className:"ml-auto text-muted",size:"sm",onClick:a,children:t(je,{})})})]},"preview")}function wu(){return u(ye.div,{className:"flex items-center gap-10",...Ve,children:[t(De,{variant:"rect",size:"w-32 h-32"}),u("div",{className:"flex-auto max-h-[36px]",children:[t(De,{className:"text-xs"}),t(De,{className:"text-xs max-h-8"})]}),t(De,{variant:"icon",size:"w-24 h-24"})]})}function Cu({name:e,...n}){const{field:{onChange:a,value:r=""},fieldState:{invalid:s,error:o}}=hn({name:e});return t(ku,{value:r,onChange:a,invalid:s,errorMessage:o==null?void 0:o.message,...n})}function jo({filter:e}){return t(Cu,{name:`${e.key}.value`,className:"mb-20",modelType:e.model,openMenuOnFocus:!0,autoFocus:!0})}const Yo={"=":h("is"),"!=":h("is not"),">":h("is greater than"),">=":h("is greater than or equal to"),"<":h("is less than"),"<=":h("is less than or equal to"),has:h("Include"),doesntHave:h("Do not include"),between:h("Is between")};function Qo({filter:e}){return u(f.exports.Fragment,{children:[t(ze,{autoFocus:!0,selectionMode:"single",name:`${e.key}.operator`,className:"mb-14",size:"sm",required:!0,children:e.operators.map(n=>t(A,{value:n,children:t(i,{...Yo[n]})},n))}),t(z,{size:"sm",name:`${e.key}.value`,type:e.inputType,required:!0})]})}function Su({filter:e}){return null}function Nu({filters:e}){const{decodedFilters:n}=oa(e),{formId:a}=K(),[r,s]=f.exports.useState(()=>n.map(c=>c.key));return u(G,{className:"min-w-[300px]",maxWidth:"max-w-400",size:"auto",children:[t(Q,{padding:"px-14 py-10",leftAdornment:t(S,{size:"xs",variant:"outline",className:"mr-auto",onClick:()=>{s([])},"data-testid":"clear-filters-button",children:t(i,{message:"Clear"})}),rightAdornment:t(S,{size:"xs",variant:"flat",color:"primary",className:"ml-auto",type:"submit",form:a,"data-testid":"apply-filters-button",children:t(i,{message:"Apply"})}),children:t(i,{message:"Filter"})}),t(j,{padding:"p-0",children:t(Iu,{filters:e,expandedFilters:r,setExpandedFilters:s})})]})}function Iu({filters:e,expandedFilters:n,setExpandedFilters:a}){const{decodedFilters:r,replaceAll:s}=oa(e),o={};e.forEach(p=>{const m=r.find(b=>b.key===p.key);o[p.key]=(m==null?void 0:m.value)!==void 0?{value:m.value,operator:m.operator}:{value:p.defaultValue,operator:p.defaultOperator}});const l=J({defaultValues:o}),{formId:c,close:d}=K();return t(he,{form:l,id:c,onSubmit:p=>{const m=Object.entries(p).filter(([b,g])=>n.includes(b)&&g!==void 0).map(([b,g])=>({key:b,...g}));s(m),d()},children:t(Bo,{mode:"multiple",expandedValues:n,onExpandedChange:a,children:e.map(p=>u($t,{dataTestId:`filter-${p.key}-toggle`,startIcon:t(Qn,{checked:n.includes(p.key)}),value:p.key,label:t(i,{...p.label}),children:[p.description&&t("div",{className:D("text-muted text-xs",p.type!==B.BooleanToggle&&"mb-14"),children:t(i,{...p.description})}),t(Lu,{filter:p})]},p.key))})})}function Lu({filter:e}){switch(e.type){case B.Select:return t(Uo,{filter:e});case B.DatePicker:return t(Wo,{filter:e});case B.SelectModel:return t(jo,{filter:e});case B.Input:return t(Qo,{filter:e});case B.BooleanToggle:return t(Su,{filter:e})}}function Du({filters:e}){const n=Ie();return u(T,{type:"popover",children:[n?t(R,{color:"primary",size:"sm",variant:"outline",radius:"rounded",className:"flex-shrink-0","data-testid":"add-filter-button",children:t(Wr,{})}):t(S,{variant:"outline",color:"primary",startIcon:t(Wr,{}),size:"sm",className:"text-muted","data-testid":"add-filter-button",children:t(i,{message:"Filter"})}),t(Nu,{filters:e})]})}function Pu({actions:e,filters:n}){const{trans:a}=H(),{params:r,setParams:s,searchPlaceholder:o}=xn();return u(Xo,{children:[t(Xn,{inputTestId:"datatable-search",className:"flex-auto max-w-440 mr-auto",inputWrapperClassName:"mr-24 md:mr-0",placeholder:a(o),startAdornment:t(Oo,{}),value:r.query||"",onChange:l=>{s({...r,query:l.target.value})}}),n&&t(Du,{filters:n}),e]})}function $u({actions:e}){const{selectedRows:n}=xn();return u(Xo,{"data-testid":"datatable-selected-header",children:[t("div",{className:"mr-auto",children:t(i,{message:"[one 1 item|other :count items] selected",values:{count:n.length}})}),e]})}function Xo({children:e,...n}){return t("div",{className:"mb-24 flex items-center gap-8 md:gap-12 text-muted relative h-42",...n,children:e})}const Zo=f.exports.forwardRef((e,n)=>{const{isInactive:a,filter:r,...s}=e;return a?t(Mu,{filter:r,...s,ref:n}):t(_u,{filter:r,...s,ref:n})}),Mu=f.exports.forwardRef(({filter:e,...n},a)=>t(S,{variant:"outline",size:"xs",color:"paper",radius:"rounded-md",border:"border",ref:a,endIcon:t(zt,{}),...n,children:t(i,{...e.label})})),_u=f.exports.forwardRef(({filter:e,children:n,...a},r)=>{const s=e.type===B.BooleanToggle;return u(S,{variant:"outline",size:"xs",color:"primary",radius:"rounded-r-md",border:"border-y border-r",endIcon:!s&&t(zt,{}),ref:r,...a,children:[t("span",{className:D(!s&&"border-r border-r-primary-light mr-8 pr-8"),children:t(i,{...e.label})}),n]})});function ca(e){const{onValueChange:n,isInactive:a,filter:r,label:s}=e;return u(T,{offset:10,type:"popover",onClose:o=>{o!==void 0&&n(o)},children:[t(Zo,{isInactive:a,filter:r,children:s}),t(Ru,{...e})]})}function Ru({filter:e,panel:n,value:a,operator:r}){const s=J({defaultValues:{[e.key]:{value:a,operator:r}}}),{close:o,formId:l}=K();return u(G,{size:"xs",children:[t(Q,{children:t(i,{...e.label})}),t(j,{padding:"px-14 pt-14 pb-4",children:u(he,{form:s,id:l,onSubmit:c=>{o(c[e.key])},children:[e.description&&t("div",{className:"text-muted text-xs mb-14",children:t(i,{...e.description})}),n]})}),t(Z,{children:t(S,{form:l,type:"submit",variant:"flat",color:"primary",size:"xs",children:t(i,{message:"Apply"})})})]})}function Au(e){switch(e.filter.type){case B.DatePicker:return t(zu,{...e});case B.BooleanToggle:return t(Eu,{...e});case B.Select:return t(Tu,{...e});case B.Input:return t(Fu,{...e});case B.SelectModel:return t(Vu,{...e})}}function zu(e){const{value:n,filter:a}=e;let r;return n.preset!==void 0?r=t(i,{...ra[n.preset].label}):r=t(Ja,{start:new Date(n.start),end:new Date(n.end),options:{dateStyle:"medium"}}),t(ca,{...e,label:r,panel:t(Wo,{filter:a})})}function Eu({filter:e,isInactive:n,onValueChange:a}){return t(Zo,{onClick:()=>{a({value:!0})},filter:e,isInactive:n})}function Tu(e){const{filter:n,value:a}=e,r=n.options.find(s=>s.key===a);return t(ca,{...e,label:r?t(i,{...r.label}):null,panel:t(Uo,{filter:n})})}function Fu(e){const{filter:n,value:a,operator:r}=e,s=r?t(i,{...Yo[r]}):null;return t(ca,{...e,label:u(f.exports.Fragment,{children:[s," ",a]}),panel:t(Qo,{filter:n})})}function Vu(e){const{value:n,filter:a}=e,{isLoading:r,data:s}=Ko(a.model,n),o=u(f.exports.Fragment,{children:[t(De,{variant:"avatar",size:"w-18 h-18 mr-6"}),t(De,{variant:"rect",size:"w-50"})]}),l=u(f.exports.Fragment,{children:[t(yn,{size:"xs",src:s==null?void 0:s.model.image,className:"mr-6"}),s==null?void 0:s.model.name]});return t(ca,{...e,label:r||!s?o:l,panel:t(jo,{filter:a})})}function Ou({filters:e,pinnedFilters:n,className:a}){const{decodedFilters:r,remove:s,replaceAll:o}=oa(e,n);return r.length?t("div",{className:D("flex items-center gap-6 overflow-x-auto",a),children:r.map((l,c)=>{const d=e.find(m=>m.key===l.key),p=m=>{const b=[...r];b.splice(c,1,{key:d.key,value:m.value,isInactive:!1,operator:m.operator||d.defaultOperator}),o(b)};return u("div",{children:[!l.isInactive&&t(R,{variant:"outline",color:"primary",size:"xs",radius:"rounded-l-md",onClick:()=>{s(l.key)},children:t(qe,{})}),t(Au,{filter:d,isInactive:l.isInactive,value:l.valueKey!=null?l.valueKey:l.value,operator:l.operator,onValueChange:p})]},l.key)})}):null}function Jo({filters:e,columns:n,searchPlaceholder:a,queryParams:r,endpoint:s,actions:o,selectedActions:l,emptyStateMessage:c,tableDomProps:d,onRowAction:p,enableSelection:m=!0,children:b}){var _;const{trans:g}=H(),{encodedFilters:v}=oa(e),[y,w]=f.exports.useState({perPage:15}),[x,k]=f.exports.useState([]),C=Fo(s,{...y,...r,filters:v},{onSuccess:()=>{k([])}}),L=!!(y.query||y.filters||v),N=(_=C.data)==null?void 0:_.pagination;return a||(a=h("Type to search...")),u(ia.Provider,{value:{selectedRows:x,setSelectedRows:k,endpoint:s,searchPlaceholder:a,params:y,setParams:w,query:C},children:[b,t(Oe,{initial:!1,mode:"wait",children:x.length?t($u,{actions:l},"selected"):t(Pu,{actions:o,filters:e},"default")}),e&&t(Ou,{className:"mb-14",filters:e}),u("div",{className:"relative border rounded",children:[C.isLoading&&t(Rl,{isIndeterminate:!0,className:"absolute top-0 left-0 w-full z-10","aria-label":g({message:"Loading"}),size:"xs"}),t("div",{className:"relative overflow-x-auto md:overflow-hidden",children:t(lu,{...d,"data-loaded":!C.isLoading,columns:n,data:(N==null?void 0:N.data)||[],sortDescriptor:y,onSortChange:V=>{w({...y,...V})},selectedRows:x,enableSelection:m,onSelectionChange:k,onAction:p})}),(C.isFetched||C.isPreviousData)&&!(N!=null&&N.data.length)?t("div",{className:"pt-50","data-testid":"empty-state-message",children:f.exports.cloneElement(c,{isFiltering:L})}):void 0,t(mu,{query:C})]})]})}function xt({title:e,headerContent:n,headerItemsAlign:a="items-end",...r}){const s=f.exports.useId();return u("div",{className:"p-12 md:p-24",children:[e&&u("div",{className:D("mb-16",n&&`flex ${a} gap-4`),children:[t(Ka,{children:e}),t("h1",{className:"text-3xl font-light",id:s,children:e}),n]}),t(Jo,{...r,tableDomProps:{"aria-labelledby":e?s:void 0}})]})}const ct=ue.forwardRef(({children:e,to:n,elementType:a,onClick:r},s)=>Ie()?t(R,{ref:s,variant:"flat",color:"primary",radius:"rounded",className:"flex-shrink-0",size:"sm",to:n,elementType:a,onClick:r,children:t(ln,{})}):t(S,{ref:s,startIcon:t(ln,{}),variant:"flat",color:"primary",size:"sm",to:n,elementType:a,onClick:r,children:e}));function Bu(e,n){return F.delete(`${e}/${n.join(",")}`).then(a=>a.data)}function Uu(){const{endpoint:e,selectedRows:n,setSelectedRows:a}=xn();return q(()=>Bu(e,n),{onSuccess:()=>{Y(h("Deleted [one 1 record|other :count records]",{values:{count:n.length}})),a([]),W.invalidateQueries(X(e))},onError:r=>$e(r,h("Could not delete records"))})}function wt(){const e=Uu(),{selectedRows:n}=xn();return u(T,{type:"modal",onClose:a=>{a&&e.mutate()},children:[t(S,{variant:"flat",color:"danger",className:"ml-auto",disabled:e.isLoading,"data-testid":"delete-rows-button",children:t(i,{message:"Delete"})}),t(gt,{title:t(i,{message:"Delete [one 1 item|other :count items]?",values:{count:n.length}}),body:t(i,{message:"This will permanently remove the items and cannot be undone."}),confirm:t(i,{message:"Delete"}),isDanger:!0})]})}function dt({isFiltering:e,title:n,filteringTitle:a,image:r}){const s=Ie();return t(Zn,{size:s?"sm":"md",image:t(fn,{src:r}),title:e&&a?a:n,description:e&&a?t(i,{message:"Try another search query or different filters"}):void 0})}class Fn extends ee{constructor(a){a.defaultValue||(a.defaultValue=Ho(ra[3].getRangeValue()));super(a);be(this,"type",B.DatePicker);be(this,"defaultOperator",Se.between)}}class Ct extends Fn{constructor(){super(...arguments);be(this,"key","created_at");be(this,"label",h("Date created"))}}class St extends Fn{constructor(){super(...arguments);be(this,"key","updated_at");be(this,"label",h("Last updated"))}}const Nt="user",Aa=[new ee({type:B.Select,key:"type",label:h("Type"),description:h("Type of the link"),defaultValue:"01",defaultOperator:Se.eq,options:[{key:"01",label:h("Direct"),value:"direct"},{key:"02",label:h("Overlay"),value:"overlay"},{key:"03",label:h("Frame"),value:"frame"},{key:"04",label:h("Custom page"),value:"link_page"}]}),new ee({type:B.Select,key:"active",label:h("Status"),description:h("Whether link is disabled or not"),defaultValue:"01",defaultOperator:Se.eq,options:[{key:"01",label:h("Enabled"),value:!0},{key:"02",label:h("Disabled"),value:!1}]}),new ee({type:B.Select,key:"password",label:h("Password"),description:h("Whether link is password protected"),defaultValue:"01",defaultOperator:Se.eq,options:[{key:"01",label:h("Has a password"),value:{value:null,operator:Se.ne}},{key:"02",label:h("Does not have a password"),value:{value:null,operator:Se.eq}}]}),new ee({type:B.Input,inputType:"number",key:"clicks_count",label:h("Click count"),description:h("Total number of clicks for link"),defaultValue:1,defaultOperator:Se.gte,operators:Tn}),new Fn({key:"clicked_at",label:h("Clicked at"),description:h("Date link was last clicked")}),new Fn({key:"expires_at",label:h("Expires at"),description:h("Date link will expire")}),new Ct({description:h("Date link was created")}),new St({description:h("Date link was last updated")}),new ee({type:B.SelectModel,model:Nt,key:"user_id",label:h("User"),description:h("User link was created by")})],ei=O(t("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"}),"SettingsOutlined"),ti=["countries","domains","pages","overlays","pixels","groups"];function Bt(){const{user:e}=oe();return qn(ti,{userId:e==null?void 0:e.id,pageType:"link_page"})}function da(){var e;Al(ti,{userId:(e=zn().user)==null?void 0:e.id,pageType:"link_page"})}function Hu(){var o,l,c;const{branding:{site_name:e}}=fe(),{data:n}=Bt(),{watch:a,setValue:r}=Jn(),s=a("type");return u("div",{className:"flex items-center gap-12",children:[u(ze,{className:"mb-24 flex-auto",name:"type",label:t(i,{message:"Type"}),selectionMode:"single",onSelectionChange:()=>{r("type_id",null)},children:[t(A,{value:"direct",description:t(i,{message:"Redirect user to url instantly"}),children:t(i,{message:"Direct"})}),t(A,{value:"frame",description:t(i,{message:" Show url inside iframe with :siteName navigation bar.",values:{siteName:e}}),children:t(i,{message:"Frame"})}),t(A,{value:"splash",description:t(i,{message:"Show splash page with optional ads and redirect user to url after a delay."}),children:t(i,{message:"Splash"})}),(o=n==null?void 0:n.pages)!=null&&o.length?t(A,{value:"page",description:t(i,{message:"Show specified link page with :siteName navigation bar and button to open long url.",values:{siteName:e}}),children:t(i,{message:"Link page"})}):null,n!=null&&n.overlays.length?t(A,{value:"overlay",description:t(i,{message:"Redirect user instantly and show specified overlay over the link."}),children:t(i,{message:"Overlay"})}):null]}),s==="page"&&t(ze,{label:t(i,{message:"Link page"}),name:"type_id",selectionMode:"single",className:"mb-24 flex-auto",required:!0,children:(l=n==null?void 0:n.pages)==null?void 0:l.map(d=>t(A,{value:d.id,children:d.title},d.id))}),s==="overlay"&&t(ze,{label:t(i,{message:"Link overlay"}),name:"type_id",selectionMode:"single",className:"mb-24 flex-auto",required:!0,children:(c=n==null?void 0:n.overlays)==null?void 0:c.map(d=>t(A,{value:d.id,children:d.name},d.id))})]})}const or=ue.forwardRef((e,n)=>{const{children:a,size:r="sm",description:s,className:o,invalid:l,autoFocus:c,errorMessage:d,...p}=e,m=Ba(n);zl({autoFocus:c},m);const b=Wu(r),g=At(e),v=f.exports.useId();return u("div",{className:D(o,"isolate"),children:[u("label",{className:"flex items-center select-none",children:[t("input",{...p,type:"checkbox",role:"switch","aria-invalid":l||void 0,"aria-describedby":s?v:void 0,ref:m,"aria-checked":p.checked,className:D(b,!l&&"checked:bg-primary dark:checked:bg-primary-dark checked:border-primary dark:checked:border-primary-dark",l&&"checked:bg-danger checked:border-danger","outline-none cursor-pointer bg-chip border-chip border checked:bg-primary checked:border-primary p-0 overflow-hidden relative rounded-3xl appearance-none transition-colors flex-shrink-0 flex items-center outline-none","before:z-10 before:border before:rounded-3xl before:block before:bg-white before:transition-transform before:translate-x-2","checked:before:border-white","focus-visible:ring",e.disabled&&"opacity-80 cursor-not-allowed")}),a&&t("span",{className:D(g.size.font,"ml-12",l&&"text-danger",e.disabled&&"text-disabled"),children:a})]}),s&&!d&&t("div",{id:v,className:g.description,children:s}),d&&t("div",{id:v,className:g.error,children:d})]})});function ht(e){const{field:{onChange:n,onBlur:a,value:r=!1,ref:s},fieldState:{invalid:o,error:l}}=hn({name:e.name}),c={onChange:n,onBlur:a,checked:r,invalid:o,errorMessage:l==null?void 0:l.message,name:e.name};return t(or,{ref:s,...lt(e,c)})}function Wu(e){switch(e){case"xl":return"w-68 h-36 before:w-28 before:h-28 checked:before:translate-x-36";case"lg":return"w-56 h-30 before:w-22 before:h-22 checked:before:translate-x-30";case"md":return"w-46 h-24 before:w-18 before:h-18 checked:before:translate-x-24";case"xs":return"w-30 h-16 before:w-12 before:h-12 checked:before:translate-x-16";default:return"w-38 h-20 before:w-14 before:h-14 checked:before:translate-x-20"}}const ir=O(t("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOutlined");function Gu(e){const n=Ft(),[a,r]=f.exports.useState(!e.value&&!e.defaultValue),s=e.onChange,[o,l]=We(e.value||n,e.defaultValue||n,s),{min:c,max:d,granularity:p,timezone:m,calendarIsOpen:b,setCalendarIsOpen:g,closeDialogOnSelection:v}=js(o,e),y=f.exports.useCallback(()=>{r(!0),l(n),s==null||s(null),g(!1)},[n,l,s,g]),[w,x]=f.exports.useState(()=>[sn(o)]),k=f.exports.useCallback(N=>{c&&N.compare(c)<0?N=c:d&&N.compare(d)>0&&(N=d);const _=o?o.set(N):Qe(N,m);l(_),x([sn(_)]),r(!1)},[l,c,d,o,m]),C=f.exports.useCallback(N=>!a&&Jt(o,N),[o,a]),L=f.exports.useCallback(N=>({onClick:()=>{k==null||k(N),v&&(g==null||g(!1))}}),[k,g,v]);return{selectedValue:o,setSelectedValue:l,calendarIsOpen:b,setCalendarIsOpen:g,dayIsActive:C,dayIsHighlighted:()=>!1,dayIsRangeStart:()=>!1,dayIsRangeEnd:()=>!1,getCellProps:L,calendarDates:w,setCalendarDates:x,isPlaceholder:a,clear:y,setIsPlaceholder:r,min:c,max:d,granularity:p,timezone:m,closeDialogOnSelection:v}}function qu({showCalendarFooter:e,...n}){const a=Gu(n),r=f.exports.useRef(null),s=Ft(),o=e&&t(Z,{padding:"px-14 pb-14",startAction:t(S,{disabled:a.isPlaceholder,variant:"text",color:"primary",onClick:()=>{a.clear()},children:t(i,{message:"Clear"})}),children:t(S,{variant:"text",color:"primary",onClick:()=>{a.setSelectedValue(s),a.setCalendarIsOpen(!1)},children:t(i,{message:"Today"})})}),l=t(T,{offset:8,placement:"bottom-start",isOpen:a.calendarIsOpen,onOpenChange:a.setCalendarIsOpen,type:"popover",triggerRef:r,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:u(G,{size:"auto",children:[t(j,{className:"flex items-start gap-40",padding:e?"px-24 pt-20 pb-10":null,children:t(Xs,{state:a,visibleMonths:1})}),o]})}),c={onClick:d=>{d.stopPropagation(),d.preventDefault(),Ku(d)?a.setCalendarIsOpen(!1):a.setCalendarIsOpen(!0)}};return u(f.exports.Fragment,{children:[t(er,{ref:r,wrapperProps:c,endAdornment:t(Za,{className:D(n.disabled&&"text-disabled")}),...n,children:t(cn,{segmentProps:c,state:a,value:a.selectedValue,onChange:a.setSelectedValue,isPlaceholder:a.isPlaceholder})}),l]})}function dn(e){const{min:n,max:a}=e,{trans:r}=H(),{format:s}=pt(),{field:{onChange:o,onBlur:l,value:c=null,ref:d},fieldState:{invalid:p,error:m}}=hn({name:e.name,rules:{validate:v=>{if(!v)return;const y=Rt(v);if(n&&y.compare(n)<0)return r({message:"Enter a date after :date",values:{date:s(v)}});if(a&&y.compare(a)>0)return r({message:"Enter a date before :date",values:{date:s(v)}})}}}),b=c?Rt(c):null,g={onChange:v=>{o(v&&v.toAbsoluteString())},onBlur:l,value:b,invalid:p,errorMessage:m==null?void 0:m.message,inputRef:d};return t(qu,{...lt(g,e)})}function Ku(e){return["hour","minute","dayPeriod"].includes(e.currentTarget.ariaLabel||"")}const ju=""+new URL("upgrade.1a8523e3.svg",import.meta.url).href;function ni({message:e,messageSuffix:n}){const{close:a}=K();return u(G,{size:"sm",children:[t(Q,{children:t(i,{message:"Join the PROs"})}),u(j,{children:[t("div",{className:"text-center mb-20",children:t(fn,{src:ju,className:"h-100 mx-auto"})}),u("div",{children:[e," ",n]})]}),u(Z,{children:[t(S,{variant:"text",size:"xs",onClick:()=>{a()},children:t(i,{message:"Maybe later"})}),t(S,{variant:"flat",size:"xs",color:"primary",elementType:ge,to:"/pricing",target:"_blank",onClick:()=>{a()},children:t(i,{message:"Find out more"})})]})]})}function Yu({message:e}){return t(ni,{message:e,messageSuffix:t(i,{message:"Upgrade to unlock this feature and many more."})})}function lr({message:e,className:n}){const{billing:a}=fe();return a.enable?u(T,{type:"popover",children:[t(S,{variant:"flat",color:"primary",size:"2xs",startIcon:t(ir,{}),className:n,children:t(i,{message:"Upgrade"})}),t(Yu,{message:e})]}):t(Qu,{})}function Qu(){return t(xe,{label:t(i,{message:"You don't have permissions to access this feature."}),children:t(ir,{size:"sm",className:"text-muted"})})}function wn({title:e,description:n,children:a,upgradeMessage:r}){return u("div",{className:"border-t pt-24",children:[u("div",{className:D("font-semibold",r&&"flex items-center gap-10 mb-8"),children:[t("div",{className:"text-sm",children:e}),r&&t(lr,{message:r})]}),t("div",{className:"text-muted text-sm",children:n}),a]})}function It(e){const{data:n}=na(),{hasPermission:a}=oe();return{disabled:!(n!=null&&n.usage.links[e])&&!a("admin")}}function Xu({linkName:e}){const{disabled:n}=It("password");return u(f.exports.Fragment,{children:[t(z,{type:"password",name:"password",label:t(i,{message:"Password"}),autoComplete:"new-password",className:"mb-24",labelSuffix:n&&t(lr,{message:t(i,{message:"Your current plan doesn't include link password protection."})}),disabled:n}),t(Zu,{linkName:e}),t(Ju,{linkName:e})]})}function Zu({linkName:e}){const n=Ft(),{disabled:a}=It("expiration");return t(wn,{title:t(i,{message:"Schedule"}),description:t(i,{message:"Specify a date when :name should become active and when it should expire. Both activation and expiration dates are optional.",values:{name:e}}),upgradeMessage:a&&t(i,{message:"Your current plan doesn't include :name scheduling.",values:{name:e}}),children:u("div",{className:"block md:flex items-center gap-24 mt-24",children:[t(dn,{showCalendarFooter:!0,label:t(i,{message:"Activation date"}),min:n,name:"activates_at",className:"mb-24 flex-auto",disabled:a}),t(dn,{showCalendarFooter:!0,label:t(i,{message:"Expiration date"}),min:n,name:"expires_at",className:"mb-24 flex-auto",disabled:a})]})})}function Ju({linkName:e}){const{trans:n}=H(),{disabled:a}=It("expiration");return t(wn,{title:t(i,{message:"Expiration clicks"}),description:t(i,{message:`After :name is visited specified amount of times, it will no longer be accessible.
Optionally, after click amount is reached :name can redirect to specified url instead.`,values:{name:e}}),upgradeMessage:a&&t(i,{message:"Your current plan doesn't include expiration clicks."}),children:u("div",{className:"block md:flex items-center gap-24 mt-24",children:[t(z,{type:"number",label:t(i,{message:"Max clicks"}),name:"exp_clicks_rule.key",className:"mb-24 flex-auto",disabled:a}),t(z,{type:"url",label:t(i,{message:"Redirect URL"}),placeholder:n(h("Optional")),name:"exp_clicks_rule.value",className:"mb-24 flex-auto",disabled:a})]})})}const em=O(t("path",{d:"M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3 5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3 5 6.99h3V14h2V6.99h3L9 3z"}),"SwapVertOutlined");function tm(){return u("div",{children:[t(nm,{}),t(am,{}),t(rm,{})]})}function nm(){const{data:e}=Bt();return t(cr,{defaultKey:"us",name:"geo_rules",title:t(i,{message:"Location targeting"}),description:t(i,{message:"Redirect users to different url based on their location."}),buttonLabel:t(i,{message:"Add location"}),children:t(El,{required:!0,useOptionLabelAsInputValue:!0,items:e==null?void 0:e.countries,name:"temp",label:t(i,{message:"Country"}),className:"flex-auto mt-24",children:n=>t(A,{value:n.code,children:n.name},n.code)})})}function am(){return t(cr,{name:"device_rules",title:t(i,{message:"Device targeting"}),description:t(i,{message:"Redirect users to different url based on their device."}),buttonLabel:t(i,{message:"Add device"}),defaultKey:"desktop",children:u(ze,{required:!0,selectionMode:"single",name:"temp",label:t(i,{message:"Device"}),className:"flex-auto mt-24",children:[t(A,{value:"desktop",children:t(i,{message:"Desktop"})}),t(A,{value:"table",children:t(i,{message:"Tablet"})}),t(A,{value:"mobile",children:t(i,{message:"Mobile"})})]})})}function rm(){return t(cr,{name:"platform_rules",title:t(i,{message:"Platform targeting"}),description:t(i,{message:"Redirect users to different url based on their platform."}),defaultKey:"windows",buttonLabel:t(i,{message:"Add platform"}),children:u(ze,{name:"temp",required:!0,selectionMode:"single",label:t(i,{message:"Platform"}),className:"flex-auto mt-24",children:[t(A,{value:"windows",children:t(i,{message:"Windows"})}),t(A,{value:"osx",children:t(i,{message:"MacOs"})}),t(A,{value:"ios",children:t(i,{message:"iOS"})}),t(A,{value:"android",children:t(i,{message:"Android"})}),t(A,{value:"linux",children:t(i,{message:"Linux"})})]})})}function cr({name:e,title:n,description:a,buttonLabel:r,defaultKey:s,children:o}){const{fields:l,append:c,remove:d}=$s({name:e}),{disabled:p}=It("retargeting");return u(wn,{title:n,description:a,upgradeMessage:p&&t(i,{message:"Your current plan doesn't include link retargeting."}),children:[l.map((m,b)=>u("div",{className:"block md:flex items-end gap-14",children:[f.exports.cloneElement(o,{name:`${e}.${b}.key`,disabled:p}),t(z,{required:!0,type:"url",name:`${e}.${b}.value`,label:t(i,{message:"URL"}),className:"flex-auto mt-24",disabled:p}),t(sm,{onClick:()=>d(b)})]},m.id)),t(S,{className:"my-8",variant:"text",color:"primary",startIcon:t(ln,{}),onClick:()=>{c({key:s,value:""})},disabled:p,children:r})]})}function sm({onClick:e}){return Ie()?t("div",{className:"mt-12",children:t(S,{variant:"outline",color:"danger",size:"xs",onClick:e,children:t(i,{message:"Remove"})})}):t(R,{color:"danger",onClick:e,children:t(qe,{})})}const om=O(t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-.61.08-1.21.21-1.78L8.99 15v1c0 1.1.9 2 2 2v1.93C7.06 19.43 4 16.07 4 12zm13.89 5.4c-.26-.81-1-1.4-1.9-1.4h-1v-3c0-.55-.45-1-1-1h-6v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41C17.92 5.77 20 8.65 20 12c0 2.08-.81 3.98-2.11 5.4z"}),"PublicOutlined");function dr({children:e,...n}){const{field:{onChange:a,onBlur:r,value:s=[],ref:o},fieldState:{invalid:l,error:c}}=hn({name:n.name}),d={onChange:a,onBlur:r,value:s,invalid:l,errorMessage:c==null?void 0:c.message};return t(Vs,{ref:o,...lt(d,n),children:e})}function im({hideTitle:e}){return u("div",{children:[u("div",{className:"block md:flex gap-24 mb-24",children:[t(gn,{children:t(bn,{name:"image",diskPrefix:"links",variant:"avatar",previewSize:"w-90 h-90",previewRadius:"rounded",placeholderIcon:t("div",{className:"w-full h-full bg-alt rounded"}),showRemoveButton:!0})}),u("div",{className:"flex-auto my-24 md:my-0",children:[!e&&t(z,{name:"name",label:t(i,{message:"Title"}),className:"mb-24"}),t(z,{inputElementType:"textarea",name:"description",rows:2,label:t(i,{message:"description"})})]})]}),t(dr,{name:"tags",label:t(i,{message:"Tags"}),valueKey:"name"})]})}const lm=O(t("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3h7zM7 9H4V5h3v4zm10 6h3v4h-3v-4zm0-10h3v4h-3V5z"}),"AccountTreeOutlined");function cm(){const{trans:e}=H(),{disabled:n}=It("utm");return u(wn,{title:t(i,{message:"UTM tags"}),description:t(i,{message:"Add UTMs to track web traffic in analytics tools."}),upgradeMessage:n&&t(i,{message:"Your current plan doesn't include UTM functionality."}),children:[u("div",{className:"block md:flex gap-24 items-center mt-24",children:[t(z,{name:"utm.source",label:t(i,{message:"Source"}),placeholder:e(h("e.g: adwords, google, facebook")),className:"mb-24 flex-auto",disabled:n}),t(z,{name:"utm.medium",label:t(i,{message:"Medium"}),placeholder:e(h("e.g: banner, email, social post")),className:"mb-24 flex-auto",disabled:n})]}),u("div",{className:"block md:flex gap-24 items-center",children:[t(z,{name:"utm.campaign",label:t(i,{message:"Campaign"}),placeholder:e(h("e.g: holiday special, birthday promo")),className:"mb-24 flex-auto",disabled:n}),t(z,{name:"utm.term",label:t(i,{message:"Term"}),placeholder:e(h("Use to identify ppc keywords")),className:"mb-24 flex-auto",disabled:n})]}),t(z,{name:"utm.content",label:t(i,{message:"Content"}),placeholder:e(h("Use to differentiate ads or words on a page")),className:"mb-24",disabled:n}),t(dm,{})]})}function dm(){const{fields:e,append:n,remove:a}=$s({name:"utm_custom"}),{disabled:r}=It("utm");return u(wn,{title:t(i,{message:"Custom parameters"}),description:t(i,{message:"Add query parameters to track web traffic in analytics tools."}),upgradeMessage:r&&t(i,{message:"Your current plan doesn't include query parameters functionality."}),children:[e.map((s,o)=>u("div",{className:"block md:flex items-end gap-14",children:[t(z,{required:!0,name:`utm_custom.${o}.key`,label:t(i,{message:"Key"}),className:"flex-auto mt-24",disabled:r}),t(z,{required:!0,name:`utm_custom.${o}.value`,label:t(i,{message:"Value"}),className:"flex-auto mt-24",disabled:r}),t(um,{onClick:()=>a(o)})]},s.id)),t(S,{className:"mb-24 mt-12",variant:"text",color:"primary",startIcon:t(ln,{}),onClick:()=>{n({key:"",value:""})},disabled:r,children:t(i,{message:"Add parameter"})})]})}function um({onClick:e}){return Ie()?t("div",{className:"mt-12",children:t(S,{variant:"outline",color:"danger",size:"xs",onClick:e,children:t(i,{message:"Remove"})})}):t(R,{color:"danger",onClick:e,children:t(qe,{})})}function ai(e){const{custom_domains:n,base_url:a}=fe();return f.exports.useMemo(()=>{var s;const r=n==null?void 0:n.default_host;if(r){const o=(s=e==null?void 0:e.find(l=>l.host===r))==null?void 0:s.host;if(o)return o}return a.replace(/\/$/,"").replace(/(^\w+:|^)\/\//,"")},[n,a,e])}function ur({...e}){var o;const{data:n}=Bt(),a=ai(n==null?void 0:n.domains),{custom_domains:r}=fe(),s=(n==null?void 0:n.domains)||[];return!(r!=null&&r.allow_select)||!s.length?null:u(ze,{selectionMode:"single",label:t(i,{message:"Domain"}),...e,children:[r.allow_all_option&&t(A,{value:void 0,children:t(i,{message:"All my domains (including default)"})},"all"),t(A,{value:0,startIcon:t(ot,{url:a}),children:et(a)},"default"),(o=n==null?void 0:n.domains)==null?void 0:o.map(l=>l.host===a?null:t(A,{value:l.id,startIcon:t(ot,{url:l.host}),children:et(l.host)},l.id))]})}function mr({defaultExpanded:e,multipleLinks:n,hiddenFields:a=[],linkName:r=t(i,{message:"link"})}){const{links:{retargeting:s}}=fe(),[o,l]=f.exports.useState(e||[]);return u(Bo,{className:"-ml-14 -mr-14",mode:"multiple",variant:"minimal",expandedValues:o,onExpandedChange:c=>{l(c)},children:[t($t,{value:"options",label:t(i,{message:"Settings"}),startIcon:t(ei,{}),children:t(mm,{multipleLinks:n,hiddenFields:a,linkName:r})}),t($t,{value:"restrictions",label:t(i,{message:"Restrictions"}),startIcon:t(ir,{}),children:t(Xu,{linkName:r})}),s&&t($t,{value:"retargeting",label:t(i,{message:"Retargeting"}),startIcon:t(em,{}),children:t(tm,{})}),!a.includes("seo")&&t($t,{label:t(i,{message:"SEO"}),startIcon:t(om,{}),value:"seo",children:t(im,{hideTitle:a==null?void 0:a.includes("title")})}),t($t,{value:"utm",label:t(i,{message:"UTM"}),startIcon:t(lm,{}),children:t(cm,{})})]})}function mm({multipleLinks:e,hiddenFields:n,linkName:a}){const{links:{enable_type:r,pixels:s}}=fe(),o=e?2:1,l=n.includes("groups"),c=n.includes("type"),d=n.includes("enabled");return u(f.exports.Fragment,{children:[r&&!c&&t(Hu,{}),t(ur,{name:"domain_id",className:"mb-24",description:t(i,{message:"Select which domain should [one :name|other :names] be accessible with.",values:{name:a,count:o}})}),!l&&t(pm,{multipleLinks:e}),s&&t(hm,{multipleLinks:e,linkName:a}),!d&&t(ht,{name:"active",description:t(i,{message:"When [one :name is|other :names are] disabled, 404 page will be shown when short URL is visited.",values:{name:a,count:o}}),children:t(i,{message:"Enabled"})})]})}function pm({multipleLinks:e}){const{data:n}=Bt();return t(dr,{suggestions:n==null?void 0:n.groups,openMenuOnFocus:!0,allowCustomValue:!1,showDropdownArrow:!0,className:"mb-24",name:"groups",label:t(i,{message:"Groups"}),description:t(i,{message:"Which groups should [one link|other these links] belong to.",values:{count:e?2:1}}),children:a=>t(A,{value:a.id,children:a.name})})}function hm({multipleLinks:e,linkName:n}){const{data:a}=Bt();return t(dr,{suggestions:a==null?void 0:a.pixels,openMenuOnFocus:!0,className:"mb-24",name:"pixels",label:t(i,{message:"Pixels"}),description:t(i,{message:"Which tracking pixels should be used for [one this :name|other these :names].",values:{count:e?2:1,name:n}}),children:r=>t(A,{value:r.id,children:r.name})})}function fm({suffix:e,host:n,value:a,onChange:r,className:s,inputRef:o,onInputBlur:l,showLinkIcon:c=!0,pattern:d,minLength:p,maxLength:m,hideButton:b}){const{base_url:g}=fe(),v=e?`/${e}`:"",[y,w]=f.exports.useState(!1),[x,k]=f.exports.useState(a);n=n||g,f.exports.useEffect(()=>{k(a)},[a]);const C=()=>{y?(w(!1),x&&(r==null||r(x))):w(!0)};return u("div",{className:D("flex items-center",s),children:[c&&t(Ms,{className:"icon-md text-muted"}),u("div",{className:"text-primary ml-6 mr-14",children:[n,v,!y&&x&&u(f.exports.Fragment,{children:[t("span",{children:"/"}),t("span",{className:"font-medium",children:x})]})]}),y&&t(Xn,{pattern:d,minLength:p,maxLength:m,onKeyDown:L=>{L.key==="Enter"&&C()},ref:o,"aria-label":"slug",autoFocus:!0,className:"mr-14",size:"2xs",value:x,onBlur:l,onChange:L=>{k(L.target.value)}}),!b&&t(S,{type:"button",color:"chip",variant:"outline",size:"2xs",onClick:()=>{C()},children:y?t(i,{message:"Save"}):t(i,{message:"Edit"})})]})}function ua({form:e,name:n}){var b,g;const{links:{alias_min:a,alias_max:r},custom_domains:s}=fe(),{disabled:o}=It("alias"),{watch:l,setValue:c,formState:d}=e,p=l("alias")||l("hash"),m=((b=d.errors.alias)==null?void 0:b.message)||((g=d.errors.hash)==null?void 0:g.message);return u("div",{className:"mb-24",children:[u("div",{className:"flex items-center",children:[t(fm,{host:s==null?void 0:s.default_host,pattern:"[A-Za-z0-9_-]+",minLength:a,maxLength:r,value:p,onChange:v=>{c(n,v)},hideButton:o}),o&&t(lr,{message:t(i,{message:"Your current plan does not include alias editing."})})]}),m&&t("div",{className:"text-xs text-danger mt-6",children:m})]})}function ri({form:e,onSubmit:n,formId:a,showButtonLabelField:r,hiddenFields:s}){const{clearErrors:o}=e,{trans:l}=H(),{links:{min_len:c,max_len:d}}=fe(),p=s==null?void 0:s.includes("alias");return u(he,{form:e,onSubmit:m=>{_s(m.long_url)?n(m):e.setError("long_url",{message:l(h("This url is invalid."))})},onBeforeSubmit:()=>{o("alias")},id:a,children:[r&&t(z,{name:"name",label:t(i,{message:"Button label"}),className:"mb-24 flex-auto",placeholder:l(h("e.g. My Webpage")),autoFocus:!0}),t(z,{label:t(i,{message:"Destination URL"}),name:"long_url",placeholder:"https://example.com",autoComplete:"off",spellCheck:"false",required:!0,className:D(p?"mb-24":"mb-12"),autoFocus:!r,minLength:c,maxLength:d}),!p&&t(ua,{form:e,name:"alias"}),t(mr,{hiddenFields:s})]})}const si="********";function oi(e){const n=e.rules||[],a={},r=[];if(e.utm){const s=new URLSearchParams(e.utm);for(const[o,l]of s.entries())gm.includes(o)?a[o]=l:r.push({key:o,value:l})}return{hash:e.hash,active:e.active,activates_at:e.activates_at,expires_at:e.expires_at,name:e.name,description:e.description,image:e.image,geo_rules:n.filter(s=>s.type==="geo"),device_rules:n.filter(s=>s.type==="device"),platform_rules:n.filter(s=>s.type==="platform"),exp_clicks_rule:n.find(s=>s.type==="exp_clicks"),password:e.has_password?si:"",utm:a,utm_custom:r,domain_id:e.domain_id,pixels:e.pixels,tags:e.tags}}const gm=["source","medium","campaign","term","content"];function pr(e){var a;e.password===si&&delete e.password;let n={...e,utm:null,groups:null,pixels:null,tags:null};return n=bm(n,e),n.pixels=e.pixels?e.pixels.map(r=>r.id):[],n.tags=(a=e.tags)==null?void 0:a.map(r=>typeof r=="string"?r:r.name),n}function bm(e,n){var r;if(!n.utm&&!n.utm_custom)return e;const a=Rs(n.utm||{});return(r=n.utm_custom)==null||r.forEach(({key:s,value:o})=>{a[s]=o}),e.utm=new URLSearchParams(a).toString(),e}function hr(e){var a;const n=pr(e);return n.groups=(a=e.groups)==null?void 0:a.map(r=>r.id),n}function vm(e,{endpoint:n,invalidateQueries:a=!0}={}){const{trans:r}=H();return q(s=>ym(s,n),{onSuccess:()=>{Y.positive(r(h("Link created"))),a&&(W.invalidateQueries(X("link")),W.invalidateQueries(X("link-group")),W.invalidateQueries(X("biolink")))},onError:s=>we(s,e)})}function ym(e,n){return F.post(n||"link",hr(e)).then(a=>a.data)}function fr({group:e,position:n,showButtonLabelField:a,hiddenFields:r,endpoint:s,onSuccess:o,invalidateQueries:l}){const{close:c,formId:d}=K(),{links:{default_type:p},custom_domains:m}=fe(),{verify:b,isVerifying:g}=vn("link_creation"),v=J({defaultValues:{hash:Ya(5),active:!0,type:p||"direct",geo_rules:[],device_rules:[],platform_rules:[],groups:e?[e]:[],position:n,utm:{},utm_custom:[],domain_id:m!=null&&m.allow_all_option?void 0:0}}),y=vm(v,{endpoint:s,invalidateQueries:l});return u(G,{size:"lg",children:[t(Q,{children:t(i,{message:"Create link"})}),t(j,{children:t(ri,{hiddenFields:r,showButtonLabelField:a,formId:d,form:v,onSubmit:async w=>{await b()&&y.mutate(w,{onSuccess:k=>{o==null||o(k),c()}})}})}),u(Z,{children:[t(S,{variant:"text",onClick:()=>{c()},children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",type:"submit",form:d,disabled:y.isLoading||g,children:t(i,{message:"Create"})})]})]})}function km(e,n,{endpoint:a,invalidateQueries:r=!0}={}){const{trans:s}=H();return q(o=>xm(n,o,a),{onSuccess:()=>{Y.positive(s(h("Link updated"))),r&&(W.invalidateQueries(X("link")),W.invalidateQueries(X("link-group")),W.invalidateQueries(X("biolink")))},onError:o=>we(o,e)})}function xm(e,n,a){return F.put(a||`link/${e}`,hr(n)).then(r=>r.data)}function ii({link:e,showButtonLabelField:n,hiddenFields:a,invalidateQueries:r,onSuccess:s,endpoint:o}){const{close:l,formId:c}=K(),{verify:d,isVerifying:p}=vn("link_creation"),m=f.exports.useMemo(()=>wm(e),[e]),b=J({defaultValues:m}),g=km(b,e.id,{endpoint:o,invalidateQueries:r});return u(G,{size:"lg",children:[t(Q,{children:t(i,{message:"Update link"})}),t(j,{children:t(ri,{hiddenFields:a,showButtonLabelField:n,formId:c,form:b,onSubmit:async v=>{await d()&&g.mutate(v,{onSuccess:w=>{s==null||s(w),l()}})}})}),u(Z,{children:[t(S,{variant:"text",onClick:()=>{l()},children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",type:"submit",form:c,disabled:g.isLoading||p,children:t(i,{message:"Update"})})]})]})}function wm(e){return{...oi(e),long_url:e.long_url,alias:e.alias,type:e.type,type_id:e.type_id,groups:e.groups}}function li({link:e,className:n}){return e.image?t("img",{className:n,alt:"",src:e.image}):t(ot,{className:n,url:e.long_url})}function Lt({image:e,label:n,description:a,labelClassName:r}){return u("div",{className:"flex items-center gap-12 w-max",children:[e&&t(yn,{size:"md",className:"flex-shrink-0",src:e}),u("div",{children:[t("div",{className:r,children:n}),a&&t("div",{className:"text-muted text-xs",children:a})]})]})}function Cm({resourceName:e}){const{trans:n}=H();return t(ni,{message:t(i,{message:"You've reached the maximum number of :resource allowed for your current plan.",values:{resource:n(e)}}),messageSuffix:t(i,{message:"Upgrade to increase this limit and unlock other features."})})}const ie=f.exports.forwardRef(({children:e,resource:n,action:a,...r},s)=>{const{user:o}=oe(),[l,c]=f.exports.useState(!1),{data:d}=na(),p=f.exports.useMemo(()=>{const g=typeof n=="string"?n:n.model_type;return`${Sm(g)}s`},[n]),m=d==null?void 0:d.usage[p][a],b=d==null?void 0:d.usage[p].createMsgType;return m||typeof n=="object"&&n.user_id===(o==null?void 0:o.id)?f.exports.cloneElement(e,{...r,ref:s}):!m&&b!=="overQuota"?null:u("div",{onPointerDown:He(g=>{g.preventDefault(),g.stopPropagation()}),onClickCapture:He(g=>{g.preventDefault(),g.stopPropagation(),c(!0)}),onKeyDownCapture:He(g=>{const v=g;v.preventDefault(),v.stopPropagation(),(v.key==="Enter"||v.key===" ")&&c(!0)}),children:[e,t(T,{type:"modal",isOpen:l,onOpenChange:c,children:t(Cm,{resourceName:Gs[p]})})]})});function Sm(e){return e.replace(/[A-Z]/g,n=>`_${n.toLowerCase()}`)}const un=O(t("path",{d:"M5 9.2h3V19H5V9.2zM10.6 5h2.8v14h-2.8V5zm5.6 8H19v6h-2.8v-6z"}),"BarChartOutlined"),za=[{key:"summary",header:()=>t(i,{message:"Summary"}),width:"w-5/6 max-w-200",body:e=>u("div",{children:[u("div",{className:"flex items-center gap-6 whitespace-nowrap",children:[t(li,{link:e,className:"w-16 h-16"}),t("a",{className:"block font-semibold hover:underline overflow-ellipsis overflow-hidden w-min",href:e.long_url,target:"_blank",rel:"noreferrer","data-testid":"long-url",children:et(e.long_url)})]}),t(Tl,{link:e,variant:"text",className:"block text-muted hover:underline w-min","data-testid":"short-url"})]})},{key:"user_id",allowsSorting:!0,header:()=>t(i,{message:"Owner"}),body:e=>e.user?t(Lt,{image:e.user.avatar,label:e.user.display_name,description:e.user.email}):""},{key:"clicks",sortingKey:"clicks_count",allowsSorting:!0,header:()=>t(i,{message:"Clicks"}),body:e=>e.clicks_count?t(Ze,{value:e.clicks_count}):""},{key:"type",sortingKey:"type",allowsSorting:!0,header:()=>t(i,{message:"Type"}),body:e=>t(Wn,{size:"xs",radius:"rounded",className:"capitalize",children:t(i,{message:e.type})})},{key:"password",allowsSorting:!0,header:()=>t(i,{message:"Password"}),body:e=>e.has_password?t(_t,{className:"icon-md text-positive"}):t(qe,{className:"icon-md text-danger"})},{key:"expires_at",allowsSorting:!0,header:()=>t(i,{message:"Expires at"}),body:e=>e.expires_at?t(Je,{date:e.expires_at}):""},{key:"clicked_at",allowsSorting:!0,header:()=>t(i,{message:"Last clicked"}),body:e=>e.clicked_at?t(Je,{date:e.clicked_at}):""},{key:"actions",header:()=>t(i,{message:"Actions"}),hideHeader:!0,align:"end",body:e=>u("div",{className:"text-muted",children:[t(xe,{label:t(i,{message:"Link statistics"}),children:t(ge,{to:`${e.id}`,children:t(R,{size:"md",children:t(un,{})})})}),t(vt,{link:e}),t(ie,{resource:e,action:"update",children:u(T,{type:"modal",children:[t(xe,{label:t(i,{message:"Edit link"}),children:t(R,{size:"md",children:t(je,{})})}),t(ii,{link:e})]})})]})}];function gr(e){return q(n=>Nm(e,n),{onError:n=>$e(n)})}function Nm(e,n){return F.post(e,n).then(a=>a.data)}const ci=O(t("path",{d:"M8 11h8v2H8v-2zm12.1 1H22c0-2.76-2.24-5-5-5h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1zM3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM19 12h-2v3h-3v2h3v3h2v-3h3v-2h-3v-3z"}),"AddLinkOutlined"),di=O(t("path",{d:"M 7 2 C 5.895 2 5 2.895 5 4 L 5 9 L 4 9 C 2.895 9 2 9.895 2 11 L 2 16 C 2 17.105 2.895 18 4 18 L 5 18 L 5 20 C 5 21.105 5.895 22 7 22 L 15.171875 22 L 13.171875 20 L 7 20 L 7 18 L 17 18 L 17 16 C 17 14.895 17.895 14 19 14 L 21 14 L 21 7 L 16 2 L 7 2 z M 7 4 L 15 4 L 15 8 L 19 8 L 19 9 L 7 9 L 7 4 z M 6 11 C 7.105 11 8 11.895 8 13 L 7 13 C 7 12.449 6.551 12 6 12 C 5.449 12 5 12.449 5 13 L 5 14 C 5 14.551 5.449 15 6 15 C 6.551 15 7 14.551 7 14 L 8 14 C 8 15.105 7.105 16 6 16 C 4.895 16 4 15.105 4 14 L 4 13 C 4 11.895 4.895 11 6 11 z M 10.644531 11 C 12.067531 11.041 12.154297 12.282906 12.154297 12.503906 L 11.1875 12.503906 C 11.1875 12.400906 11.204906 11.806641 10.628906 11.806641 C 10.453906 11.806641 10.059844 11.884188 10.089844 12.367188 C 10.118844 12.810188 10.703547 13.019406 10.810547 13.066406 C 11.034547 13.148406 12.141391 13.642391 12.150391 14.650391 C 12.152391 14.864391 12.097062 15.985 10.664062 16 C 9.1050625 16.017 9 14.675438 9 14.398438 L 9.9746094 14.398438 C 9.9746094 14.545438 9.9870625 15.256172 10.664062 15.201172 C 11.071063 15.167172 11.159828 14.87425 11.173828 14.65625 C 11.196828 14.28925 10.846563 14.068625 10.476562 13.890625 C 9.9565625 13.640625 9.1341406 13.333375 9.1191406 12.359375 C 9.1061406 11.482375 9.7505312 10.975 10.644531 11 z M 13 11 L 14.052734 11 L 14.992188 14.646484 L 15.9375 11 L 17 11 L 15.646484 16 L 14.345703 16 L 13 11 z M 19 16 L 19 20 L 16 20 L 20 24 L 24 20 L 21 20 L 21 16 L 19 16 z"}));function br(e,n){const a=document.createElement("a");a.href=e,n&&(a.download=n),document.body.appendChild(a),a.click(),document.body.removeChild(a)}function vr(){const{close:e}=K();return u(G,{children:[t(Q,{children:t(i,{message:"Csv export"})}),t(j,{children:t(i,{message:"Your request is being processed. We'll email you when the report is ready to download. In certain cases, it might take a little longer, depending on the number of items beings exported and the volume of activity."})}),t(Z,{children:t(S,{variant:"flat",color:"primary",onClick:e,children:t(i,{message:"Got it"})})})]})}function Im(e){const{trans:n}=H();return q(a=>Lm(a),{onSuccess:a=>{Y.positive(n(h("[one 1 link|other :count links] shortened",{values:{count:a.links.length}}))),W.invalidateQueries(X("link")),W.invalidateQueries(X("link-group"))},onError:a=>we(a,e)})}function Lm(e){return F.post("link/batch/shorten",Dm(e)).then(n=>n.data)}function Dm(e){const n=hr(e),a=e.long_urls.split(/\n/g);return{...n,long_urls:a}}function ui({group:e}){const{trans:n}=H(),{close:a,formId:r}=K(),s=J({defaultValues:{active:!0,type:"direct",geo_rules:[],device_rules:[],platform_rules:[],groups:e?[e]:void 0,utm:{},utm_custom:[]}}),o=Im(s);return u(G,{size:"lg",children:[t(Q,{children:t(i,{message:"Shorten links"})}),t(j,{children:u(he,{id:r,form:s,onSubmit:l=>{l.long_urls.split(/\r?\n/).some(d=>!_s(d))?s.setError("long_urls",{message:n(h("Some of the urls are not valid."))}):o.mutate(l,{onSuccess:()=>a()})},children:[t(z,{label:t(i,{message:"Multiple URLs (one per line)"}),inputElementType:"textarea",rows:10,name:"long_urls",autoComplete:"off",spellCheck:"false",required:!0,className:"mb-24",autoFocus:!0}),t(mr,{multipleLinks:!0})]})}),u(Z,{children:[t(S,{variant:"text",onClick:()=>{a()},children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",type:"submit",form:r,disabled:o.isLoading,children:t(i,{message:"Shorten"})})]})]})}function Pm({forCurrentUser:e}){const{user:n}=oe(),{workspaceId:a}=Ne(),{filters:r,columns:s}=f.exports.useMemo(()=>{const l=e?za.filter(d=>d.key!=="user_id"):za;return{filters:e?Aa.filter(d=>d.key!=="user_id"):Aa,columns:l}},[e]),o=e?n==null?void 0:n.id:"";return f.exports.useEffect(()=>{da()},[]),t(xt,{endpoint:"link",queryParams:{userId:o,workspaceId:a,with:"user"},title:t(i,{message:"Links"}),filters:r,columns:s,actions:t($m,{}),selectedActions:t(ie,{resource:"link",action:"delete",children:t(wt,{})}),emptyStateMessage:t(dt,{image:ea,title:t(i,{message:"No links have been created yet"}),filteringTitle:t(i,{message:"No matching links"})})})}function $m(){const[e,n]=f.exports.useState(null),a=gr("link/csv/export");return u(f.exports.Fragment,{children:[u(Kn,{children:[t(R,{variant:"outline",color:"primary",radius:"rounded",size:"sm",className:"flex-shrink-0",children:t(Ts,{})}),u(jn,{children:[t(A,{value:"addMultiple",startIcon:t(ci,{}),onSelected:()=>{n("addMultiple")},children:t(i,{message:"Shorten multiple links"})}),t(A,{value:"export",startIcon:t(di,{}),onSelected:()=>{a.mutate({},{onSuccess:r=>{r.downloadPath?br(r.downloadPath):n("export")}})},children:t(i,{message:"Export links"})})]})]}),u(T,{type:"modal",isOpen:e!==null,onOpenChange:r=>{r||n(null)},children:[e==="export"&&t(vr,{}),e==="addMultiple"&&t(ui,{})]}),t(ie,{resource:"link",action:"create",children:u(T,{type:"modal",children:[t(ct,{children:t(i,{message:"Shorten link"})}),t(fr,{})]})})]})}const Mm=O(t("path",{d:"M3 11c0 2.45 1.76 4.47 4.08 4.91l-1.49-1.49L7 13l4 4.01L7 21l-1.41-1.41 1.58-1.58v-.06C3.7 17.54 1 14.58 1 11c0-3.87 3.13-7 7-7h3v2H8c-2.76 0-5 2.24-5 5zm19 0V4h-9v7h9zm-2-2h-5V6h5v3zm-7 4h9v7h-9z"}),"MoveDownOutlined");function _m(e){const{trans:n}=H();return q(a=>Rm(e.id,a),{onSuccess:()=>{Y.positive(n(h("Moved links to \u201C:group\u201C",{values:{group:e.name}}))),W.invalidateQueries(X("link-group"))},onError:a=>$e(a)})}function Rm(e,n){return F.post(`link-group/${e}/attach`,n).then(a=>a.data)}function Am({group:e}){const{close:n}=K(),[a,r]=f.exports.useState([]),[s,o]=f.exports.useState({groupId:`!${e.id}`,query:"",perPage:8}),{data:l,isLoading:c}=Fo("link",s),d=l==null?void 0:l.pagination,p=_m(e),m=u("div",{className:"text-muted",children:[t(R,{disabled:c||!(d!=null&&d.prev_page),onClick:()=>{o({...s,page:d==null?void 0:d.prev_page})},children:t(kn,{})}),t(R,{disabled:c||!(d!=null&&d.next_page),onClick:()=>{o({...s,page:d==null?void 0:d.next_page})},children:t(Vt,{})})]}),b=t(Zn,{image:t(fn,{src:ea}),title:t(i,{message:"No links found"})}),g=t("div",{className:"min-h-[464px]",children:t(aa,{children:t(Oe,{mode:"wait",children:c?t(Tm,{}):t(zm,{links:d==null?void 0:d.data,selectedIds:a,setSelectedIds:r})})})});return u(G,{size:"lg",children:[t(Q,{children:t(i,{message:"Move links to \u201C:group\u201C",values:{group:e.name}})}),u(j,{children:[t(Xn,{className:"mb-14",label:t(i,{message:"Search for links..."}),value:s.query,onChange:v=>{o({...s,query:v.target.value})}}),!c&&!(d!=null&&d.data.length)?b:g]}),u(Z,{startAction:m,children:[t(S,{variant:"text",onClick:n,children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",onClick:()=>{p.mutate({linkIds:a},{onSuccess:n})},disabled:p.isLoading,children:t(i,{message:"Move"})})]})]})}function zm({links:e,selectedIds:n,setSelectedIds:a}){return t(ye.div,{...Ve,children:t(aa,{children:(e||[]).map(r=>{const s=n.includes(r.id);return t(tr,{isSelected:s,onSelected:()=>{a(s?n.filter(o=>o!==r.id):[...n,r.id])},startIcon:t(Qn,{checked:s}),description:et(r.short_url),children:u("div",{className:"flex items-center gap-8",children:[t(li,{className:"w-14 h-14",link:r}),t("div",{children:et(r.long_url)})]})},r.id)})})},"links-list")}const Em=8;function Tm(){return t(ye.div,{...Ve,children:t(aa,{children:Array.from({length:Em}).map((e,n)=>t(tr,{isDisabled:!0,children:t(De,{variant:"text",className:"min-h-40"})},n))})},"links-skeleton")}function Fm(){const{groupId:e}=Ke();return t("div",{className:"p-12 md:p-24",children:t(Jo,{endpoint:`link-group/${e}/links`,filters:Aa,columns:za,actions:t(Om,{groupId:e?+e:void 0}),selectedActions:t(ie,{resource:"link",action:"delete",children:t(wt,{})}),emptyStateMessage:t(dt,{image:ea,title:t(i,{message:"There are no links in this group yet"}),filteringTitle:t(i,{message:"No matching links"})}),children:t(Vm,{})})})}function Vm(){var s;const e=yt(),{query:n}=f.exports.useContext(ia),a=(s=n.data)==null?void 0:s.linkGroup;if(!a)return t(on,{size:"xl",className:"mb-16"});const r=t(i,{message:"\u201C:group\u201C links",values:{group:a.name}});return u(f.exports.Fragment,{children:[t(Ka,{children:r}),u(on,{size:"xl",className:"mb-16",children:[t(it,{onSelected:()=>{e("/dashboard/link-groups")},children:t(i,{message:"Link groups"})}),t(it,{className:"first-letter:capitalize",children:r})]})]})}function Om({groupId:e}){var l;const[n,a]=f.exports.useState(null),r=gr("link/csv/export"),{query:s}=f.exports.useContext(ia),o=(l=s.data)==null?void 0:l.linkGroup;return u(f.exports.Fragment,{children:[u(Kn,{children:[t(R,{variant:"outline",color:"primary",radius:"rounded",size:"sm",className:"flex-shrink-0",children:t(Ts,{})}),u(jn,{children:[t(A,{value:"moveLinks",startIcon:t(Mm,{}),onSelected:()=>{a("move")},children:t(i,{message:"Move links to this group"})}),t(A,{value:"addMultiple",startIcon:t(ci,{}),onSelected:()=>{a("addMultiple")},children:t(i,{message:"Add multiple links"})}),t(A,{value:"export",startIcon:t(di,{}),onSelected:()=>{r.mutate({groupId:e},{onSuccess:c=>{c.downloadPath?br(c.downloadPath):a("export")}})},children:t(i,{message:"Export links"})})]})]}),u(T,{type:"modal",isOpen:n!==null,onOpenChange:c=>{c||a(null)},children:[n==="move"&&t(Am,{group:o}),n==="export"&&t(vr,{}),n==="addMultiple"&&t(ui,{group:o})]}),t(ie,{resource:"link",action:"create",children:u(T,{type:"modal",children:[t(ct,{children:t(i,{message:"Add link"})}),t(fr,{group:o})]})})]})}const Bm=O(t("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}),"FileDownloadOutlined");function Um({endpoint:e,payload:n}){const[a,r]=f.exports.useState(!1),s=gr(e);return u(f.exports.Fragment,{children:[t(R,{variant:"outline",color:"primary",radius:"rounded",size:"sm",className:"flex-shrink-0",disabled:s.isLoading,onClick:()=>{s.mutate(n,{onSuccess:o=>{o.downloadPath?br(o.downloadPath):r(!0)}})},children:t(Bm,{})}),t(T,{type:"modal",isOpen:a,onOpenChange:r,children:t(vr,{})})]})}const Hm=O(t("path",{d:"M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7zM20.1 3H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9zM19 19H5V5h14v14z"}),"ListAltOutlined");function mi({onSubmit:e,form:n,formId:a}){const{clearErrors:r}=n;return u(he,{form:n,id:a,onBeforeSubmit:()=>{r("hash")},onSubmit:e,children:[u("div",{className:"mb-24",children:[t(z,{name:"name",label:t(i,{message:"Name"}),minLength:3,className:"mb-8",autoFocus:!0}),t(ua,{form:n,name:"hash"})]}),t(ur,{name:"domain_id",className:"mb-24"}),t(z,{name:"description",className:"mb-24",label:t(i,{message:"Description"}),inputElementType:"textarea",rows:2}),t(ht,{name:"active",description:t(i,{message:"Whether this link group is viewable publicly."}),className:"mb-24",children:t(i,{message:"Active"})}),t(ht,{name:"rotator",description:t(i,{message:"When checked, url above will redirect to random link from the group, instead of showing all links belonging to group."}),children:t(i,{message:"Rotator"})})]})}function Wm(e,n){const{trans:a}=H();return q(r=>Gm(n,r),{onSuccess:()=>{Y.positive(a(h("Link group updated"))),W.invalidateQueries(X("link-group"))},onError:r=>we(r,e)})}function Gm(e,n){return F.put(`link-group/${e}`,n).then(a=>a.data)}function qm({group:e}){const{verify:n,isVerifying:a}=vn("link_creation"),{formId:r,close:s}=K(),o=J({defaultValues:{name:e.name,hash:e.hash,description:e.description,active:e.active,rotator:e.rotator}}),l=Wm(o,e.id);return u(G,{size:"md",children:[t(Q,{children:t(i,{message:"Update link group"})}),t(j,{children:t(mi,{formId:r,form:o,onSubmit:async c=>{await n()&&l.mutate(c,{onSuccess:()=>s()})}})}),u(Z,{children:[t(S,{variant:"text",onClick:()=>{s()},children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",type:"submit",form:r,disabled:l.isLoading||a,children:t(i,{message:"Update"})})]})]})}const Gr=[{key:"name",allowsSorting:!0,header:()=>t(i,{message:"Name"}),width:"w-5/6 max-w-200",body:e=>t("a",{href:e.short_url,target:"_blank",rel:"noreferrer",className:Tt,children:e.name})},{key:"user_id",allowsSorting:!0,header:()=>t(i,{message:"Owner"}),body:e=>e.user?t(Lt,{image:e.user.avatar,label:e.user.display_name,description:e.user.email}):""},{key:"links_count",allowsSorting:!0,header:()=>t(i,{message:"Links"}),body:e=>e.links_count?t(Ze,{value:e.links_count}):"-"},{key:"active",allowsSorting:!0,header:()=>t(i,{message:"Active"}),body:e=>e.active?t(_t,{className:"icon-md text-positive"}):t(qe,{className:"icon-md text-danger"})},{key:"rotator",allowsSorting:!0,header:()=>t(i,{message:"Rotator"}),body:e=>e.rotator?t(_t,{className:"icon-md text-positive"}):t(qe,{className:"icon-md text-danger"})},{key:"updated_at",allowsSorting:!0,header:()=>t(i,{message:"Last updated"}),body:e=>e.updated_at?t(Je,{date:e.updated_at}):""},{key:"actions",header:()=>t(i,{message:"Actions"}),hideHeader:!0,align:"end",body:e=>u("div",{className:"text-muted",children:[t(xe,{label:t(i,{message:"Clicks report"}),children:t(ge,{to:`${e.id}`,children:t(R,{size:"md",children:t(un,{})})})}),t(xe,{label:t(i,{message:"Manage links"}),children:t(ge,{to:`${e.id}/links`,children:t(R,{size:"md",children:t(Hm,{})})})}),t(vt,{link:e}),t(ie,{resource:e,action:"update",children:u(T,{type:"modal",children:[t(xe,{label:t(i,{message:"Edit link"}),children:t(R,{size:"md",children:t(je,{})})}),t(qm,{group:e})]})})]})}],qr=[new ee({type:B.Select,key:"rotator",label:h("Type"),description:h("Type of the group"),defaultValue:"01",defaultOperator:Se.eq,options:[{key:"01",label:h("Default"),value:!1},{key:"02",label:h("Rotator"),value:!0}]}),new ee({type:B.Select,key:"active",label:h("Status"),description:h("Whether group is disabled or not"),defaultValue:"01",defaultOperator:Se.eq,options:[{key:"01",label:h("Enabled"),value:!0},{key:"02",label:h("Disabled"),value:!1}]}),new ee({type:B.Input,inputType:"number",key:"links_count",label:h("Link count"),description:h("Number of links in the group"),defaultValue:1,defaultOperator:Se.gte,operators:Tn}),new Ct({description:h("Date group was created")}),new St({description:h("Date group was last updated")}),new ee({type:B.SelectModel,model:Nt,key:"user_id",label:h("User"),description:h("User group was created by")})];function Km(e){const{trans:n}=H();return q(a=>jm(a),{onSuccess:()=>{Y.positive(n(h("Link group created"))),W.invalidateQueries(X("link-group"))},onError:a=>we(a,e)})}function jm(e){return F.post("link-group",e).then(n=>n.data)}function Ym(){const{formId:e,close:n}=K(),{custom_domains:a}=fe(),{verify:r,isVerifying:s}=vn("link_creation"),o=J({defaultValues:{active:!0,hash:Ya(6),rotator:!1,domain_id:a!=null&&a.allow_all_option?void 0:0}}),l=Km(o);return u(G,{size:"md",children:[t(Q,{children:t(i,{message:"Create link group"})}),t(j,{children:t(mi,{formId:e,form:o,onSubmit:async c=>{await r()&&l.mutate(c,{onSuccess:()=>n()})}})}),u(Z,{children:[t(S,{variant:"text",onClick:()=>{n()},children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",type:"submit",form:e,disabled:l.isLoading||s,children:t(i,{message:"Create"})})]})]})}const Qm=O(t("path",{d:"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"}),"InfoDialogTrigger");function Ut({title:e,body:n,dialogSize:a="sm",className:r}){return u(T,{type:"popover",triggerOnHover:!0,children:[t(R,{className:D("text-muted opacity-70",r),size:"xs",children:t(Qm,{viewBox:"0 0 16 16"})}),u(G,{size:a,children:[e&&t(Q,{padding:"px-18 pt-12",size:"md",hideDismissButton:!0,children:e}),t(j,{children:n})]})]})}function Xm({forCurrentUser:e}){const{user:n}=oe(),{workspaceId:a}=Ne(),{filters:r,columns:s}=f.exports.useMemo(()=>{const l=e?Gr.filter(d=>d.key!=="user_id"):Gr;return{filters:e?qr.filter(d=>d.key!=="user_id"):qr,columns:l}},[e]);f.exports.useEffect(()=>{da()},[]);const o=e?n==null?void 0:n.id:"";return t(xt,{endpoint:"link-group",queryParams:{userId:o,withCount:"links",with:"user",workspaceId:a},title:t(i,{message:"Link groups"}),headerContent:t(Zm,{}),filters:r,columns:s,actions:t(Jm,{}),selectedActions:t(ie,{resource:"linkGroup",action:"delete",children:t(wt,{})}),emptyStateMessage:t(dt,{image:ea,title:t(i,{message:"No groups have been created yet"}),filteringTitle:t(i,{message:"No matching groups"})})})}function Zm(){return t(Ut,{dialogSize:"auto",title:t(i,{message:"Group links together to:"}),body:u("ul",{className:"list-disc list-inside whitespace-nowrap",children:[t("li",{children:t(i,{message:"Simplify multiple link management."})}),t("li",{children:t(i,{message:"View aggregated clicks report for the whole group."})}),t("li",{children:t(i,{message:"Redirect to a random link from within the group."})}),t("li",{children:t(i,{message:"Share all links in the group with one link."})})]})})}function Jm(){return u(f.exports.Fragment,{children:[t(Um,{endpoint:"link-group/csv/export"}),t(ie,{resource:"linkGroup",action:"create",children:u(T,{type:"modal",children:[t(ct,{children:t(i,{message:"New group"})}),t(Ym,{})]})})]})}function ep(e){return Ee(["link-group",e],()=>tp(e),{initialData:np(e)})}function tp(e){return F.get(`link-group/${e}`).then(n=>n.data)}function np(e){var a,r;const n=(r=(a=W.getQueryData(X("link-group"),{exact:!1}))==null?void 0:a.pagination)==null?void 0:r.data.find(s=>s.id===+e);return n?{linkGroup:n}:void 0}function ap(){var s;const e=yt(),{groupId:n}=Ke(),a=ep(n),r=(s=a.data)==null?void 0:s.linkGroup;return t(sa,{model:`link-group=${n}`,title:u(on,{size:"xl",className:D(a.isLoading&&"invisible"),children:[t(it,{onSelected:()=>{e("..",{relative:"path"})},children:t(i,{message:"Link groups"})}),t(it,{className:"first-letter:capitalize",children:t(i,{message:"\u201C:name\u201C clicks",values:{name:r==null?void 0:r.name}})})]}),actions:r&&t(vt,{className:"flex-shrink-0 text-muted",link:r})})}function rp(e){return Ee(["link",e],()=>sp(e),{initialData:op(e)})}function sp(e){return F.get(`link/${e}`).then(n=>n.data)}function op(e){var a,r;const n=(r=(a=W.getQueryData(X("link"),{exact:!1}))==null?void 0:a.pagination)==null?void 0:r.data.find(s=>s.id===+e);return n?{link:n}:void 0}function ip(){var s;const e=yt(),{linkId:n}=Ke(),a=rp(n),r=(s=a.data)==null?void 0:s.link;return t(sa,{model:`link=${n}`,title:u(on,{size:"xl",className:D(a.isLoading&&"invisible"),children:[t(it,{onSelected:()=>{e("..",{relative:"path"})},children:t(i,{message:"Links"})}),t(it,{className:"first-letter:capitalize",children:t(i,{message:"\u201C:name\u201C clicks",values:{name:r==null?void 0:r.name}})})]}),actions:r&&t(vt,{className:"flex-shrink-0 text-muted",link:r})})}const lp=""+new URL("world.ea41c34b.svg",import.meta.url).href;function cp(e){return t(dt,{...e,image:lp,title:t(i,{message:"No domains have been connected yet"}),filteringTitle:t(i,{message:"No matching domains"})})}function dp({value:e}){return e?t(_t,{className:"icon-md text-positive"}):t(qe,{className:"icon-md text-danger"})}function up(){const{trans:e}=H();return q(n=>mp(n),{onSuccess:(n,a)=>{Y.positive(e(h("\u201C:domain\u201D removed",{values:{domain:a.domain.host}}))),W.invalidateQueries(X("custom-domain"))},onError:n=>$e(n)})}function mp({domain:e}){return F.delete(`custom-domain/${e.id}`).then(n=>n.data)}function pi({domain:e}){const n=up();return u(T,{type:"modal",onClose:a=>{a&&n.mutate({domain:e})},children:[t(S,{variant:"outline",color:"danger",size:"xs",disabled:n.isLoading,children:t(i,{message:"Remove"})}),t(gt,{title:t(i,{message:"Remove domain?"}),body:t(i,{message:"Are you sure you want to remove \u201C:domain\u201C?",values:{domain:e.host}}),confirm:t(i,{message:"Remove"}),isDanger:!0})]})}const pp=[{key:"host",allowsSorting:!0,header:()=>t(i,{message:"Domain"}),width:"w-5/6 max-w-200",body:e=>t("div",{children:u("div",{className:"flex items-center gap-6 whitespace-nowrap",children:[t(ot,{url:e.host}),t("a",{className:"block font-semibold hover:underline overflow-ellipsis overflow-hidden w-min",href:e.host,target:"_blank",rel:"noreferrer","data-testid":"host-name",children:e.host})]})})},{key:"user_id",allowsSorting:!0,header:()=>t(i,{message:"Owner"}),body:e=>e.user?t(Lt,{image:e.user.avatar,label:e.user.display_name,description:e.user.email}):""},{key:"global",allowsSorting:!0,header:()=>t(i,{message:"Global"}),body:e=>t(dp,{value:e.global})},{key:"updated_at",allowsSorting:!0,header:()=>t(i,{message:"Last updated"}),body:e=>e.updated_at?t(Je,{date:e.updated_at}):""},{key:"actions",header:()=>t(i,{message:"Actions"}),hideHeader:!0,align:"end",body:e=>t(pi,{domain:e})}],Kr=[new ee({type:B.BooleanToggle,key:"global",defaultValue:!0,label:h("Global"),description:h("Whether domain is marked as global")}),new Ct({description:h("Date domain was created")}),new St({description:h("Date domain was last updated")}),new ee({type:B.SelectModel,model:Nt,key:"user_id",label:h("Owner"),description:h("User domain belongs to")})];function hi(e){return(e.replace("www.","").match(/\./g)||[]).length>1}function yr({message:e=t(i,{message:"Checking DNS configuration..."})}){return u("div",{className:"flex items-center gap-18 text-base p-12 rounded bg-primary/10 text-primary",children:[t(Gn,{isIndeterminate:!0,size:"sm"}),t("div",{children:e})]})}function hp({stepper:{state:{isLoading:e,host:n,serverIp:a}}}){const{base_url:r}=fe();return e?t(yr,{}):hi(n)?t(jr,{title:t(i,{message:"Add this CNAME record to your domain by visiting your DNS provider or registrar."}),record:"CNAME",target:r}):t(jr,{title:t(i,{message:"Add this A record to your domain by visiting your DNS provider or registrar."}),record:"A",target:a})}function jr({title:e,record:n,target:a}){return u("div",{children:[t("div",{className:"text-muted mb-10",children:e}),u("div",{className:"flex items-center gap-12 text-base p-12 rounded bg-primary/10 text-primary font-semibold",children:[t("div",{children:n}),a]})]})}function fp({stepper:e}){return u(f.exports.Fragment,{children:[t(z,{autoFocus:!0,name:"host",required:!0,maxLength:100,label:t(i,{message:"Host"}),placeholder:"https://example.com",description:t(i,{message:"Enter the exact domain name you want your items to be accessible with. It can be a subdomain (example.yourdomain.com) or root domain (yourdomain.com)."})}),e.showGlobalField&&t(ht,{className:"mt-24 border-t pt-24",name:"global",description:t(i,{message:"Whether all users should be able to select this domain."}),children:t(i,{message:"Global"})})]})}var pe=(e=>(e[e.Host=1]="Host",e[e.Info=2]="Info",e[e.ValidationFailed=3]="ValidationFailed",e[e.Finalize=4]="Finalize",e))(pe||{});function fi(){return q(e=>gp(e))}function gp(e){return F.post("secure/custom-domain/validate/2BrM45vvfS/api",e).then(n=>n.data)}function bp({stepper:{goToNextStep:e,state:{host:n,serverIp:a,isLoading:r,validationFailReason:s}}}){fi();const{base_url:o}=fe(),{hasPermission:l}=oe(),c=hi(n),d=c?"CNAME":"A",p=c?o:a;if(r)return t(yr,{});const m=s==="serverNotConfigured"&&l("admin")?t(Yr,{children:t(i,{message:"DNS records for the domain are setup, however it seems that your server is not configured to handle requests from \u201C:host\u201C",values:{host:p}})}):t(Yr,{children:t(i,{message:"The domain is missing :record record pointing to :location or the changes haven't propagated yet.",values:{record:d,location:p}})});return u(f.exports.Fragment,{children:[m,t("div",{className:"whitespace-nowrap text-xs text-muted mt-10",children:t(i,{message:"You can wait and try again later, or <b>refresh</b>",values:{b:b=>t("button",{disabled:r,type:"button",className:"text-primary underline",onClick:()=>{e()},children:b})}})})]})}function Yr({children:e}){return u("div",{className:"flex items-center gap-12 text-base p-12 rounded bg-warning/15 text-warning font-medium",children:[t(Fl,{size:"lg"}),e]})}function vp(e){return q(n=>yp(n),{onError:n=>we(n,e)})}function yp(e){return F.post("secure/custom-domain/authorize/store",e).then(n=>n.data)}function kp(){const{trans:e}=H();return q(n=>xp(n),{onSuccess:n=>{Y.positive(e(h("\u201C:domain\u201D connected",{values:{domain:n.domain.host}}))),W.invalidateQueries(X("custom-domain"))},onError:n=>$e(n)})}function xp(e){return F.post("custom-domain",e).then(n=>n.data)}function wp({showGlobalField:e}){const{close:n}=K(),a=J(),r=vp(a),s=fi(),o=kp(),[l,c]=f.exports.useState({isLoading:!1,currentStep:pe.Host,host:"",serverIp:""}),d=()=>{c({...l,isLoading:!0})},p=()=>new Promise(y=>{s.mutate({host:l.host},{onSuccess:()=>{y({status:"success",newState:{validationFailReason:void 0}})},onError:w=>{var x;y({status:"error",newState:{validationFailReason:(x=w.response)==null?void 0:x.data.failReason}})}})}),m=()=>new Promise(y=>{r.mutate(a.getValues(),{onSuccess:w=>{y({status:"success",newState:{host:a.getValues().host,serverIp:w.serverIp}})},onError:()=>{y({status:"error"})}})}),b=l.currentStep!==pe.Host;return{form:a,state:l,goToNextStep:async()=>{if(l.currentStep===pe.Host){d();const y=await m();c({...l,...y.newState,isLoading:!1,currentStep:y.status==="success"?pe.Info:pe.Host})}else if(l.currentStep===pe.Info||l.currentStep===pe.ValidationFailed){d();const y=await p(),w=y.status==="success"?pe.Finalize:pe.ValidationFailed;c({...l,...y.newState,isLoading:!1,currentStep:w}),w===pe.Finalize&&o.mutate(a.getValues(),{onSettled:()=>{n()}})}},hasPreviousStep:b,goToPreviousStep:()=>{!b||l.isLoading||(l.currentStep===pe.Info?c({...l,currentStep:pe.Host}):l.currentStep===pe.ValidationFailed&&c({...l,currentStep:pe.Info}))},showGlobalField:e}}function Cp(){return u("div",{children:[t(yr,{message:t(i,{message:"Connecting domain..."})}),t("div",{className:"text-muted mt-10 text-xs",children:t(i,{message:"Don't close this window until domain is connected."})})]})}function Sp({showGlobalField:e}){const{close:n,formId:a}=K(),r=wp({showGlobalField:e}),s=Np(r.state.currentStep);return u(G,{children:[t(Q,{children:t(i,{message:"Connect domain"})}),t(j,{children:t(he,{form:r.form,id:a,onSubmit:()=>{r.goToNextStep()},children:t(s,{stepper:r})})}),u(Z,{startAction:t(S,{variant:"text",onClick:()=>{n()},children:t(i,{message:"Cancel"})}),children:[r.hasPreviousStep&&t(S,{startIcon:t(kn,{}),color:"primary",variant:"text",onClick:()=>{r.goToPreviousStep()},disabled:r.state.isLoading,children:t(i,{message:"Previous"})}),t(S,{variant:"flat",color:"primary",type:"submit",form:a,endIcon:t(Vt,{}),disabled:r.state.isLoading,children:t(i,{message:"Next"})})]})]})}function Np(e){switch(e){case pe.Host:return fp;case pe.Info:return hp;case pe.ValidationFailed:return bp;case pe.Finalize:return Cp}}const Qr=pp.map(e=>e.key==="actions"?{...e,body:n=>t(ie,{resource:n,action:"delete",children:t(pi,{domain:n})})}:e);function Ip({forCurrentUser:e}){const{user:n}=oe(),{workspaceId:a}=Ne(),{filters:r,columns:s}=f.exports.useMemo(()=>{const l=e?Qr.filter(d=>d.key!=="user_id"):Qr;return{filters:e?Kr.filter(d=>d.key!=="user_id"):Kr,columns:l}},[e]),o=e?n==null?void 0:n.id:"";return t(xt,{enableSelection:!1,endpoint:"custom-domain",queryParams:{userId:o,workspaceId:a,with:"user"},title:t(i,{message:"Branded domains"}),headerContent:t(Dp,{}),filters:r,columns:s,actions:t(Lp,{}),emptyStateMessage:t(cp,{})})}function Lp(){const{hasPermission:e}=oe();return t(ie,{resource:"customDomain",action:"create",children:u(T,{type:"modal",children:[t(ct,{children:t(i,{message:"Connect domain"})}),t(Sp,{showGlobalField:e("admin")})]})})}function Dp(){return t(Ut,{body:t(i,{message:"Create trusted links with your own branded domains. Once connected, you can set the domain as default or only use it for specific links."})})}const Vn=[{name:"facebook",type:"number",docsUrl:"https://www.facebook.com/business/help/952192354843755?id=1205376682832142"},{name:"twitter",type:"number",docsUrl:"https://business.twitter.com/en/help/campaign-measurement-and-analytics/conversion-tracking-for-websites.html"},{name:"google-tag-manager",type:"text",pattern:"GTM-[a-zA-Z0-9]+",docsUrl:"https://tagmanager.google.com"},{name:"google-analytics",type:"text",docsUrl:"https://analytics.google.com"},{name:"adwords",type:"number",docsUrl:"https://ads.google.com"},{name:"bing",type:"number",docsUrl:"https://about.ads.microsoft.com/en-us/solutions/tools/universal-event-tracking"},{name:"pinterest",type:"number",docsUrl:"https://help.pinterest.com/en/business/article/track-conversions-with-pinterest-tag"},{name:"linkedin",type:"text",docsUrl:"https://www.linkedin.com/help/lms/answer/a418880/add-the-linkedin-insight-tag-to-your-website"},{name:"quora",type:"text",pattern:"[a-z0-9]+",docsUrl:"https://quoraadsupport.zendesk.com/hc/en-us/articles/115010303387-About-the-Quora-Pixel"},{name:"adroll",type:"text",docsUrl:"https://help.adroll.com/hc/en-us/articles/211846018-What-is-the-AdRoll-Pixel"},{name:"nexus-segment",type:"text",docsUrl:"https://segment.com/catalog/integrations/appnexus"},{name:"custom",type:"text"}],Pp=O(t("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"}),"TuneOutlined"),$p=O(t("path",{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"}),"HelpOutlineOutlined");function gi({formId:e,form:n,onSubmit:a}){const{watch:r}=n,s=r("type"),o=Vn.find(l=>l.name===s);return u(he,{id:e,form:n,onSubmit:a,children:[t(z,{autoFocus:!0,required:!0,name:"name",label:t(i,{message:"Name"}),className:"mb-24"}),t(ze,{name:"type",selectionMode:"single",className:"mb-24",label:t(i,{message:"Type"}),description:o!=null&&o.docsUrl?u("div",{className:"flex items-center gap-6",children:[t($p,{size:"sm"}),t("a",{"data-testid":"pixel-docs-link",href:o.docsUrl,target:"_blank",rel:"noreferrer",className:"underline",children:t(i,{message:"More information"})})]}):null,children:Vn.map(l=>t(A,{capitalizeFirst:!0,value:l.name,startIcon:l.docsUrl?t(ot,{url:l.docsUrl}):t(Pp,{size:"xs"}),children:l.name},l.name))}),s!=="custom"&&t(z,{required:!0,pattern:o==null?void 0:o.pattern,type:(o==null?void 0:o.type)==="number"?"number":"text",name:"pixel_id",label:t(i,{message:"Pixel ID"})}),s==="custom"&&t(Mp,{})]})}function Mp(){return u(f.exports.Fragment,{children:[t(z,{name:"head_code",label:t(i,{message:"Custom code for page head"}),className:"mb-24",inputElementType:"textarea",rows:5}),t(z,{name:"body_code",label:t(i,{message:"Custom code for page body"}),inputElementType:"textarea",rows:5})]})}function _p(e,n){const{trans:a}=H();return q(r=>Rp(e,r),{onSuccess:()=>{Y.positive(a(h("Pixel updated"))),W.invalidateQueries(X("tp"))},onError:r=>we(r,n)})}function Rp(e,n){return F.put(`tp/${e}`,n).then(a=>a.data)}function Ap({pixel:e}){const n=J({defaultValues:{name:e.name,type:e.type,pixel_id:e.pixel_id,head_code:e.head_code,body_code:e.body_code}}),{formId:a,close:r}=K(),s=_p(e.id,n);return u(G,{children:[t(Q,{children:t(i,{message:"Update \u201C:name\u201C",values:{name:e.name}})}),t(j,{children:t(gi,{formId:a,form:n,onSubmit:o=>{s.mutate(o,{onSuccess:()=>{r()}})}})}),u(Z,{children:[t(S,{variant:"text",onClick:()=>{r()},children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",type:"submit",form:a,disabled:s.isLoading,children:t(i,{message:"Update"})})]})]})}const Xr=[{key:"name",allowsSorting:!0,header:()=>t(i,{message:"Name"}),body:e=>e.name},{key:"type",allowsSorting:!0,header:()=>t(i,{message:"Type"}),body:e=>{var a;const n=(a=Vn.find(r=>r.name===e.type))==null?void 0:a.docsUrl;return t("div",{children:u("div",{className:"flex items-center gap-10",children:[n?t(ot,{url:n}):null,n?t("a",{href:n,target:"_blank",rel:"noreferrer",className:Tt,children:e.type}):e.type]})})}},{key:"user_id",allowsSorting:!0,header:()=>t(i,{message:"Owner"}),body:e=>e.user?t(Lt,{image:e.user.avatar,label:e.user.display_name,description:e.user.email}):""},{key:"pixel_id",header:()=>t(i,{message:"Pixel ID"}),body:e=>e.pixel_id},{key:"updated_at",allowsSorting:!0,header:()=>t(i,{message:"Last updated"}),body:e=>e.updated_at?t(Je,{date:e.updated_at}):""},{key:"actions",header:()=>t(i,{message:"Actions"}),hideHeader:!0,align:"end",body:e=>t(ie,{resource:e,action:"update",children:u(T,{type:"modal",children:[t(R,{className:"text-muted",children:t(je,{})}),t(Ap,{pixel:e})]})})}],zp=""+new URL("location-tracking.0df79a5f.svg",import.meta.url).href,Zr=[new ee({type:B.Select,key:"type",label:h("Type"),description:h("Type of the pixel"),options:Vn.map((e,n)=>({key:e.name,value:e.name,label:h(e.name)}))}),new Ct({description:h("Date pixel was created")}),new St({description:h("Date pixel was last updated")}),new ee({type:B.SelectModel,model:Nt,key:"user_id",label:h("Owner"),description:h("User pixel belongs to")})];function Ep(e){const{trans:n}=H();return q(a=>Tp(a),{onSuccess:()=>{Y.positive(n(h("Pixel created"))),W.invalidateQueries(X("tp"))},onError:a=>we(a,e)})}function Tp(e){return F.post("tp",e).then(n=>n.data)}function Fp(){const e=J({defaultValues:{type:"facebook"}}),{formId:n,close:a}=K(),r=Ep(e);return u(G,{children:[t(Q,{children:t(i,{message:"Create pixel"})}),t(j,{children:t(gi,{formId:n,form:e,onSubmit:s=>{r.mutate(s,{onSuccess:()=>{a()}})}})}),u(Z,{children:[t(S,{variant:"text",onClick:()=>{a()},children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",type:"submit",form:n,disabled:r.isLoading,children:t(i,{message:"Create"})})]})]})}function Vp({forCurrentUser:e}){const{user:n}=oe(),{workspaceId:a}=Ne(),{filters:r,columns:s}=f.exports.useMemo(()=>{const l=e?Xr.filter(d=>d.key!=="user_id"):Xr;return{filters:e?Zr.filter(d=>d.key!=="user_id"):Zr,columns:l}},[e]),o=e?n==null?void 0:n.id:"";return t(xt,{endpoint:"tp",queryParams:{userId:o,with:"user",workspaceId:a},title:t(i,{message:"Tracking pixels"}),filters:r,columns:s,headerContent:t(Bp,{}),actions:t(Op,{}),selectedActions:t(ie,{resource:"trackingPixel",action:"delete",children:t(wt,{})}),emptyStateMessage:t(dt,{image:zp,title:t(i,{message:"No tracking pixels have been added yet"}),filteringTitle:t(i,{message:"No matching tracking pixels"})})})}function Op(){return t(ie,{resource:"trackingPixel",action:"create",children:u(T,{type:"modal",children:[t(ct,{children:t(i,{message:"Add pixel"})}),t(Fp,{})]})})}function Bp(){return t(Ut,{body:t(i,{message:"Add third party tracking integration to your links using pixels or custom code snippet."})})}function Up(e){return F.get(`custom-pages/${e}`).then(n=>n.data)}function Hp(){const{pageId:e}=Ke();return Ee(["custom-pages",e],()=>Up(e),{enabled:!!e})}const Wp=ue.lazy(()=>Ga(()=>import("./text-editor.da31ac51.js"),["text-editor.da31ac51.js","text-editor.b603c7db.css","main.724dba5a.js","main.7d8afbcb.css","format.5298ab92.js","Edit.d2871342.js","sticky-sentinel.59da00d3.js","UnfoldLess.20989fb7.js"],import.meta.url));function Jr({allowSlugEditing:e=!0,endpoint:n}){const{data:a,isFetched:r,fetchStatus:s}=Hp(),o=!r&&s!=="idle",l=J();return f.exports.useEffect(()=>{a!=null&&a.page&&l.reset(a.page)},[l,a==null?void 0:a.page]),t(f.exports.Suspense,{fallback:t(Qa,{}),children:t("div",{className:"min-h-full",children:!o&&t(Wp,{page:a==null?void 0:a.page,allowSlugEditing:e,endpoint:n})})})}const es=e=>{const n=e.customPages.types.length>1?[new ee({type:B.Select,key:"type",label:h("Type"),description:h("Type of the page"),defaultValue:"default",options:e.customPages.types.map(a=>({value:a.type,label:a.label,key:a.type}))})]:[];return[new ee({type:B.SelectModel,model:Nt,key:"user_id",label:h("User"),description:h("User page was created by")}),...n,new Ct({description:h("Date page was created")}),new St({description:h("Date page was last updated")})]},bi=[{key:"slug",allowsSorting:!0,header:()=>t(i,{message:"Slug"}),body:e=>t(ge,{target:"_blank",to:`/pages/${e.slug}`,className:Tt,children:e.slug})},{key:"user_id",allowsSorting:!0,header:()=>t(i,{message:"Owner"}),body:e=>e.user&&t(Lt,{image:e.user.avatar,label:e.user.display_name,description:e.user.email})},{key:"type",header:()=>t(i,{message:"Type"}),body:e=>t(i,{message:e.type}),width:"w-1"},{key:"updated_at",allowsSorting:!0,header:()=>t(i,{message:"Last updated"}),body:e=>t(Je,{date:e.updated_at}),width:"w-1"},{key:"actions",header:()=>t(i,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-1",body:e=>t(R,{size:"md",className:"text-muted",elementType:ge,to:`${e.id}/edit`,children:t(je,{})})}],Gp=""+new URL("articles.8bfd9f17.svg",import.meta.url).href;function qp(e,n){const{trans:a}=H();return q(r=>Kp(e,r),{onSuccess:()=>{Y.positive(a(h("Page options updated"))),W.invalidateQueries(X("link-page"))},onError:r=>we(r,n)})}function Kp(e,n){return F.put(`link-page/${e}`,{meta:n}).then(a=>a.data)}function jp({page:e}){return u(T,{type:"modal",children:[t(xe,{label:t(i,{message:"Page options"}),children:t(R,{className:"text-muted",children:t(ei,{})})}),t(Yp,{page:e})]})}function Yp({page:e}){var o,l;const{formId:n,close:a}=K(),r=J({defaultValues:{hideFooter:Boolean((o=e.meta)==null?void 0:o.hideFooter),hideNavbar:Boolean((l=e.meta)==null?void 0:l.hideNavbar)}}),s=qp(e.id,r);return u(G,{size:"sm",children:[t(Q,{children:t(i,{message:"Link page options"})}),t(j,{children:u(he,{id:n,form:r,onSubmit:c=>{s.mutate(c,{onSuccess:a})},children:[t(ht,{className:"mb-24",name:"hideNavbar",description:t(i,{message:"Whether navbar should be hidden on this link page."}),children:t(i,{message:"Hide navbar"})}),t(ht,{name:"hideFooter",description:t(i,{message:"Whether footer should be hidden on this link page."}),children:t(i,{message:"Hide footer"})})]})}),u(Z,{children:[t(S,{variant:"text",onClick:()=>a(),children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",type:"submit",form:n,disabled:s.isLoading,children:t(i,{message:"Save"})})]})]})}const Qp={...bi[4],body:e=>u(f.exports.Fragment,{children:[t(jp,{page:e}),t(ie,{resource:e,action:"update",children:t(xe,{label:t(i,{message:"Edit page"}),children:t(R,{size:"md",className:"text-muted",elementType:ge,to:`${e.id}/edit`,children:t(je,{})})})})]})},ts=[...bi.filter(e=>e.key!=="actions"&&e.key!=="type"),Qp];function Xp({forCurrentUser:e}){const n=f.exports.useContext(Vl),{user:a}=oe(),{workspaceId:r}=Ne(),{filters:s,columns:o}=f.exports.useMemo(()=>{const c=e?ts.filter(p=>p.key!=="user_id"):ts;return{filters:e?es(n).filter(p=>p.key!=="user_id"):es(n),columns:c}},[e,n]),l=e?a==null?void 0:a.id:"";return t(xt,{endpoint:"link-page",title:t(i,{message:"Link pages"}),filters:s,columns:o,headerContent:t(Jp,{}),queryParams:{userId:l,with:"user",workspaceId:r},actions:t(Zp,{}),selectedActions:t(ie,{resource:"customPage",action:"delete",children:t(wt,{})}),emptyStateMessage:t(dt,{image:Gp,title:t(i,{message:"No link pages have been created yet"}),filteringTitle:t(i,{message:"No matching link pages"})})})}function Zp(){return t(ie,{resource:"customPage",action:"create",children:t(ct,{elementType:ge,to:"new",children:t(i,{message:"New page"})})})}function Jp(){return t(Ut,{body:t(i,{message:"Show a transitional page with fully custom markup. Users who visit the short url will briefly see the page before being redirected to destination url."})})}const eh=""+new URL("preferences-popup.824a74c6.svg",import.meta.url).href,vi=O(t("path",{stroke:"#E0E0E0",d:"M24,44c-7.168,0-13-5.816-13-12.971C11,24,24,4,24,4s13,20,13,27.029C37,38.184,31.168,44,24,44z"})),ns=[{key:"name",allowsSorting:!0,header:()=>t(i,{message:"Name"}),body:e=>e.name},{key:"message",allowsSorting:!0,header:()=>t(i,{message:"Message"}),body:e=>e.message},{key:"btn_text",allowsSorting:!0,header:()=>t(i,{message:"Button text"}),body:e=>e.btn_text},{key:"color",header:()=>t(i,{message:"Color"}),body:e=>t(vi,{viewBox:"0 0 48 48",className:"icon-lg",style:{fill:e.colors["bg-color"]}})},{key:"user_id",allowsSorting:!0,header:()=>t(i,{message:"Owner"}),body:e=>e.user?t(Lt,{image:e.user.avatar,label:e.user.display_name,description:e.user.email}):""},{key:"updated_at",allowsSorting:!0,header:()=>t(i,{message:"Last updated"}),body:e=>e.updated_at?t(Je,{date:e.updated_at}):""},{key:"actions",header:()=>t(i,{message:"Actions"}),hideHeader:!0,align:"end",body:e=>t(ie,{resource:e,action:"update",children:t(R,{className:"text-muted",elementType:ge,to:`${e.id}/edit`,children:t(je,{})})})}],yi=[{key:"default",label:h("Default")},{key:"full-width",label:h("Full width")},{key:"rounded",label:h("Rounded")},{key:"pill",label:h("Pill")}],ki=[{key:"top-left",label:h("Top left")},{key:"top-right",label:h("Top right")},{key:"bottom-left",label:h("Bottom left")},{key:"bottom-right",label:h("Bottom right")}],th=[{key:"bg-color",label:h("Background color")},{key:"text-color",label:h("Text color")},{key:"btn-bg-color",label:h("Button background")},{key:"btn-text-color",label:h("Button text")},{key:"label-bg-color",label:h("Label background")},{key:"label-color",label:h("Label text")}],as=[new ee({type:B.Select,key:"theme",label:h("Theme"),description:h("Theme for the overlay"),defaultValue:"default",options:yi.map(e=>({key:e.key,value:e.key,label:e.label}))}),new ee({type:B.Select,key:"position",label:h("Position"),description:h("Position for the overlay"),defaultValue:"bottom-left",options:ki.map(e=>({key:e.key,value:e.key,label:e.label}))}),new Ct({description:h("Date overlay was created")}),new St({description:h("Date overlay was last updated")}),new ee({type:B.SelectModel,model:Nt,key:"user_id",label:h("Owner"),description:h("User overlay belongs to")})];function nh({forCurrentUser:e}){const{user:n}=oe(),{workspaceId:a}=Ne(),{filters:r,columns:s}=f.exports.useMemo(()=>{const l=e?ns.filter(d=>d.key!=="user_id"):ns;return{filters:e?as.filter(d=>d.key!=="user_id"):as,columns:l}},[e]),o=e?n==null?void 0:n.id:"";return t(xt,{endpoint:"link-overlay",queryParams:{userId:o,with:"user",workspaceId:a},title:t(i,{message:"Call-to-action overlays"}),headerContent:t(ah,{}),filters:r,columns:s,actions:t(rh,{}),selectedActions:t(ie,{resource:"linkOverlay",action:"delete",children:t(wt,{})}),emptyStateMessage:t(dt,{image:eh,title:t(i,{message:"No overlays have been added yet"}),filteringTitle:t(i,{message:"No matching overlays"})})})}function ah(){return t(Ut,{body:t(i,{message:"Display fully customizable, non-intrusive overlay with a message and call-to-action button over destination website."})})}function rh(){return t(ie,{resource:"linkOverlay",action:"create",children:t(ct,{to:"new",elementType:ge,children:t(i,{message:"Add overlay"})})})}function sh(e){const{trans:n}=H();return q(a=>oh(a),{onSuccess:()=>{Y.positive(n(h("Overlay created"))),W.invalidateQueries(X("link-overlay"))},onError:a=>we(a,e)})}function oh(e){return F.post("link-overlay",e).then(n=>n.data)}const Cn=ue.createContext(null);function xi(e){const{size:n="md",children:a,className:r,isLazy:s,overflow:o="overflow-hidden"}=e,l=f.exports.useRef([]),c=f.exports.useId(),[d,p]=We(e.selectedTab,e.defaultSelectedTab||0,e.onTabChange),m=f.exports.useMemo(()=>({selectedTab:d,setSelectedTab:p,tabsRef:l,size:n,isLazy:s,id:c}),[d,c,s,p,n]);return t(Cn.Provider,{value:m,children:t("div",{className:D(r,o,"max-w-full"),children:a})})}function ih(){const{tabsRef:e,selectedTab:n}=f.exports.useContext(Cn),[a,r]=f.exports.useState({width:void 0,transform:void 0,className:void 0});return Ua(()=>{if(n!=null&&e.current){const s=e.current[n];r(o=>({width:`${s.offsetWidth}px`,transform:`translateX(${s.offsetLeft}px)`,className:o.width===void 0?"":"transition-all"}))}},[r,n,e]),t("div",{className:D("absolute bottom-0 left-0 h-2 bg-primary",a.className),role:"presentation",style:{width:a.width,transform:a.transform}})}function wi({children:e,center:n,expand:a,className:r}){const s=f.exports.Children.toArray(e);return t(Hn,{children:u("div",{className:D("flex relative max-w-full overflow-auto border-b",r),role:"tablist","aria-orientation":"horizontal",children:[s.map((o,l)=>f.exports.isValidElement(o)?f.exports.cloneElement(o,{index:l,className:D(o.props.className,a&&"flex-auto",n&&l===0&&"ml-auto",n&&l===s.length-1&&"mr-auto")}):null),t(ih,{})]})})}function tn({index:e,className:n,isDisabled:a,children:r,padding:s,elementType:o="button",to:l,relative:c}){const{selectedTab:d,setSelectedTab:p,tabsRef:m,size:b="md",id:g}=f.exports.useContext(Cn),v=e===d,y=ft(),w=s||(b==="sm"?"px-12":"px-18"),x=D("tracking-wide overflow-hidden capitalize text-sm flex items-center justify-center outline-none transition-colors","focus-visible:ring focus-visible:ring-2 ring-inset rounded",lh({isDisabled:a,isSelected:v}),n,b==="md"&&`${w} h-48`,b==="sm"&&`${w} h-32`,!a&&"cursor-pointer"),k=N=>{switch(N.key){case"ArrowLeft":y.focusPrevious();break;case"ArrowRight":y.focusNext();break;case"Home":y.focusFirst();break;case"End":y.focusLast();break}},C=v?0:-1;return t(o,{disabled:a,id:`${g}-${e}-tab`,"aria-controls":`${g}-${e}-tabpanel`,type:"button",role:"tab","aria-selected":v,tabIndex:a?void 0:C,onKeyDown:k,onClick:()=>{p(e)},to:l,relative:c,className:x,ref:N=>{m.current&&N&&(m.current[e]=N)},children:r})}function lh({isDisabled:e,isSelected:n}){return e?"text-disabled cursor-default":n?"text-primary":"text-muted hover:text-main"}function Ci({children:e,className:n}){const{selectedTab:a,isLazy:r}=f.exports.useContext(Cn),s=f.exports.Children.toArray(e);let o;return r?o=f.exports.cloneElement(s[a],{index:a}):o=s.map((l,c)=>{if(f.exports.isValidElement(l)){const d=c===a;return f.exports.cloneElement(l,{index:c,"aria-hidden":!d,className:d?l.props.className:D(l.props.className,"hidden")})}return null}),t("div",{className:n,children:o})}function nn({className:e,children:n,index:a,...r}){const{id:s}=f.exports.useContext(Cn),[o,l]=f.exports.useState(0),c=f.exports.useRef(null);return Ua(()=>{if(c!=null&&c.current){const d=()=>{const m=ja(c.current,{tabbable:!0});l(m.nextNode()?void 0:0)};d();const p=new MutationObserver(d);return p.observe(c.current,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabIndex","disabled"]}),()=>{p.disconnect()}}},[c]),t("div",{tabIndex:o,ref:c,id:`${s}-${a}-tabpanel`,"aria-labelledby":`${s}-${a}-tab`,className:D(e,"focus-visible:outline-primary-light"),role:"tabpanel",...r,children:n})}function ch(){return u("div",{className:"bg-card h-full overflow-hidden",children:[u("div",{className:"navbar flex items-center bg-alt h-40 w-full",children:[t("div",{className:"os-button w-20 h-20 rounded-full ml-14",style:{background:"#d7665d"}}),t("div",{className:"os-button w-20 h-20 rounded-full ml-14",style:{background:"#deab54"}}),t("div",{className:"os-button w-20 h-20 rounded-full ml-14",style:{background:"#6fb54c"}})]}),u("div",{className:"page-body p-24",children:[u("div",{className:"top-row flex items-center h-60 bg-alt p-10 mb-24",children:[t("div",{className:"circle w-40 h-40 rounded-full mr-auto bg-disabled-bg"}),t("div",{className:"line w-1/6 h-20 rounded bg-disabled-bg ml-14"}),t("div",{className:"line w-1/6 h-20 rounded bg-disabled-bg ml-14"}),t("div",{className:"line w-1/6 h-20 rounded bg-disabled-bg ml-14"})]}),u("div",{className:"middle-row flex items-center justify-center flex-col h-[260px] bg-alt my-24",children:[t("div",{className:"line rounded h-36 mb-20 w-3/5 bg-disabled-bg"}),t("div",{className:"line rounded h-14 mb-4 w-1/2 bg-disabled-bg/5"}),t("div",{className:"line rounded h-14 mb-4 w-1/2 bg-disabled-bg/5"}),t("div",{className:"line rounded h-14 mb-4 w-1/2 bg-disabled-bg/5"})]}),u("div",{className:"flex-container flex",children:[u("div",{className:"left w-1/3",children:[t("div",{className:"rect h-144 bg-disabled-bg/5 mb-6"}),t("div",{className:"line fat-line h-36 mb-10 rounded bg-disabled-bg/5"}),t("div",{className:"line mb-10 h-20 rounded bg-disabled-bg"}),t("div",{className:"line mb-10 h-20 rounded bg-disabled-bg"}),t("div",{className:"separator h-1 bg-divider my-24"}),t("div",{className:"rect h-144 bg-disabled-bg/5 mb-10"}),t("div",{className:"line mb-10 h-20 rounded bg-disabled-bg"}),t("div",{className:"rect h-144 bg-disabled-bg/5 mb-6"})]}),u("div",{className:"right w-2/3 pl-24",children:[t("div",{className:"rect h-288 mb-32 bg-disabled-bg/5"}),t("div",{className:"line mb-10 h-20 rounded bg-disabled-bg"}),t("div",{className:"line fat-line h-36 mb-10 rounded bg-disabled-bg/5"}),t("div",{className:"line mb-10 h-20 rounded bg-disabled-bg"}),t("div",{className:"separator h-1 bg-divider my-24"}),t("div",{className:"line mb-10 h-20 rounded bg-disabled-bg"}),t("div",{className:"rect h-288 mb-32 bg-disabled-bg/5"})]})]})]})]})}function Ht(){return(Ht=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function ma(e,n){if(e==null)return{};var a,r,s={},o=Object.keys(e);for(r=0;r<o.length;r++)n.indexOf(a=o[r])>=0||(s[a]=e[a]);return s}function mn(e){var n=f.exports.useRef(e),a=f.exports.useRef(function(r){n.current&&n.current(r)});return n.current=e,a.current}var pn=function(e,n,a){return n===void 0&&(n=0),a===void 0&&(a=1),e>a?a:e<n?n:e},an=function(e){return"touches"in e},Ea=function(e){return e&&e.ownerDocument.defaultView||self},rs=function(e,n,a){var r=e.getBoundingClientRect(),s=an(n)?function(o,l){for(var c=0;c<o.length;c++)if(o[c].identifier===l)return o[c];return o[0]}(n.touches,a):n;return{left:pn((s.pageX-(r.left+Ea(e).pageXOffset))/r.width),top:pn((s.pageY-(r.top+Ea(e).pageYOffset))/r.height)}},ss=function(e){!an(e)&&e.preventDefault()},Si=ue.memo(function(e){var n=e.onMove,a=e.onKey,r=ma(e,["onMove","onKey"]),s=f.exports.useRef(null),o=mn(n),l=mn(a),c=f.exports.useRef(null),d=f.exports.useRef(!1),p=f.exports.useMemo(function(){var v=function(x){ss(x),(an(x)?x.touches.length>0:x.buttons>0)&&s.current?o(rs(s.current,x,c.current)):w(!1)},y=function(){return w(!1)};function w(x){var k=d.current,C=Ea(s.current),L=x?C.addEventListener:C.removeEventListener;L(k?"touchmove":"mousemove",v),L(k?"touchend":"mouseup",y)}return[function(x){var k=x.nativeEvent,C=s.current;if(C&&(ss(k),!function(N,_){return _&&!an(N)}(k,d.current)&&C)){if(an(k)){d.current=!0;var L=k.changedTouches||[];L.length&&(c.current=L[0].identifier)}C.focus(),o(rs(C,k,c.current)),w(!0)}},function(x){var k=x.which||x.keyCode;k<37||k>40||(x.preventDefault(),l({left:k===39?.05:k===37?-.05:0,top:k===40?.05:k===38?-.05:0}))},w]},[l,o]),m=p[0],b=p[1],g=p[2];return f.exports.useEffect(function(){return g},[g]),t("div",{...Ht({},r,{onTouchStart:m,onMouseDown:m,className:"react-colorful__interactive",ref:s,onKeyDown:b,tabIndex:0,role:"slider"})})}),kr=function(e){return e.filter(Boolean).join(" ")},Ni=function(e){var n=e.color,a=e.left,r=e.top,s=r===void 0?.5:r,o=kr(["react-colorful__pointer",e.className]);return t("div",{className:o,style:{top:100*s+"%",left:100*a+"%"},children:t("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:n}})})},ve=function(e,n,a){return n===void 0&&(n=0),a===void 0&&(a=Math.pow(10,n)),Math.round(a*e)/a},dh=function(e){return fh(Ta(e))},Ta=function(e){return e[0]==="#"&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?ve(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:e.length===8?ve(parseInt(e.substring(6,8),16)/255,2):1}},uh=function(e){return hh(ph(e))},mh=function(e){var n=e.s,a=e.v,r=e.a,s=(200-n)*a/100;return{h:ve(e.h),s:ve(s>0&&s<200?n*a/100/(s<=100?s:200-s)*100:0),l:ve(s/2),a:ve(r,2)}},Fa=function(e){var n=mh(e);return"hsl("+n.h+", "+n.s+"%, "+n.l+"%)"},ph=function(e){var n=e.h,a=e.s,r=e.v,s=e.a;n=n/360*6,a/=100,r/=100;var o=Math.floor(n),l=r*(1-a),c=r*(1-(n-o)*a),d=r*(1-(1-n+o)*a),p=o%6;return{r:ve(255*[r,c,l,l,d,r][p]),g:ve(255*[d,r,r,c,l,l][p]),b:ve(255*[l,l,d,r,r,c][p]),a:ve(s,2)}},Pn=function(e){var n=e.toString(16);return n.length<2?"0"+n:n},hh=function(e){var n=e.r,a=e.g,r=e.b,s=e.a,o=s<1?Pn(ve(255*s)):"";return"#"+Pn(n)+Pn(a)+Pn(r)+o},fh=function(e){var n=e.r,a=e.g,r=e.b,s=e.a,o=Math.max(n,a,r),l=o-Math.min(n,a,r),c=l?o===n?(a-r)/l:o===a?2+(r-n)/l:4+(n-a)/l:0;return{h:ve(60*(c<0?c+6:c)),s:ve(o?l/o*100:0),v:ve(o/255*100),a:s}},gh=ue.memo(function(e){var n=e.hue,a=e.onChange,r=kr(["react-colorful__hue",e.className]);return ue.createElement("div",{className:r},ue.createElement(Si,{onMove:function(s){a({h:360*s.left})},onKey:function(s){a({h:pn(n+360*s.left,0,360)})},"aria-label":"Hue","aria-valuenow":ve(n),"aria-valuemax":"360","aria-valuemin":"0"},ue.createElement(Ni,{className:"react-colorful__hue-pointer",left:n/360,color:Fa({h:n,s:100,v:100,a:1})})))}),bh=ue.memo(function(e){var n=e.hsva,a=e.onChange,r={backgroundColor:Fa({h:n.h,s:100,v:100,a:1})};return ue.createElement("div",{className:"react-colorful__saturation",style:r},ue.createElement(Si,{onMove:function(s){a({s:100*s.left,v:100-100*s.top})},onKey:function(s){a({s:pn(n.s+100*s.left,0,100),v:pn(n.v-100*s.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+ve(n.s)+"%, Brightness "+ve(n.v)+"%"},ue.createElement(Ni,{className:"react-colorful__saturation-pointer",top:1-n.v/100,left:n.s/100,color:Fa(n)})))}),Ii=function(e,n){if(e===n)return!0;for(var a in e)if(e[a]!==n[a])return!1;return!0},vh=function(e,n){return e.toLowerCase()===n.toLowerCase()||Ii(Ta(e),Ta(n))};function yh(e,n,a){var r=mn(a),s=f.exports.useState(function(){return e.toHsva(n)}),o=s[0],l=s[1],c=f.exports.useRef({color:n,hsva:o});f.exports.useEffect(function(){if(!e.equal(n,c.current.color)){var p=e.toHsva(n);c.current={hsva:p,color:n},l(p)}},[n,e]),f.exports.useEffect(function(){var p;Ii(o,c.current.hsva)||e.equal(p=e.fromHsva(o),c.current.color)||(c.current={hsva:o,color:p},r(p))},[o,e,r]);var d=f.exports.useCallback(function(p){l(function(m){return Object.assign({},m,p)})},[]);return[o,d]}var kh=typeof window<"u"?f.exports.useLayoutEffect:f.exports.useEffect,xh=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},os=new Map,wh=function(e){kh(function(){var n=e.current?e.current.ownerDocument:document;if(n!==void 0&&!os.has(n)){var a=n.createElement("style");a.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,os.set(n,a);var r=xh();r&&a.setAttribute("nonce",r),n.head.appendChild(a)}},[])},Ch=function(e){var n=e.className,a=e.colorModel,r=e.color,s=r===void 0?a.defaultColor:r,o=e.onChange,l=ma(e,["className","colorModel","color","onChange"]),c=f.exports.useRef(null);wh(c);var d=yh(a,s,o),p=d[0],m=d[1],b=kr(["react-colorful",n]);return u("div",{...Ht({},l,{ref:c,className:b}),children:[t(bh,{hsva:p,onChange:m}),t(gh,{hue:p.h,onChange:m,className:"react-colorful__last-control"})]})},Sh={defaultColor:"000",toHsva:dh,fromHsva:function(e){return uh({h:e.h,s:e.s,v:e.v,a:1})},equal:vh},Nh=function(e){return t(Ch,{...Ht({},e,{colorModel:Sh})})},Ih=/^#?([0-9A-F]{3,8})$/i,Lh=function(e){var n=e.color,a=n===void 0?"":n,r=e.onChange,s=e.onBlur,o=e.escape,l=e.validate,c=e.format,d=e.process,p=ma(e,["color","onChange","onBlur","escape","validate","format","process"]),m=f.exports.useState(function(){return o(a)}),b=m[0],g=m[1],v=mn(r),y=mn(s),w=f.exports.useCallback(function(k){var C=o(k.target.value);g(C),l(C)&&v(d?d(C):C)},[o,d,l,v]),x=f.exports.useCallback(function(k){l(k.target.value)||g(o(a)),y(k)},[a,o,l,y]);return f.exports.useEffect(function(){g(o(a))},[a,o]),t("input",{...Ht({},p,{value:c?c(b):b,spellCheck:"false",onChange:w,onBlur:x})})},is=function(e){return"#"+e},Li=function(e){var n=e.prefixed,a=e.alpha,r=ma(e,["prefixed","alpha"]),s=f.exports.useCallback(function(l){return l.replace(/([^0-9A-F]+)/gi,"").substring(0,a?8:6)},[a]),o=f.exports.useCallback(function(l){return function(c,d){var p=Ih.exec(c),m=p?p[1].length:0;return m===3||m===6||!!d&&m===4||!!d&&m===8}(l,a)},[a]);return ue.createElement(Lh,Ht({},r,{escape:s,format:n?is:void 0,process:is,validate:o}))};function Dh({onChange:e,value:n,colors:a}){const r=a.map(s=>{const o=n===s;return t(Et,{onClick:()=>{e==null||e(s)},className:D("relative block flex-shrink-0 w-26 h-26 border rounded",o&&"shadow-md"),style:{backgroundColor:s},children:o&&t("span",{className:"absolute inset-0 m-auto rounded-full w-8 h-8 bg-white"})},s)});return t("div",{className:"flex flex-wrap gap-6",children:r})}const Di=[{color:"rgb(255, 255, 255)",name:h("White")},{color:"rgb(239,245,245)",name:h("Solitude")},{color:"rgb(245,213,174)",name:h("Wheat")},{color:"rgb(253,227,167)",name:h("Cape Honey")},{color:"rgb(242,222,186)",name:h("Milk punch")},{color:"rgb(97,118,75)",name:h("Dingy"),foreground:"rgb(255, 255, 255)"},{color:"rgb(4, 147, 114)",name:h("Aquamarine"),foreground:"rgb(255, 255, 255)"},{color:"rgb(222,245,229)",name:h("Cosmic Latte")},{color:"rgb(233,119,119)",name:h("Geraldine"),foreground:"rgb(90,14,14)"},{color:"rgb(247,164,164)",name:h("Sundown")},{color:"rgb(30,139,195)",name:h("Pelorous"),foreground:"rgb(255, 255, 255)"},{color:"rgb(142,68,173)",name:h("Deep Lilac"),foreground:"rgb(255, 255, 255)"},{color:"rgb(108,74,182)",name:h("Blue marguerite"),foreground:"rgb(255, 255, 255)"},{color:"rgb(139,126,116)",name:h("Americano"),foreground:"rgb(255, 255, 255)"},{color:"rgb(0,0,0)",name:h("Black"),foreground:"rgb(255, 255, 255)"},{color:"rgb(64,66,88)",name:h("Blue zodiac"),foreground:"rgb(255, 255, 255)"},{color:"rgb(101,100,124)",name:h("Comet"),foreground:"rgb(255, 255, 255)"}],Ph=Di.map(({color:e})=>e).slice(0,14);function $h({defaultValue:e,onChange:n,colorPresets:a,showInput:r}){const[s,o]=f.exports.useState(e),l=a||Ph,c=At({size:"sm"});return u("div",{children:[t(Nh,{className:"!w-auto",color:s,onChange:d=>{n==null||n(d),o(d)}}),u("div",{className:"py-20 px-12",children:[l&&t(Dh,{colors:l,onChange:d=>{if(d){const p=Ot(d).toString("hex");n==null||n(p),o(p)}},value:s}),r&&t("div",{className:"pt-20",children:t(Li,{autoComplete:"off",role:"textbox",autoCorrect:"off",spellCheck:"false",required:!0,"aria-label":"Hex color",prefixed:!0,className:c.input,color:s,onChange:d=>{n==null||n(d),o(d)}})})]})]})}function pa({defaultValue:e,onChange:n,hideFooter:a=!1,showInput:r=!0}){const{close:s}=K(),[o,l]=f.exports.useState(e||"");return u(G,{size:"2xs",children:[t($h,{showInput:r,defaultValue:o,onChange:c=>{l(c),n==null||n(c)}}),!a&&u(Z,{dividerTop:!0,children:[t(S,{variant:"text",size:"xs",onClick:()=>{s()},children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",size:"xs",onClick:()=>{s(o)},children:t(i,{message:"Apply"})})]})]})}function Pi({form:e,isLoading:n,onSubmit:a}){return u(he,{form:e,onSubmit:a,className:"flex h-full",children:[t("div",{className:"flex-shrink-0 w-full md:w-288 px-16 md:border-r md:shadow-lg h-full overflow-y-auto",children:u(xi,{children:[u(wi,{expand:!0,children:[t(tn,{children:t(i,{message:"General"})}),t(tn,{children:t(i,{message:"Style"})})]}),u(Ci,{className:"my-24",children:[u(nn,{children:[t(Ah,{}),t(ls,{disabled:n})]}),u(nn,{children:[t(Rh,{}),t(ls,{disabled:n,className:"mt-14"})]})]})]})}),u("div",{className:"flex-auto relative hidden md:block",children:[t(ch,{}),t(zh,{})]})]})}function ls(e){return t(S,{type:"submit",variant:"flat",color:"primary",...e,children:t(i,{message:"Save"})})}function Mh(){return t(bn,{className:"mb-20",name:"colors.bg-image",label:t(i,{message:"Background image"}),diskPrefix:"overlays",showRemoveButton:!0})}function _h({name:e,children:n}){const{watch:a,setValue:r}=Jn(),s=a(`colors.${e}`);return u(T,{currentValue:s,type:"popover",placement:"right",offset:10,onClose:o=>{r(`colors.${e}`,o)},children:[u(Et,{className:"flex items-center gap-10 w-full rounded border text-sm h-54 px-14 mb-10 bg relative hover:bg-hover",children:[t(vi,{viewBox:"0 0 48 48",className:"icon-lg",style:{fill:s}}),t("div",{children:n}),t(Vt,{className:"icon-sm text-muted ml-auto"})]}),t(pa,{defaultValue:s,onChange:o=>{r(`colors.${e}`,o)}})]})}function Rh(){return u(f.exports.Fragment,{children:[t(gn,{children:t(Mh,{})}),th.map(({key:e,label:n})=>t(_h,{name:e,children:t(i,{...n})},e))]})}function Ah(){return u(f.exports.Fragment,{children:[t(z,{name:"name",label:t(i,{message:"Name"}),className:"mb-24",required:!0}),t(ze,{name:"position",selectionMode:"single",label:t(i,{message:"Position"}),className:"mb-24",children:ki.map(e=>t(A,{value:e.key,children:t(i,{...e.label})},e.key))}),t(ze,{name:"theme",selectionMode:"single",label:t(i,{message:"Theme"}),className:"mb-24",children:yi.map(e=>t(A,{value:e.key,children:t(i,{...e.label})},e.key))}),t(z,{name:"message",label:t(i,{message:"Message"}),inputElementType:"textarea",maxLength:200,rows:2,className:"mb-24"}),t(z,{name:"label",label:t(i,{message:"Label"}),maxLength:8,className:"mb-24"}),t(z,{type:"url",name:"btn_link",label:t(i,{message:"Button link"}),className:"mb-24"}),t(z,{name:"btn_text",label:t(i,{message:"Button text"}),maxLength:30,className:"mb-24"})]})}function zh(){const{watch:e}=Jn(),n=e();return t(Ol,{overlay:n})}function Eh(){const{trans:e}=H(),n=yt(),a=J({defaultValues:{position:"bottom-left",theme:"default",label:e(h("Label")),message:e(h("Your message here")),btn_text:e(h("Button text")),btn_link:"https://google.com",colors:{"bg-color":"rgb(61, 75, 101)","text-color":"rgb(255, 255, 255)","label-bg-color":"rgb(255, 255, 255)","label-color":"rgb(0, 0, 0)"}}}),r=sh(a);return t(Pi,{form:a,isLoading:r.isLoading,onSubmit:s=>{r.mutate(s,{onSuccess:()=>n("..",{relative:"path"})})}})}const xr=e=>`link-overlay/${e}`;function Th(e){return Ee([xr(e)],()=>Fh(e))}function Fh(e){return F.get(xr(e)).then(n=>n.data)}function Vh(e,n){const{trans:a}=H();return q(r=>Oh(e,r),{onSuccess:()=>{Y.positive(a(h("Overlay updated"))),W.invalidateQueries(X("link-overlay")),W.invalidateQueries([xr(e)])},onError:r=>we(r,n)})}function Oh(e,n){return F.put(`link-overlay/${e}`,n).then(a=>a.data)}function Bh(){const{overlayId:e}=Ke(),{data:n,isLoading:a,isError:r}=Th(e);return a?t(Qa,{}):r?null:t(Uh,{overlay:n.linkOverlay})}function Uh({overlay:e}){const n=yt(),a=J({defaultValues:{name:e.name,position:e.position,theme:e.theme,label:e.label,message:e.message,btn_text:e.btn_text,btn_link:e.btn_link,colors:e.colors}}),r=Vh(e.id,a);return t(Pi,{form:a,isLoading:r.isLoading,onSubmit:s=>{r.mutate(s,{onSuccess:()=>n("../..",{relative:"path"})})}})}const Hh=""+new URL("marketing.2040a197.svg",import.meta.url).href,cs=[{key:"name",allowsSorting:!0,header:()=>t(i,{message:"Name"}),width:"w-5/6 max-w-200",body:e=>t("a",{className:Tt,href:e.short_url,target:"_blank",rel:"noreferrer",children:e.name})},{key:"clicks_count",allowsSorting:!0,header:()=>t(i,{message:"Clicks"}),body:e=>e.clicks_count?t(Ze,{value:e.clicks_count}):"-"},{key:"domain_id",allowsSorting:!0,header:()=>t(i,{message:"Domain"}),body:e=>t(Wh,{model:e})},{key:"user_id",allowsSorting:!0,header:()=>t(i,{message:"Owner"}),body:e=>e.user?t(Lt,{image:e.user.avatar,label:e.user.display_name,description:e.user.email}):""},{key:"links_count",allowsSorting:!0,header:()=>t(i,{message:"Links"}),body:e=>e.links_count?t(Ze,{value:e.links_count}):"-"},{key:"active",allowsSorting:!0,header:()=>t(i,{message:"Active"}),body:e=>e.active?t(_t,{className:"icon-md text-positive"}):t(qe,{className:"icon-md text-danger"})},{key:"updated_at",allowsSorting:!0,header:()=>t(i,{message:"Last updated"}),body:e=>e.updated_at?t(Je,{date:e.updated_at}):""},{key:"actions",header:()=>t(i,{message:"Actions"}),hideHeader:!0,align:"end",body:e=>u("div",{className:"text-muted",children:[t(xe,{label:t(i,{message:"Clicks report"}),children:t(ge,{to:`${e.id}`,children:t(R,{size:"md",children:t(un,{})})})}),t(vt,{link:e}),t(ie,{resource:e,action:"update",children:t(ge,{to:`${e.id}/edit/content`,children:t(R,{size:"md",children:t(je,{})})})})]})}];function Wh({model:e}){const{data:n}=Bt(),a=ai(n==null?void 0:n.domains);return e.domain_id===0&&a?t(f.exports.Fragment,{children:a}):e.domain_id&&e.domain?t(f.exports.Fragment,{children:et(e.domain.host)}):t(i,{message:"All domains"})}const ds=[new ee({type:B.Select,key:"active",label:h("Status"),description:h("Whether biolink is disabled or not"),defaultValue:"01",defaultOperator:Se.eq,options:[{key:"01",label:h("Enabled"),value:!0},{key:"02",label:h("Disabled"),value:!1}]}),new ee({type:B.Input,inputType:"number",key:"clicks_count",label:h("Clicks count"),description:h("Number of times this biolink was visited"),defaultValue:1,defaultOperator:Se.gte,operators:Tn}),new ee({type:B.Input,inputType:"number",key:"links_count",label:h("Link count"),description:h("Number of links in the biolink"),defaultValue:1,defaultOperator:Se.gte,operators:Tn}),new Ct({description:h("Date biolink was created")}),new St({description:h("Date biolink was last updated")}),new ee({type:B.SelectModel,model:Nt,key:"user_id",label:h("User"),description:h("User biolink was created by")})];function Gh(e){const{trans:n}=H();return q(a=>qh(a),{onSuccess:()=>{Y.positive(n(h("Biolink created"))),W.invalidateQueries(X("biolink"))},onError:a=>we(a,e)})}function qh(e){return F.post("biolink",pr(e)).then(n=>n.data)}function Kh(){const e=yt(),{formId:n,close:a}=K(),{custom_domains:r}=fe(),{verify:s,isVerifying:o}=vn("link_creation"),l=J({defaultValues:{active:!0,hash:Ya(6),domain_id:r!=null&&r.allow_all_option?void 0:0}}),c=Gh(l);return u(G,{size:"md",children:[t(Q,{children:t(i,{message:"Create biolink"})}),t(j,{children:u(he,{form:l,id:n,onBeforeSubmit:()=>{l.clearErrors("hash")},onSubmit:async p=>{await s()&&c.mutate(p,{onSuccess:b=>{a(),e(`${b.biolink.id}/edit`)}})},children:[u("div",{className:"mb-24",children:[t(z,{name:"name",label:t(i,{message:"Name"}),minLength:3,className:"mb-8",autoFocus:!0}),t(ua,{form:l,name:"hash"})]}),t(ur,{name:"domain_id",className:"mb-24"}),t(z,{name:"description",className:"mb-24",label:t(i,{message:"Description"}),inputElementType:"textarea",rows:2}),t(ht,{name:"active",description:t(i,{message:"Whether this biolink is viewable publicly."}),className:"mb-24",children:t(i,{message:"Active"})})]})}),u(Z,{children:[t(S,{variant:"text",onClick:()=>{a()},children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",type:"submit",form:n,disabled:c.isLoading||o,children:t(i,{message:"Create"})})]})]})}function jh({forCurrentUser:e}){const{user:n}=oe(),{workspaceId:a}=Ne(),{filters:r,columns:s}=f.exports.useMemo(()=>{const l=e?cs.filter(d=>d.key!=="user_id"):cs;return{filters:e?ds.filter(d=>d.key!=="user_id"):ds,columns:l}},[e]);f.exports.useEffect(()=>{da()},[]);const o=e?n==null?void 0:n.id:"";return t(xt,{endpoint:"biolink",queryParams:{userId:o,withCount:"links",with:"user,domain",workspaceId:a},title:t(i,{message:"Biolinks"}),headerContent:t(Yh,{}),filters:r,columns:s,actions:t(Qh,{}),selectedActions:t(ie,{resource:"biolink",action:"delete",children:t(wt,{})}),emptyStateMessage:t(dt,{image:Hh,title:t(i,{message:"No biolinks have been created yet"}),filteringTitle:t(i,{message:"No matching biolinks"})})})}function Yh(){return t(Ut,{title:t(i,{message:"Link in bio"}),body:t(i,{message:"Offer multiple choices to your followers when they click on your Biolink. Share all your Social Media profiles, videos, songs, articles and other important links with just one url."})})}function Qh(){return t(ie,{resource:"biolink",action:"create",children:u(T,{type:"modal",children:[t(ct,{children:t(i,{message:"New biolink"})}),t(Kh,{})]})})}const wr=(e,n)=>X(`biolink/${e}`,n);function Xh(){const{biolinkId:e}=Ke();return Ee(wr(e),()=>$i(e),{initialData:Zh(e)})}function $i(e,n){return F.get(`biolink/${e}`,{params:n}).then(a=>a.data)}function Zh(e){var a,r;const n=(r=(a=W.getQueryData(X("biolink"),{exact:!1}))==null?void 0:a.pagination)==null?void 0:r.data.find(s=>s.id===+e);return n?{biolink:n}:void 0}function Jh(){var s;const e=yt(),{biolinkId:n}=Ke(),a=Xh(),r=(s=a.data)==null?void 0:s.biolink;return t(sa,{model:`biolink=${n}`,title:u(on,{size:"xl",className:D(a.isLoading&&"invisible"),children:[t(it,{onSelected:()=>{e("..",{relative:"path"})},children:t(i,{message:"Biolinks"})}),t(it,{className:"first-letter:capitalize",children:t(i,{message:"\u201C:name\u201C clicks",values:{name:r==null?void 0:r.name}})})]}),actions:r&&t(vt,{className:"flex-shrink-0 text-muted",link:r})})}const ef=O(t("path",{d:"m16.66 4.52 2.83 2.83-2.83 2.83-2.83-2.83 2.83-2.83M9 5v4H5V5h4m10 10v4h-4v-4h4M9 15v4H5v-4h4m7.66-13.31L11 7.34 16.66 13l5.66-5.66-5.66-5.65zM11 3H3v8h8V3zm10 10h-8v8h8v-8zm-10 0H3v8h8v-8z"}),"WidgetsOutlined"),tf=O(t("path",{d:"M15 2c-2.71 0-5.05 1.54-6.22 3.78-1.28.67-2.34 1.72-3 3C3.54 9.95 2 12.29 2 15c0 3.87 3.13 7 7 7 2.71 0 5.05-1.54 6.22-3.78 1.28-.67 2.34-1.72 3-3C20.46 14.05 22 11.71 22 9c0-3.87-3.13-7-7-7zM9 20c-2.76 0-5-2.24-5-5 0-1.12.37-2.16 1-3 0 3.87 3.13 7 7 7-.84.63-1.88 1-3 1zm3-3c-2.76 0-5-2.24-5-5 0-1.12.37-2.16 1-3 0 3.86 3.13 6.99 7 7-.84.63-1.88 1-3 1zm4.7-3.3c-.53.19-1.1.3-1.7.3-2.76 0-5-2.24-5-5 0-.6.11-1.17.3-1.7.53-.19 1.1-.3 1.7-.3 2.76 0 5 2.24 5 5 0 .6-.11 1.17-.3 1.7zM19 12c0-3.86-3.13-6.99-7-7 .84-.63 1.87-1 3-1 2.76 0 5 2.24 5 5 0 1.12-.37 2.16-1 3z"}),"AnimationOutlined"),nf=O(t("path",{d:"m15 5-1.41 1.41L15 7.83 17.17 10H8c-2.76 0-5 2.24-5 5v4h2v-4c0-1.65 1.35-3 3-3h9.17L15 14.17l-1.41 1.41L15 17l6-6-6-6z"}),"ShortcutOutlined"),af=O([t("path",{d:"M10 8v6l4.7 2.9.8-1.2-4-2.4V8z"},"0"),t("path",{d:"M17.92 12c.05.33.08.66.08 1 0 3.9-3.1 7-7 7s-7-3.1-7-7 3.1-7 7-7c.7 0 1.37.1 2 .29V4.23c-.64-.15-1.31-.23-2-.23-5 0-9 4-9 9s4 9 9 9 9-4 9-9c0-.34-.02-.67-.06-1h-2.02z"},"1"),t("path",{d:"M20 5V2h-2v3h-3v2h3v3h2V7h3V5z"},"2")],"MoreTimeOutlined");function Cr({title:e,description:n,actions:a,color:r="primary",className:s}){return u("div",{className:D(s,"p-10 rounded border-l-4",r==="positive"&&"bg-positive/focus border-l-positive",r==="warning"&&"bg-warning/focus border-l-warning",r==="danger"&&"bg-danger/focus border-l-danger",r==="primary"&&"bg-primary/focus border-l-primary"),children:[e&&t("div",{className:"text-sm mb-4 font-medium",children:e}),n&&t("div",{className:"text-sm",children:n}),a&&t("div",{className:"mt-14",children:a})]})}const tt=Bl()(Ul((e,n)=>({appearance:null,appearanceIsDirty:!1,setAppearanceIsDirty:a=>{e(r=>{r.appearanceIsDirty=a})},biolink:null,setBiolink:a=>{e(r=>{var s;r.biolink=a,r.appearanceIsDirty||(r.appearance=((s=a.appearance)==null?void 0:s.config)||null)})},updateAppearance(a){e(r=>{r.appearanceIsDirty=!0,r.appearance={...r.appearance,...a}})}})));function Pe(){return tt.getState()}const Va={loadContent:!0};function Wt(){const e=Gt(),n=tt(r=>r.biolink),a=Ee(wr(e,Va),()=>$i(e,Va),{onSuccess:r=>{Pe().setBiolink(r.biolink)}});return{isLoading:a.isLoading,biolink:n,status:a.status,biolinkId:e}}function Gt(){const{biolinkId:e}=Ke();return+e}function Sn(e){Pe().setBiolink(e),W.setQueryData(wr(e.id,Va),{biolink:e})}function qt(){const e=Gt();return q(({item:n,values:a})=>rf(e,n,a),{onSuccess:n=>{Sn(n.biolink)},onError:n=>$e(n,h("Could not update content item"))})}function rf(e,n,a){const r={...a,item_id:n.id,item_model_type:n.model_type};return F.put(`biolink/${e}/content-item`,r).then(s=>s.data)}function sf({link:e}){const n=Ft(),a=Yn(),{close:r,formId:s}=K(),o=J({defaultValues:{activates_at:e.activates_at,expires_at:e.expires_at}}),l=qt(),c=o.watch("activates_at"),d=f.exports.useMemo(()=>c?Ls(c,a):n,[c,n,a]);return u(G,{children:[t(Q,{children:t(i,{message:"Schedule"})}),u(j,{children:[u(he,{id:s,form:o,onSubmit:async p=>{l.mutate({item:e,values:p},{onSuccess:()=>{Y.positive(h("Schedule updated")),r()}})},children:[t(dn,{name:"activates_at",min:n,className:"mb-24",label:t(i,{message:"Start date"}),showCalendarFooter:!0}),t(dn,{name:"expires_at",min:d,className:"mb-24",label:t(i,{message:"End date"}),showCalendarFooter:!0})]}),t(of,{})]}),u(Z,{dividerTop:!0,children:[t(S,{variant:"text",onClick:()=>{r()},children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",type:"submit",form:s,disabled:l.isLoading||!o.formState.isDirty,children:t(i,{message:"Save"})})]})]})}function of(){const e={b:n=>t("span",{className:"font-bold",children:n})};return t(Cr,{description:u(f.exports.Fragment,{children:[t("div",{children:t(i,{message:"Leave <b>start date</b> blank to display this link immediately.",values:e})}),t("div",{children:t(i,{message:"Leave <b>end date</b> blank to display this link forever.",values:e})})]})})}function lf({link:e}){const n=Ft(),{close:a,formId:r}=K(),s=J({defaultValues:{leap_until:e.leap_until}}),o=s.formState.isDirty,l=qt();return u(G,{children:[t(Q,{children:t(i,{message:"Redirect link"})}),u(j,{children:[t(he,{id:r,form:s,onSubmit:async c=>{l.mutate({item:e,values:c},{onSuccess:()=>{Y.positive(h("Redirect link updated")),a()}})},children:t(dn,{required:!0,name:"leap_until",min:n,className:"mb-24",label:t(i,{message:"Redirect until"}),showCalendarFooter:!0})}),t(cf,{})]}),u(Z,{dividerTop:!0,children:[t(S,{variant:"text",onClick:()=>{a()},children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",type:"submit",form:r,disabled:!o||l.isLoading,children:t(i,{message:"Save"})})]})]})}function cf(){return t(Cr,{description:t(i,{message:"Send all visitors straight to this link, instead of your Biolink, until the specified date. After that date, Biolink will resume to showing normally."})})}function df({link:e}){const{close:n,formId:a}=K(),r=J({defaultValues:{image:e.image}}),s=qt(),o=r.formState.isDirty;return u(G,{size:"sm",children:[t(Q,{children:t(i,{message:"Link thumbnail"})}),t(j,{children:t(he,{id:a,form:r,onSubmit:async l=>{s.mutate({item:e,values:l},{onSuccess:()=>{Y.positive(h("Thumbnail updated")),n()}})},children:t(gn,{children:t(bn,{showRemoveButton:!0,name:"image",diskPrefix:"links"})})})}),u(Z,{dividerTop:!0,children:[t(S,{variant:"text",onClick:()=>{n()},children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",type:"submit",form:a,disabled:s.isLoading||!o,children:t(i,{message:"Save"})})]})]})}const uf=["none","bounce","flash","pulse","rubberBand","shakeX","shakeY","headShake","swing","tada","wobble","jello","heartBeat"];function mf({link:e}){const{close:n,formId:a}=K(),r=J({defaultValues:{animation:e.animation}}),s=r.formState.isDirty,o=qt();return f.exports.useEffect(()=>{Ga(()=>Promise.resolve({}),["animate.min.91bc6200.css"],import.meta.url)},[]),u(G,{size:"md",children:[t(Q,{children:t(i,{message:"Link animation"})}),t(j,{children:u(he,{id:a,form:r,onSubmit:async l=>{o.mutate({item:e,values:l},{onSuccess:()=>{Y.positive(h("Animation updated")),n()}})},children:[t(Cr,{className:"mb-24",description:t(i,{message:"Add animation to draw attention to this link. :br Selected animation will repeat five times by default.",values:{br:t("br",{})}})}),t("div",{className:"grid gap-14 grid-cols-[repeat(auto-fill,minmax(95px,1fr))]",children:uf.map((l,c)=>t(pf,{animationName:l},c))})]})}),u(Z,{dividerTop:!0,children:[t(S,{variant:"text",onClick:()=>{n()},children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",type:"submit",form:a,disabled:o.isLoading||!s,children:t(i,{message:"Save"})})]})]})}function pf({animationName:e}){const[n,a]=f.exports.useState(!1),{watch:r,setValue:s}=Jn(),o=e==="none"?null:e,l=r("animation");return t("button",{type:"button",onClick:()=>{s("animation",o,{shouldDirty:!0})},onPointerEnter:()=>{a(!0)},onPointerLeave:()=>{a(!1)},className:D("border border-2 px-10 h-64 uppercase font-medium rounded flex items-center justify-center animate__animated",n&&`animate__${e}`,l===o&&"border-primary"),children:e})}const hf=O(t("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"DragIndicatorOutlined");function ff(){const e=Gt();return q(n=>gf(e,n),{onSuccess:n=>{Sn(n.biolink)},onError:n=>$e(n)})}function gf(e,n){return F.post(`biolink/${e}/content-item/detach`,n).then(a=>a.data)}function bf({item:e}){const n=ff();return u(T,{type:"modal",children:[t(R,{className:"text-muted flex-shrink-0",disabled:n.isLoading,children:t(qe,{})}),t(gt,{isDanger:!0,onConfirm:()=>{n.mutate({item:e})},title:t(i,{message:"Remove item"}),body:t(i,{message:"Are you sure you want to remove this item from the biolink?"}),confirm:t(i,{message:"Remove"})})]})}const Ye=new Map,Te=new Map,vf=new Map,Fe={status:"inactive"};function Ca({e,rect:n,deltaX:a,deltaY:r}){return{rect:n,x:e.clientX,y:e.clientY,deltaX:a!=null?a:0,deltaY:r!=null?r:0,nativeEvent:e}}let Mi=null;function us(e){Mi=e}function yf(e){return{left:e.left,top:e.top,width:e.width,height:e.height}}function _i(e){const n=new IntersectionObserver(a=>{a.forEach(r=>{const{width:s,height:o,left:l,top:c}=r.boundingClientRect,[d,p]=[...e].find(([,b])=>b.ref.current===r.target)||[];if(d==null||p==null)return;const m={width:s,height:o,left:l,top:c};e.set(d,{...p,rect:m})}),n.disconnect()});[...e.values()].forEach(a=>{a.ref.current&&n.observe(a.ref.current)})}function kf({id:e,disabled:n,ref:a,preview:r,hidePreview:s,...o}){const l=f.exports.useRef(null),{addGlobalListener:c,removeAllGlobalListeners:d}=Ds(),p=f.exports.useRef({lastPosition:{x:0,y:0}}).current,m=f.exports.useRef(o);m.current=o,f.exports.useLayoutEffect(()=>(n?Ye.delete(e):Ye.set(e,{...Ye.get(e),id:e,ref:a,type:m.current.type,getData:m.current.getData}),()=>{Ye.delete(e)}),[e,n,m,a]);const b=x=>{vf.forEach(k=>{var C;k.type===((C=Ye.get(e))==null?void 0:C.type)&&x(k)})},g=x=>{var _,V;const k=Ye.get(e),C=a.current,L=!l.current||!p.clickedEl||l.current.contains(p.clickedEl);if(Mi||!C||!k||!L){x.preventDefault(),x.stopPropagation();return}_i(Te),us("drag"),s&&xf(x),x.dataTransfer.effectAllowed="move",p.lastPosition={x:x.clientX,y:x.clientY},p.currentRect=yf(C.getBoundingClientRect());const N=Ca({rect:p.currentRect,e:x});r!=null&&r.current&&r.current(k,I=>{const M=I.getBoundingClientRect(),P=x.currentTarget.getBoundingClientRect();let te=x.clientX-P.x,ke=x.clientY-P.y;(te>M.width||ke>M.height)&&(te=M.width/2,ke=M.height/2);const ne=2*Math.round(P.height/2);I.style.height=`${ne}px`,x.dataTransfer.setDragImage(I,0,0)}),Fe.status="dragging",Fe.dragTargetId=e,a.current&&(a.current.dataset.dragging="true"),(V=(_=m.current).onDragStart)==null||V.call(_,N,k),requestAnimationFrame(()=>{b(I=>{var M;return(M=I.onDragStart)==null?void 0:M.call(I,N,k)})}),c(window,"dragover",v,!0)},v=x=>{var V,I;if(x.preventDefault(),!p.currentRect)return;const k=x.clientX-p.lastPosition.x,C=x.clientY-p.lastPosition.y,L={...p.currentRect,left:p.currentRect.left+k,top:p.currentRect.top+C},N=Ca({rect:L,e:x,deltaX:k,deltaY:C}),_=Ye.get(e);_&&((I=(V=m.current).onDragMove)==null||I.call(V,N,_),b(M=>{var P;return(P=M.onDragMove)==null?void 0:P.call(M,N,_)})),p.lastPosition={x:x.clientX,y:x.clientY},p.currentRect=L};return{draggableProps:{draggable:!n,onDragStart:g,onDragEnd:x=>{var L,N;if(d(),!p.currentRect)return;us(null),ut&&ut.remove();const k=Ca({rect:p.currentRect,e:x}),C=Ye.get(e);C&&((N=(L=m.current).onDragEnd)==null||N.call(L,k,C),b(_=>{var V;return(V=_.onDragEnd)==null?void 0:V.call(_,k,C,Fe.status)})),requestAnimationFrame(()=>{Fe.dragTargetId=void 0,Fe.status="inactive",a.current&&delete a.current.dataset.dragging})},onPointerDown:x=>{p.clickedEl=x.target}},dragHandleRef:l}}let ut;function xf(e){ut||(ut=new Image,document.body.append(ut),ut.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),e.dataTransfer.setDragImage(ut,0,0)}async function*wf(e){for(const n of e.items)if(n.kind==="file")if(typeof n.webkitGetAsEntry=="function"){const a=n.webkitGetAsEntry();if(!a)continue;if(a.isFile){if(a.name===".DS_Store")continue;yield new $a(n.getAsFile(),a.fullPath)}else a.isDirectory&&(yield*Ri(a))}else{const a=n.getAsFile();if(!a||a.name===".DS_Store")continue;yield new $a(a,n.fullPath)}}async function*Ri(e){const n=e.createReader();let a;do{a=await new Promise((r,s)=>{n.readEntries(r,s)});for(const r of a)if(r.isFile){if(r.name===".DS_Store")continue;const s=await Cf(r);yield new $a(s,r.fullPath)}else r.isDirectory&&(yield*Ri(r))}while(a.length>0)}function Cf(e){return new Promise((n,a)=>e.file(n,a))}async function Sf(e){const n=[];for await(const a of e)n.push(a);return n}var Ai={exports:{}},me={};/**
 * @license React
 * react-dom-test-utils.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kt=f.exports,Sr=Hl.exports;function zi(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function ms(e){if(zi(e)!==e)throw Error("Unable to find node on an unmounted component.")}function Nf(e){var n=e.alternate;if(!n){if(n=zi(e),n===null)throw Error("Unable to find node on an unmounted component.");return n!==e?null:e}for(var a=e,r=n;;){var s=a.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){a=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===a)return ms(s),e;if(o===r)return ms(s),n;o=o.sibling}throw Error("Unable to find node on an unmounted component.")}if(a.return!==r.return)a=s,r=o;else{for(var l=!1,c=s.child;c;){if(c===a){l=!0,a=s,r=o;break}if(c===r){l=!0,r=s,a=o;break}c=c.sibling}if(!l){for(c=o.child;c;){if(c===a){l=!0,a=o,r=s;break}if(c===r){l=!0,r=o,a=s;break}c=c.sibling}if(!l)throw Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(a.alternate!==r)throw Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(a.tag!==3)throw Error("Unable to find node on an unmounted component.");return a.stateNode.current===a?e:n}var Le=Object.assign;function Sa(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function $n(){return!0}function ps(){return!1}function Me(e){function n(a,r,s,o,l){this._reactName=a,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(a=e[c],this[c]=a?a(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?$n:ps,this.isPropagationStopped=ps,this}return Le(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$n)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$n)},persist:function(){},isPersistent:$n}),n}var jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},If=Me(jt),Nn=Le({},jt,{view:0,detail:0});Me(Nn);var Na,Ia,Xt,ha=Le({},Nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xt&&(Xt&&e.type==="mousemove"?(Na=e.screenX-Xt.screenX,Ia=e.screenY-Xt.screenY):Ia=Na=0,Xt=e),Na)},movementY:function(e){return"movementY"in e?e.movementY:Ia}});Me(ha);var Lf=Le({},ha,{dataTransfer:0});Me(Lf);var Df=Le({},Nn,{relatedTarget:0});Me(Df);var Pf=Le({},jt,{animationName:0,elapsedTime:0,pseudoElement:0});Me(Pf);var $f=Le({},jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}});Me($f);var Mf=Le({},jt,{data:0});Me(Mf);var _f={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Af={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zf(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Af[e])?!!n[e]:!1}function Nr(){return zf}var Ef=Le({},Nn,{key:function(e){if(e.key){var n=_f[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Sa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Rf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nr,charCode:function(e){return e.type==="keypress"?Sa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Sa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}});Me(Ef);var Tf=Le({},ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0});Me(Tf);var Ff=Le({},Nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nr});Me(Ff);var Vf=Le({},jt,{propertyName:0,elapsedTime:0,pseudoElement:0});Me(Vf);var Of=Le({},ha,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0});Me(Of);function Bf(e,n,a,r,s,o,l,c,d){var p=Array.prototype.slice.call(arguments,3);try{n.apply(a,p)}catch(m){this.onError(m)}}var rn=!1,On=null,Bn=!1,Oa=null,Uf={onError:function(e){rn=!0,On=e}};function Hf(e,n,a,r,s,o,l,c,d){rn=!1,On=null,Bf.apply(Uf,arguments)}function Wf(e,n,a,r,s,o,l,c,d){if(Hf.apply(this,arguments),rn){if(rn){var p=On;rn=!1,On=null}else throw Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.");Bn||(Bn=!0,Oa=p)}}var Ir=Array.isArray,In=Sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Events,Gf=In[0],qf=In[1],Kf=In[2],jf=In[3],Yf=In[4],Qf=Kt.unstable_act;function Xf(){}function Zf(e,n){if(!e)return[];if(e=Nf(e),!e)return[];for(var a=e,r=[];;){if(a.tag===5||a.tag===6||a.tag===1||a.tag===0){var s=a.stateNode;n(s)&&r.push(s)}if(a.child)a.child.return=a,a=a.child;else{if(a===e)return r;for(;!a.sibling;){if(!a.return||a.return===e)return r;a=a.return}a.sibling.return=a.return,a=a.sibling}}}function Dt(e,n){if(e&&!e._reactInternals){var a=String(e);throw e=Ir(e)?"an array":e&&e.nodeType===1&&e.tagName?"a DOM node":a==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":a,Error(n+"(...): the first argument must be a React class instance. Instead received: "+(e+"."))}}function fa(e){return!(!e||e.nodeType!==1||!e.tagName)}function Lr(e){return fa(e)?!1:e!=null&&typeof e.render=="function"&&typeof e.setState=="function"}function Ei(e,n){return Lr(e)?e._reactInternals.type===n:!1}function ga(e,n){return Dt(e,"findAllInRenderedTree"),e?Zf(e._reactInternals,n):[]}function Ti(e,n){return Dt(e,"scryRenderedDOMComponentsWithClass"),ga(e,function(a){if(fa(a)){var r=a.className;typeof r!="string"&&(r=a.getAttribute("class")||"");var s=r.split(/\s+/);if(!Ir(n)){if(n===void 0)throw Error("TestUtils.scryRenderedDOMComponentsWithClass expects a className as a second argument.");n=n.split(/\s+/)}return n.every(function(o){return s.indexOf(o)!==-1})}return!1})}function Fi(e,n){return Dt(e,"scryRenderedDOMComponentsWithTag"),ga(e,function(a){return fa(a)&&a.tagName.toUpperCase()===n.toUpperCase()})}function Vi(e,n){return Dt(e,"scryRenderedComponentsWithType"),ga(e,function(a){return Ei(a,n)})}function hs(e,n,a){var r=e.type||"unknown-event";e.currentTarget=qf(a),Wf(r,n,void 0,e),e.currentTarget=null}function Oi(e,n,a){for(var r=[];e;){r.push(e);do e=e.return;while(e&&e.tag!==5);e=e||null}for(e=r.length;0<e--;)n(r[e],"captured",a);for(e=0;e<r.length;e++)n(r[e],"bubbled",a)}function Bi(e,n){var a=e.stateNode;if(!a)return null;var r=Kf(a);if(!r)return null;a=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error("Expected `"+n+"` listener to be a function, instead got a value of `"+typeof a+"` type.");return a}function Jf(e,n,a){e&&a&&a._reactName&&(n=Bi(e,a._reactName))&&(a._dispatchListeners==null&&(a._dispatchListeners=[]),a._dispatchInstances==null&&(a._dispatchInstances=[]),a._dispatchListeners.push(n),a._dispatchInstances.push(e))}function eg(e,n,a){var r=a._reactName;n==="captured"&&(r+="Capture"),(n=Bi(e,r))&&(a._dispatchListeners==null&&(a._dispatchListeners=[]),a._dispatchInstances==null&&(a._dispatchInstances=[]),a._dispatchListeners.push(n),a._dispatchInstances.push(e))}var Ui={},tg=new Set(["mouseEnter","mouseLeave","pointerEnter","pointerLeave"]);function ng(e){return function(n,a){if(Kt.isValidElement(n))throw Error("TestUtils.Simulate expected a DOM node as the first argument but received a React element. Pass the DOM node you wish to simulate the event on instead. Note that TestUtils.Simulate will not work if you are using shallow rendering.");if(Lr(n))throw Error("TestUtils.Simulate expected a DOM node as the first argument but received a component instance. Pass the DOM node you wish to simulate the event on instead.");var r="on"+e[0].toUpperCase()+e.slice(1),s=new Xf;s.target=n,s.type=e.toLowerCase();var o=Gf(n),l=new If(r,s.type,o,s,n);l.persist(),Le(l,a),tg.has(e)?l&&l._reactName&&Jf(l._targetInst,null,l):l&&l._reactName&&Oi(l._targetInst,eg,l),Sr.unstable_batchedUpdates(function(){if(jf(n),l){var c=l._dispatchListeners,d=l._dispatchInstances;if(Ir(c))for(var p=0;p<c.length&&!l.isPropagationStopped();p++)hs(l,c[p],d[p]);else c&&hs(l,c,d);l._dispatchListeners=null,l._dispatchInstances=null,l.isPersistent()||l.constructor.release(l)}if(Bn)throw c=Oa,Bn=!1,Oa=null,c}),Yf()}}"blur cancel click close contextMenu copy cut auxClick doubleClick dragEnd dragStart drop focus input invalid keyDown keyPress keyUp mouseDown mouseUp paste pause play pointerCancel pointerDown pointerUp rateChange reset resize seeked submit touchCancel touchEnd touchStart volumeChange drag dragEnter dragExit dragLeave dragOver mouseMove mouseOut mouseOver pointerMove pointerOut pointerOver scroll toggle touchMove wheel abort animationEnd animationIteration animationStart canPlay canPlayThrough durationChange emptied encrypted ended error gotPointerCapture load loadedData loadedMetadata loadStart lostPointerCapture playing progress seeking stalled suspend timeUpdate transitionEnd waiting mouseEnter mouseLeave pointerEnter pointerLeave change select beforeInput compositionEnd compositionStart compositionUpdate".split(" ").forEach(function(e){Ui[e]=ng(e)});me.Simulate=Ui;me.act=Qf;me.findAllInRenderedTree=ga;me.findRenderedComponentWithType=function(e,n){if(Dt(e,"findRenderedComponentWithType"),e=Vi(e,n),e.length!==1)throw Error("Did not find exactly one match (found: "+e.length+") for componentType:"+n);return e[0]};me.findRenderedDOMComponentWithClass=function(e,n){if(Dt(e,"findRenderedDOMComponentWithClass"),e=Ti(e,n),e.length!==1)throw Error("Did not find exactly one match (found: "+e.length+") for class:"+n);return e[0]};me.findRenderedDOMComponentWithTag=function(e,n){if(Dt(e,"findRenderedDOMComponentWithTag"),e=Fi(e,n),e.length!==1)throw Error("Did not find exactly one match (found: "+e.length+") for tag:"+n);return e[0]};me.isCompositeComponent=Lr;me.isCompositeComponentWithType=Ei;me.isDOMComponent=fa;me.isDOMComponentElement=function(e){return!!(e&&Kt.isValidElement(e)&&e.tagName)};me.isElement=function(e){return Kt.isValidElement(e)};me.isElementOfType=function(e,n){return Kt.isValidElement(e)&&e.type===n};me.mockComponent=function(e,n){return n=n||e.mockTagName||"div",e.prototype.render.mockImplementation(function(){return Kt.createElement(n,null,this.props.children)}),this};me.nativeTouchData=function(e,n){return{touches:[{pageX:e,pageY:n}]}};me.renderIntoDocument=function(e){var n=document.createElement("div");return Sr.render(e,n)};me.scryRenderedComponentsWithType=Vi;me.scryRenderedDOMComponentsWithClass=Ti;me.scryRenderedDOMComponentsWithTag=Fi;me.traverseTwoPhase=Oi;(function(e){e.exports=me})(Ai);Ai.exports.Simulate.drag;const ag=400;function rg({id:e,disabled:n,ref:a,...r}){const s=f.exports.useRef({dragOverElements:new Set,dropActivateTimer:void 0}).current,o=f.exports.useRef(r);o.current=r,f.exports.useLayoutEffect(()=>(Te.set(e,{...Te.get(e),disabled:n,id:e,ref:a}),()=>{Te.delete(e)}),[e,o,n,a]);const l=g=>{var w;const v=o.current,y=v.allowDragEventsFromItself||a.current!==((w=g.ref)==null?void 0:w.current);return!!((g==null?void 0:g.type)&&y&&v.types.includes(g.type)&&(!v.acceptsDrop||v.acceptsDrop(g)))},c=g=>{var y,w;const v=Zt(g);v&&((w=(y=o.current).onDragLeave)==null||w.call(y,v))};return{droppableProps:n?{}:{onDragOver:g=>{var y,w;g.preventDefault(),g.stopPropagation();const v=Zt(g);v&&l(v)&&((w=(y=o.current).onDragOver)==null||w.call(y,v,g))},onDragEnter:g=>{var y,w;if(g.stopPropagation(),s.dragOverElements.add(g.target),s.dragOverElements.size>1)return;const v=Zt(g);v&&l(v)&&((w=(y=o.current).onDragEnter)==null||w.call(y,v),clearTimeout(s.dropActivateTimer),typeof o.current.onDropActivate=="function"&&(s.dropActivateTimer=setTimeout(()=>{var x,k;v&&((k=(x=o.current).onDropActivate)==null||k.call(x,v))},ag)))},onDragLeave:g=>{g.stopPropagation(),s.dragOverElements.delete(g.target);for(const y of s.dragOverElements)g.currentTarget.contains(y)||s.dragOverElements.delete(y);if(s.dragOverElements.size>0)return;const v=Zt(g);v&&l(v)&&(c(g),clearTimeout(s.dropActivateTimer))},onDrop:async g=>{var y,w,x,k;g.preventDefault(),g.stopPropagation(),s.dragOverElements.clear(),c(g),clearTimeout(s.dropActivateTimer);const v=Zt(g);if(v)if((w=(y=o.current).onDragLeave)==null||w.call(y,v),!l(v))Fe.status!=="inactive"&&(Fe.status="dropFail");else{const C=(k=(x=o.current).onDrop)==null?void 0:k.call(x,v);Fe.status!=="inactive"&&(Fe.status=C===!1?"dropFail":"dropSuccess")}}}}}function Zt(e){if(Fe.dragTargetId!=null)return Ye.get(Fe.dragTargetId);if(e.dataTransfer.types.includes("Files"))return{type:"nativeFile",el:null,ref:null,getData:()=>Sf(wf(e.dataTransfer))}}function sg(e,n,a){const r=zr(n,0,e.length-1),s=zr(a,0,e.length-1);if(r===s)return e;const o=e[r],l=s<r?-1:1;for(let c=r;c!==s;c+=l)e[c]=e[c+l];return e[s]=o,e}function Hi(e,n,a){const r=e.slice();return r.splice(a<0?r.length+a:a,0,r.splice(n,1)[0]),r}let $=null;function og({item:e,items:n,type:a,ref:r,onSortEnd:s,onSortStart:o,onDragEnd:l,preview:c,disabled:d,onDropPositionChange:p,previewVariant:m}){const b=f.exports.useRef(null);f.exports.useEffect(()=>{$&&$.sortables.length!==n.length&&($.sortables=[...n],$.activeIndex=n.indexOf(e))},[n,e]);const{draggableProps:g,dragHandleRef:v}=kf({id:e,ref:r,type:a,preview:c,disabled:d,onDragStart:()=>{var w;b.current=null,$={sortables:[...n],activeSortable:e,activeIndex:n.indexOf(e),finalIndex:n.indexOf(e),dropPosition:null,scrollParent:r.current?Wl(r.current):void 0,scrollListener:()=>{_i(Te)}},m==="liveSort"&&lg(),o==null||o(),(w=$.scrollParent)==null||w.addEventListener("scroll",$.scrollListener)},onDragEnd:()=>{var w;!$||(m==="liveSort"&&cg(),$.dropPosition=null,p==null||p($.dropPosition),$.activeIndex!==$.finalIndex&&(s==null||s($.activeIndex,$.finalIndex)),(w=$.scrollParent)==null||w.removeEventListener("scroll",$.scrollListener),fs(),l==null||l(),$=null)},getData:()=>{}}),{droppableProps:y}=rg({id:e,ref:r,types:[a],disabled:d,allowDragEventsFromItself:!0,onDragOver:(w,x)=>{var N;if(!$||!p||m!=="line")return;const k=$.dropPosition;let C=null;const L=(N=Te.get(e))==null?void 0:N.rect;if(L){const _=L.top+L.height/2;x.clientY<=_?C="before":x.clientY>=_&&(C="after")}if(C!==k){const _=$.sortables.indexOf(e);if($.dropPosition=C,p($.dropPosition),fs(),r.current)if($.dropPosition==="after")La(r.current,"bottom");else if(_===0)La(r.current,"top");else{const M=$.sortables[_-1],P=Te.get(M);P!=null&&P.ref.current&&La(P.ref.current,"bottom")}const V=n.indexOf(e);if($.activeIndex===V){$.finalIndex=$.activeIndex;return}(_>$.activeIndex?"after":"before")==="after"?$.finalIndex=$.dropPosition==="before"?V-1:V:$.finalIndex=$.dropPosition==="after"?V+1:V}},onDragEnter:()=>{if(!$||m==="line")return;const w=$.sortables.indexOf(e),x=$.sortables.indexOf($.activeSortable);sg($.sortables,x,w);const k=$.sortables.map(C=>{var L;return(L=Te.get(C))==null?void 0:L.rect});$.sortables.forEach((C,L)=>{if(!$)return;const N=Hi(k,w,$.activeIndex),_=k[L],V=N[L],I=Te.get(C);if((I==null?void 0:I.ref.current)&&V&&_){const M=V.left-_.left,P=V.top-_.top;I.ref.current.style.transform=`translate3d(${M}px, ${P}px, 0)`}}),$.finalIndex=w},onDragLeave:()=>{!$||!p||m!=="line"||($.dropPosition=null,p($.dropPosition))}});return{sortableProps:{...lt(g,y)},dragHandleRef:v}}const ig="transform 0.2s cubic-bezier(0.2, 0, 0, 1)";function lg(){!$||$.sortables.forEach((e,n)=>{const a=Te.get(e);!(a!=null&&a.ref.current)||(a.ref.current.style.transition=ig,($==null?void 0:$.activeIndex)===n&&(a.ref.current.style.opacity="0.4"))})}function cg(){!$||$.sortables.forEach(e=>{const n=Te.get(e);n!=null&&n.ref.current&&(n.ref.current.style.transform="",n.ref.current.style.transition="",n.ref.current.style.opacity="",n.ref.current.style.zIndex="")})}function fs(){$!=null&&$.linePreviewEl&&($.linePreviewEl.style.borderBottomColor="",$.linePreviewEl.style.borderTopColor="",$.linePreviewEl=void 0)}function La(e,n){const a="rgb(var(--be-primary))";n==="top"?e.style.borderTopColor=a:e.style.borderBottomColor=a,$&&($.linePreviewEl=e)}function Wi(){const e=Gt();return q(n=>dg(e,n))}function dg(e,{oldIndex:n,newIndex:a,widgetToPin:r}){const s=Pe().biolink,o=Hi(s.content,n,a);r&&(o[a]={...o[a],pinned:"top"}),Pe().setBiolink({...s,content:o});const l=o.map(c=>({id:c.id,model_type:c.model_type}));return F.post(`biolink/${e}/change-order`,{order:l,widgetToPin:r})}function Dr({item:e,biolink:n,title:a,updateDialog:r,children:s,actionRow:o}){const l=Wi(),c=f.exports.useRef(null),d=!e||e.pinned!=null,{sortableProps:p,dragHandleRef:m}=og({item:e||"noop",items:(n==null?void 0:n.content)||[],type:"biolinkEditorSortable",ref:c,onSortEnd:(b,g)=>{l.mutate({oldIndex:b,newIndex:g})},disabled:d});return u("div",{className:"rounded-lg shadow border flex items-stretch mb-20 bg-paper h-172",ref:c,...p,children:[t("button",{type:"button",className:D("text-muted border-r flex-shrink-0 px-10",!d&&"hover:text-primary"),disabled:d,ref:m,children:t(hf,{})}),u("div",{className:"p-24 flex-auto min-w-0",children:[u("div",{className:"flex items-center",children:[a&&t("div",{className:"font-medium mb-4 whitespace-nowrap overflow-hidden overflow-ellipsis flex-auto mr-auto",children:a}),r&&u(T,{type:"modal",children:[t(S,{className:"flex-shrink-0 ml-20",variant:"text",color:"primary",startIcon:t(je,{}),children:t(i,{message:"Edit"})}),r]}),n&&e&&t(bf,{item:e})]}),t("div",{className:"mb-20",children:s}),o]})]})}const Gi=["groups","seo","enabled","alias"];function ug({item:e,biolink:n}){const r=`biolink/${Gt()}/link/${e.id}`;return t(Dr,{item:e,biolink:n,title:e.name,actionRow:t(mg,{link:e,biolink:n}),updateDialog:t(ii,{endpoint:r,link:e,showButtonLabelField:!0,hiddenFields:Gi,onSuccess:s=>{Sn(s.biolink)}}),children:u("div",{className:"flex items-center gap-6",children:[t(ot,{url:e.long_url}),t("a",{href:e.short_url,target:"_blank",className:"hover:underline whitespace-nowrap overflow-hidden overflow-ellipsis text-muted text-sm",rel:"noreferrer",children:et(e.long_url)})]})})}function mg({link:e,biolink:n}){const a=qt();return u("div",{className:"flex md:gap-24 md:justify-between h-42 items-center",children:[u("div",{className:"flex items-center text-muted",children:[t(or,{checked:e.active,disabled:e.active_locked||a.isLoading,onChange:()=>{a.mutate({item:e,values:{active:!e.active}})}}),u(T,{type:"popover",children:[t(xe,{label:t(i,{message:"Change thumbnail"}),children:t(R,{className:"ml-10",color:e.image?"primary":null,children:t(As,{})})}),t(df,{link:e})]}),u(T,{type:"popover",children:[t(xe,{label:t(i,{message:"Animation"}),children:t(R,{color:e.animation?"primary":null,children:t(tf,{})})}),t(mf,{link:e})]}),u(T,{type:"popover",children:[t(xe,{label:t(i,{message:"Redirect"}),children:t(R,{color:e.leap_until?"primary":null,children:t(nf,{})})}),t(lf,{link:e})]}),u(T,{type:"popover",children:[t(xe,{label:t(i,{message:"Schedule"}),children:t(R,{color:e.expires_at||e.activates_at?"primary":null,children:t(af,{})})}),t(sf,{link:e})]})]}),t(pg,{link:e})]})}function pg({link:e}){const n=Ie();if(Un("(max-width: 380px)"))return null;const r=`../../../../links/${e.id}`,s=n?t(R,{className:"text-muted flex-shrink-0",elementType:ge,to:r,relative:"path",children:t(un,{})}):t(S,{variant:"text",className:"text-muted",startIcon:t(un,{}),elementType:ge,to:r,relative:"path",children:t(i,{message:":count clicks",values:{count:e.clicks_count}})});return t(xe,{label:t(i,{message:":count lifetime clicks",values:{count:e.clicks_count}}),children:s})}function hg(e,n){const{trans:a}=H();return q(r=>fg(n,r),{onSuccess:()=>{Y.positive(a(h("Biolink updated"))),W.invalidateQueries(X("biolink"))},onError:r=>we(r,e)})}function fg(e,n){return F.put(`biolink/${e}`,pr(n)).then(a=>a.data)}const gg=["type","groups","title"];function bg(){const{biolink:e}=Wt();return e?t(vg,{biolink:e}):t("div",{className:"py-24",children:t(Qa,{})})}function vg({biolink:e}){const n=J({defaultValues:oi(e)}),a=hg(n,e.id);return u(he,{form:n,onBeforeSubmit:()=>{n.clearErrors("hash")},onSubmit:r=>{a.mutate(r)},children:[t("div",{className:"mb-24",children:t(S,{type:"submit",variant:"flat",color:"primary",disabled:a.isLoading||!n.formState.isDirty,children:t(i,{message:"Update"})})}),u("div",{className:"mb-24",children:[t(z,{name:"name",label:t(i,{message:"Name"}),minLength:3,className:"mb-8",autoFocus:!0}),t(ua,{form:n,name:"hash"})]}),t(mr,{hiddenFields:gg,linkName:t(i,{message:"biolink"})})]})}function yg(e,n){const{trans:a}=H();return q(r=>kg(e,r),{onSuccess:(r,s)=>{Y.positive(a(s.widgetId?h("Widget added"):h("Widget updated"))),Sn(r.biolink)},onError:r=>we(r,n)})}function kg(e,{widgetId:n,...a}){return(n?F.put(`biolink/${e}/widget/${n}`,a):F.post(`biolink/${e}/widget`,a)).then(s=>s.data)}function nt({biolink:e,widget:n,type:a,defaultValues:r,children:s,onSubmit:o}){const l=ba[a],c=f.exports.useMemo(()=>{const g=(n==null?void 0:n.config)||r;return Array.isArray(g)&&g.length===0||!g?void 0:g},[n==null?void 0:n.config,r]),d=J({defaultValues:c}),{formId:p,close:m}=K(),b=yg(e.id,d);return u(G,{children:[t(Q,{children:t(i,{...l.name})}),t(j,{children:t(he,{form:d,id:p,onSubmit:async g=>{const v=o?await o(g,d):g;v!==void 0&&b.mutate({widgetId:n==null?void 0:n.id,config:v,type:a,position:!n&&a===Be.Socials?e.content.length+1:void 0},{onSuccess:()=>m()})},children:s})}),u(Z,{children:[t(S,{variant:"text",onClick:()=>{m()},children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",type:"submit",form:p,disabled:b.isLoading||!d.formState.isDirty,children:n?t(i,{message:"Update"}):t(i,{message:"Add"})})]})]})}function xg({biolink:e,widget:n}){const{trans:a}=H();return u(nt,{biolink:e,type:Be.Image,widget:n,children:[t(gn,{children:t(bn,{name:"url",diskPrefix:"widgets",required:!0})}),u(ze,{className:"my-24",name:"type",label:t(i,{message:"Style"}),selectionMode:"single",children:[t(A,{value:"default",children:t(i,{message:"Default"})}),t(A,{value:"avatar",children:t(i,{message:"Avatar"})})]}),t(z,{placeholder:a(h("Optional")),name:"destinationUrl",type:"url",label:t(i,{message:"Destination url"}),description:t(i,{message:"Redirect user to this url when clicking the image."})})]})}const wg=""+new URL("image.d8dc8345.png",import.meta.url).href,Cg=""+new URL("text.e5f73930.png",import.meta.url).href,Sg=""+new URL("socials.7d34b331.png",import.meta.url).href,Ng=""+new URL("youtube.8639db0d.png",import.meta.url).href,Ig=""+new URL("soundcloud.a6ae8fd9.png",import.meta.url).href,Lg=""+new URL("vimeo.f698adf6.jpeg",import.meta.url).href,Dg=""+new URL("spotify.45316d66.png",import.meta.url).href,Pg=""+new URL("twitch.7d18ac0c.svg",import.meta.url).href,$g=""+new URL("tiktok.956e4d3e.png",import.meta.url).href;function Mg({biolink:e,widget:n}){const{trans:a}=H();return t(nt,{biolink:e,type:Be.Youtube,widget:n,onSubmit:(r,s)=>{if(!zs(r.url).id)s.setError("url",{message:a(h("Invalid youtube url"))});else return Promise.resolve(r)},children:t(z,{required:!0,autoFocus:!0,placeholder:"https://www.youtube.com/watch?v=YE7VzlLtp-4",name:"url",type:"url",label:t(i,{message:"Youtube video url"}),description:t(i,{message:"Embed this youtube video within biolink."})})})}function _g({biolink:e,widget:n}){return u(nt,{biolink:e,type:Be.Text,widget:n,children:[t(z,{className:"mb-24",required:!0,autoFocus:!0,name:"title",label:t(i,{message:"Title"})}),t(z,{name:"description",label:t(i,{message:"Description"})})]})}function Rg({biolink:e,widget:n}){return t(nt,{biolink:e,type:Be.Socials,widget:n,onSubmit:a=>Promise.resolve(Rs(a)),children:Object.entries(Gl).map(([a,r],s)=>{const o=r.icon;return t(z,{autoFocus:s===0,className:"mb-24",name:a,placeholder:r.placeholder,label:t(i,{...r.name}),pattern:r.pattern,type:r.inputType,autoComplete:"off",startAdornment:o&&t(o,{})},a)})})}function Ag({biolink:e,widget:n}){return t(nt,{biolink:e,type:Be.Twitch,widget:n,children:t(z,{required:!0,autoFocus:!0,placeholder:"https://www.twitch.tv/kasparovchess",name:"url",type:"url",pattern:"https://(www.)?twitch.tv/.*",label:t(i,{message:"Twitch channel or clip url"}),description:t(i,{message:"Embed this twitch channel or clip within biolink."})})})}function zg({biolink:e,widget:n}){const{trans:a}=H();return t(nt,{biolink:e,type:Be.Soundcloud,widget:n,onSubmit:async(r,s)=>{var m;const o=encodeURIComponent(r.url),c=(await fetch(`https://soundcloud.com/oembed?format=json&url=${o}`).then(b=>b.json())).html,d=document.createElement("div");d.innerHTML=c;const p=(m=d.querySelector("iframe"))==null?void 0:m.src;if(p)return{...r,embedUrl:p};s.setError("url",{message:a(h("Invalid soundcloud url"))})},children:t(z,{required:!0,autoFocus:!0,placeholder:"https://soundcloud.com/artist/track",name:"url",type:"url",label:t(i,{message:"Soundcloud track url"}),description:t(i,{message:"Embed this soundcloud track within biolink."})})})}function Eg({biolink:e,widget:n}){const{trans:a}=H();return t(nt,{biolink:e,type:Be.Vimeo,widget:n,onSubmit:(r,s)=>{if(!zs(r.url).id)s.setError("url",{message:a(h("Invalid vimeo url"))});else return Promise.resolve(r)},children:t(z,{required:!0,autoFocus:!0,placeholder:"https://vimeo.com/1084537",name:"url",type:"url",label:t(i,{message:"Vimeo video url"}),description:t(i,{message:"Embed this vimeo video within biolink."})})})}function Tg({biolink:e,widget:n}){const{trans:a}=H();return t(nt,{biolink:e,type:Be.Spotify,widget:n,onSubmit:(r,s)=>{const o=ql(r.url);if(!("id"in o))s.setError("url",{message:a(h("Invalid spotify url"))});else return Promise.resolve({...r,type:o.type})},children:t(z,{required:!0,autoFocus:!0,placeholder:"https://open.spotify.com/track/2sqfLwGKXDw1nGjFhH3GGX?si=f329040f45804ec5",name:"url",type:"url",label:t(i,{message:"Spotify share url"}),description:t(i,{message:"Any share url from spotify can be used, including artist, album, track, playlist etc."})})})}function Fg({biolink:e,widget:n}){const{trans:a}=H();return t(nt,{biolink:e,type:Be.Tiktok,widget:n,onSubmit:(r,s)=>{if(!r.url.includes("tiktok.com/"))s.setError("url",{message:a(h("Invalid tiktok url"))});else return Promise.resolve(r)},children:t(z,{required:!0,autoFocus:!0,placeholder:"https://www.tiktok.com/@bts_official_bighit/video/6964945720885464322",name:"url",type:"url",label:t(i,{message:"Tiktok url"}),description:t(i,{message:"Embed this tiktok video within biolink."})})})}var Be=(e=>(e.Image="image",e.Text="text",e.Socials="socials",e.Youtube="youtube",e.Soundcloud="soundcloud",e.Vimeo="video",e.Spotify="spotify",e.Twitch="twitch",e.Tiktok="tiktok",e))(Be||{});const ba={image:{name:h("Image"),image:wg,description:h("Upload an image and optionally add a link it will redirect to when clicked."),dialog:xg},text:{name:h("Text"),image:Cg,description:h("Add title and optional description. Can be used as a header for the whole biolink or a group of multiple widgets."),dialog:_g},socials:{name:h("Social Links"),image:Sg,description:h("Add your socials links to display them as icon buttons."),dialog:Rg},youtube:{name:h("Youtube Video"),image:Ng,description:h("Paste a YouTube video URL to show it as a video embed in your profile."),dialog:Mg},soundcloud:{name:h("Soundcloud Audio"),image:Ig,description:h("Paste a SoundCloud URL to show it as a playable song in your profile."),dialog:zg},video:{name:h("Vimeo Video"),image:Lg,description:h("Paste a vimeo URL to show it as a video embed in your profile."),dialog:Eg},spotify:{name:h("Spotify Embed"),image:Dg,description:h("Paste a spotify song, album, artist, playlist, podcast or episode url to show it as an embed in your profile."),dialog:Tg},twitch:{name:h("Twitch Embed"),image:Pg,description:h("Paste twitch profile or clip url to show it as an embed in your profile."),dialog:Ag},tiktok:{name:h("TikTok Embed"),image:$g,description:h("Paste TikTok video url to show it as an embed in your profile."),dialog:Fg}};function Vg(){const{close:e}=K();return u(G,{size:"xl",children:[t(Q,{titleTextSize:"text-md",padding:"px-24 pt-14 pb-4",children:t(i,{message:"Add widget"})}),t(j,{padding:"p-24",children:t("div",{className:"grid gap-14 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:Object.entries(ba).map(([n,a])=>u("div",{className:"bg-paper border rounded p-14 shadow cursor-pointer hover:bg-primary/hover",role:"button",tabIndex:0,onClick:()=>{e(n)},children:[t("img",{src:a.image,alt:"",className:"block w-54 h-54 mb-20 mr-auto"}),t("div",{className:"text-primary text-lg font-semibold whitespace-nowrap overflow-hidden overflow-ellipsis",children:t(i,{...a.name})}),t("div",{className:"text-muted",children:t(i,{...a.description})})]},n))})})]})}function Og({activeWidget:e,biolink:n,onOpenChange:a}){const r=e?ba[e].dialog:null;return t(T,{type:"modal",isOpen:e!=null,onOpenChange:a,children:r&&t(r,{biolink:n})})}const Mn=O(t("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpwardOutlined");function Bg({item:e,biolink:n}){const a=ba[e.type],r=Kl[e.type],s=a.dialog;return t(Dr,{biolink:n,item:e,title:t(i,{...a.name}),updateDialog:t(s,{widget:e,biolink:n}),actionRow:t(Ug,{widget:e}),children:t(r,{widget:e,variant:"editor"})})}function Ug({widget:e}){const n=qt(),a=Wi(),r=()=>{const s=Pe().biolink;if(!s)return;const o=s.content.filter(l=>l.pinned==="top").length;if(e.pinned)n.mutate({item:e,values:{pinned:null}});else{const l=s.content.findIndex(c=>c.model_type===e.model_type&&c.id===e.id);a.mutate({oldIndex:l,newIndex:o,widgetToPin:e.id})}};return u("div",{className:"flex items-center gap-24 justify-between text-muted h-42",children:[t(or,{checked:e.active,disabled:n.isLoading,onChange:()=>{n.mutate({item:e,values:{active:!e.active}})}}),t(S,{variant:"outline",size:"2xs",radius:"rounded-full",color:e.pinned==="top"?"primary":void 0,startIcon:e.pinned==="top"?t(en,{}):t(Mn,{}),disabled:a.isLoading,onClick:r||n.isLoading,children:e.pinned==="top"?t(i,{message:"Unpin from top"}):t(i,{message:"Pin to top"})})]})}function Hg(){const{biolink:e}=Wt(),n=tt(r=>r.appearance);return Js()?null:u("div",{className:"flex-shrink-0 sticky top-24 h-max",children:[t(Wn,{size:"sm",color:"positive",radius:"rounded",className:"w-max m-auto mb-24",children:t(i,{message:"Live preview"})}),t(Wg,{children:e?t(jl,{biolink:e,appearance:n}):null}),t("div",{className:"text-sm text-muted text-center mt-14",children:t(i,{message:"Scheduled and disabled content is not shown"})})]})}function Wg({children:e}){return t("div",{className:"w-350 h-[724px] rounded-[64px] shadow-lg border border-[#444546] border-[12px] overflow-hidden",children:t("div",{className:"overflow-y-auto h-full compact-scrollbar",children:e})})}const qi=O(t("path",{d:"M16.56 8.94 7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.59-.59 1.54 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12zM5.21 10 10 5.21 14.79 10H5.21zM19 11.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5zM2 20h20v4H2v-4z"}),"FormatColorFillOutlined"),Ki=O(t("path",{d:"M11 9h2v2h-2V9zm-2 2h2v2H9v-2zm4 0h2v2h-2v-2zm2-2h2v2h-2V9zM7 9h2v2H7V9zm12-6H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 18H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm2-7h-2v2h2v2h-2v-2h-2v2h-2v-2h-2v2H9v-2H7v2H5v-2h2v-2H5V5h14v6z"}),"GradientOutlined"),Yt=f.exports.forwardRef(({isActive:e,children:n,className:a,style:r,label:s,...o},l)=>u("button",{type:"button",...o,ref:l,children:[t("span",{className:D("flex items-center justify-center overflow-hidden border border-[#c3cbdc] rounded aspect-square outline-none focus-visible:ring",e&&"ring-2 ring-primary ring-offset-2",a),style:r,children:n}),t("span",{className:"block mt-10 text-xs overflow-hidden overflow-ellipsis",children:s})]})),Mt={type:"color",id:"c-custom",label:h("Custom color")},Gg=Di.map((e,n)=>({...Mt,id:`c${n}`,backgroundColor:e.color,label:e.name,color:e.foreground}));function qg({value:e,onChange:n,className:a}){return u("div",{className:a,children:[t(Kg,{value:e,onChange:n}),Gg.map(r=>t(Yt,{label:t(i,{...r.label}),isActive:(e==null?void 0:e.id)===r.id,style:{backgroundColor:r.backgroundColor},onClick:()=>{n==null||n({...Mt,...r})}},r.id))]})}function Kg({value:e,onChange:n}){const a=(e==null?void 0:e.id)===Mt.id;return u(T,{currentValue:e,type:"popover",onClose:r=>{n==null||n(typeof r=="string"?{...Mt,backgroundColor:r}:r)},children:[t(Yt,{label:t(i,{...Mt.label}),className:"border-dashed border-2",style:{backgroundColor:a?e==null?void 0:e.backgroundColor:void 0},children:t("span",{className:"inline-block text-white bg-black/20 rounded p-10",children:t(qi,{size:"lg"})})}),t(pa,{defaultValue:e==null?void 0:e.backgroundColor,onChange:r=>{n==null||n({...Mt,backgroundColor:r})}})]})}const re={type:"gradient",id:"g-custom",label:h("Custom gradient")},Pr=[{...re,...re,id:"g1",backgroundImage:"linear-gradient(45deg, #ff9a9e, #fad0c4)",label:h("Worm flame")},{...re,id:"g2",backgroundImage:"linear-gradient(0deg, #a18cd1, #fbc2eb)",label:h("Night fade")},{...re,id:"g3",backgroundImage:"linear-gradient(120deg, #a1c4fd, #c2e9fb)",label:h("Winter nova")},{...re,id:"g4",backgroundImage:"linear-gradient(0deg, #cfd9df, #e2ebf0)",label:h("Heavy rain")},{...re,id:"g5",backgroundImage:"linear-gradient(120deg, #fdfbfb, #ebedee)",label:h("Cloudy knoxville")},{...re,id:"g6",backgroundImage:"linear-gradient(0deg, #a8edea, #fed6e3)",label:h("Rare wind")},{...re,id:"g7",backgroundImage:"linear-gradient(135deg, #f5f7fa, #c3cfe2)",label:h("Saint petersburg")},{...re,id:"g8",backgroundImage:"linear-gradient(135deg, #fdfcfb, #e2d1c3)",label:h("Everlasting sky")},{...re,id:"g9",backgroundImage:"linear-gradient(0deg, #c1dfc4, #deecdd)",label:h("Soft grass")},{...re,id:"g10",backgroundImage:"linear-gradient(90deg, #E9E4F0, #D3CCE3)",label:h("Delicate")},{...re,id:"g11",backgroundImage:"linear-gradient(90deg, #fffcdc, #d9a7c7)",label:h("Broken hearts")},{...re,id:"g12",backgroundImage:"linear-gradient(90deg, #56ab2f, #a8e063)",label:h("Lush"),color:"rgb(255, 255, 255)"},{...re,id:"g13",backgroundImage:"linear-gradient(90deg, #606c88, #3f4c6b)",label:h("Ash"),color:"rgb(255, 255, 255)"},{...re,id:"g14",backgroundImage:"linear-gradient(90deg, #ece9e6, #ffffff)",label:h("Clouds")},{...re,id:"g15",backgroundImage:"linear-gradient(90deg, #f09819, #edde5d)",label:h("Mango pulp")},{...re,id:"g16",backgroundImage:"linear-gradient(90deg, #b79891, #94716b)",label:h("Cooper"),color:"rgb(255, 255, 255)"},{...re,id:"g17",backgroundImage:"linear-gradient(60deg, #29323c, #485563)",label:h("Vicious stance"),color:"rgb(255, 255, 255)"}],jg=O(t("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z"}),"ArrowForwardOutlined");function Yg({value:e,onChange:n,className:a}){return u("div",{className:a,children:[t(Qg,{value:e,onChange:n}),Pr.map(r=>t(Yt,{label:r.label&&t(i,{...r.label}),isActive:(e==null?void 0:e.id)===r.id,style:{backgroundImage:r.backgroundImage},onClick:()=>{n==null||n({...re,...r})}},r.backgroundImage))]})}function Qg({value:e,onChange:n}){const a=(e==null?void 0:e.id)===re.id;return u(T,{type:"popover",currentValue:e,onOpenChange:r=>{r&&!e&&(n==null||n(Pr[0]))},onClose:r=>{n==null||n(r)},children:[t(Yt,{label:t(i,{...re.label}),className:"border-dashed border-2",style:{backgroundImage:a?e==null?void 0:e.backgroundImage:void 0},children:t("span",{className:"inline-block text-white bg-black/20 rounded p-10",children:t(Ki,{size:"lg"})})}),t(Xg,{defaultValue:e,onChange:r=>{n==null||n(r)}})]})}function Xg({defaultValue:e=Pr[0],onChange:n}){const{close:a}=K(),[r,s]=f.exports.useState(()=>{var d;const c=((d=e==null?void 0:e.backgroundImage)==null?void 0:d.match(/\(([0-9]+deg),.?(.+?),.?(.+?)\)/))||[];return{angle:c[1]||"45deg",colorOne:c[2]||"#ff9a9e",colorTwo:c[3]||"#fad0c4"}}),o=c=>({...re,backgroundImage:`linear-gradient(${c.angle}, ${c.colorOne}, ${c.colorTwo})`}),l=f.exports.useCallback(c=>{const d={...r,...c};s(d),n(o(d))},[r,n]);return u(G,{size:"sm",children:[t(Q,{children:t(i,{message:"Custom gradient"})}),u(j,{children:[t("div",{className:"mb-6",children:t(i,{message:"Colors"})}),u("div",{className:"flex items-stretch h-40 mb-20",children:[t(gs,{className:"rounded-l",value:r.colorOne,onChange:c=>l({colorOne:c})}),t("div",{className:"flex-auto border-y border-[#c3cbdc]",style:{backgroundImage:o(r).backgroundImage}}),t(gs,{className:"rounded-r",value:r.colorTwo,onChange:c=>l({colorTwo:c})})]}),t("div",{className:"mb-6",children:t(i,{message:"Direction"})}),t(Zg,{value:r.angle,onChange:c=>l({angle:c})})]}),u(Z,{dividerTop:!0,children:[t(S,{onClick:()=>a(),children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",onClick:()=>{a(o(r))},children:t(i,{message:"Apply"})})]})]})}function gs({className:e,value:n,onChange:a}){return u(T,{type:"popover",children:[t(xe,{label:t(i,{message:"Click to change color"}),children:t("button",{type:"button",className:D("w-40 flex-shrink-0 border border-[#c3cbdc]",e),style:{backgroundColor:n}})}),t(pa,{defaultValue:n,onChange:a,hideFooter:!0})]})}function Zg({value:e,onChange:n}){const a="text-primary border-primary";return u("div",{className:"text-muted flex items-center flex-wrap gap-10",children:[t(R,{radius:"rounded-full",variant:"outline",className:e==="0deg"?a:void 0,onClick:()=>n("0deg"),children:t(Mn,{})}),t(R,{radius:"rounded-full",variant:"outline",className:e==="180deg"?a:void 0,onClick:()=>n("180deg"),children:t(en,{})}),t(R,{radius:"rounded-full",variant:"outline",className:e==="90deg"?a:void 0,onClick:()=>n("90deg"),children:t(jg,{})}),t(R,{radius:"rounded-full",variant:"outline",className:e==="135deg"?a:void 0,onClick:()=>n("135deg"),children:t(en,{className:"-rotate-45"})}),t(R,{radius:"rounded-full",variant:"outline",className:e==="225deg"?a:void 0,onClick:()=>n("225deg"),children:t(en,{className:"rotate-45"})}),t(R,{radius:"rounded-full",variant:"outline",className:e==="45deg"?a:void 0,onClick:()=>n("45deg"),children:t(Mn,{className:"rotate-45"})}),t(R,{radius:"rounded-full",variant:"outline",className:e==="325deg"?a:void 0,onClick:()=>n("325deg"),children:t(Mn,{className:"-rotate-45"})})]})}const Jg=""+new URL("Angled-Focus.176ea4bb.svg",import.meta.url).href,eb=""+new URL("Circular-Focus.ca4d12f0.svg",import.meta.url).href,tb=""+new URL("Farseeing-Eyeball.aa4a0249.svg",import.meta.url).href,nb=""+new URL("Canyon-Funnel.b2e2eaf0.svg",import.meta.url).href,ab=""+new URL("Looney-Loops.6f56821b.svg",import.meta.url).href,rb=""+new URL("Hurricane-Aperture.35c89ecf.svg",import.meta.url).href,sb=""+new URL("Icy-Explosion.988bfd47.svg",import.meta.url).href,ob=""+new URL("Protruding-Squares.b00abf9b.svg",import.meta.url).href,ib=""+new URL("Alternating-Triangles.d5e42a92.svg",import.meta.url).href,lb=""+new URL("Monstera-Patch.69fc9117.svg",import.meta.url).href,cb=""+new URL("Confetti-Doodles.d1c20c3c.svg",import.meta.url).href,db=""+new URL("Threads-Ahead.28db1646.svg",import.meta.url).href,ub=""+new URL("Launch-Day.f2926785.svg",import.meta.url).href,mb=""+new URL("Sprinkle.d1a9b59f.svg",import.meta.url).href,pb=""+new URL("Circuit-Board.b3635293.svg",import.meta.url).href,hb=""+new URL("nuclear-focalpoint.166680aa.svg",import.meta.url).href,fb=""+new URL("Snow.424582cb.svg",import.meta.url).href,se={type:"image",id:"i-custom",label:h("Custom image")},gb=[{...se,id:"img0",backgroundColor:"#ee5522",backgroundImage:`url(${ob})`,backgroundRepeat:"repeat",label:h("Protruding squares"),color:"#fff"},{...se,id:"img1",backgroundColor:"#00bbff",backgroundImage:`url(${ub})`,label:h("Launch day"),backgroundSize:"contain",backgroundPosition:"bottom",backgroundRepeat:"no-repeat",color:"#fff"},{...se,id:"img2",backgroundColor:"#fff",backgroundImage:`url(${ib})`,label:h("Alternating triangles"),color:"#000"},{...se,id:"img3",backgroundColor:"#002200",backgroundImage:`url(${lb})`,label:h("Monstera patch"),color:"#fff"},{...se,id:"img4",backgroundColor:"#aa3333",backgroundImage:`url(${cb})`,label:h("Confetti doodles"),color:"#fff",backgroundRepeat:"repeat",backgroundPosition:"center center",backgroundSize:"contain"},{...se,id:"img5",backgroundColor:"#070014",backgroundImage:`url(${rb})`,label:h("Hurricane aperture"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center",color:"#fff"},{...se,id:"img6",backgroundColor:"#11ddaa",backgroundImage:`url(${ab})`,label:h("Looney loops"),backgroundPosition:"center center",backgroundSize:"cover",color:"#000"},{...se,id:"img7",backgroundColor:"#ccffff",backgroundImage:`url(${sb})`,label:h("Icy explosion"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center",color:"#000"},{...se,id:"img8",backgroundColor:"#442233",backgroundImage:`url(${hb})`,label:h("Nuclear point"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center",color:"#fff"},{...se,id:"img9",backgroundColor:"#ffdd55",backgroundImage:`url(${Jg})`,label:h("Angled focus"),backgroundPosition:"center center",backgroundSize:"cover",color:"#fff"},{...se,id:"img10",backgroundColor:"#220044",backgroundImage:`url(${eb})`,label:h("Circular focus"),backgroundPosition:"center center",backgroundSize:"cover",color:"#fff"},{...se,id:"img11",backgroundColor:"#000000",backgroundImage:`url(${tb})`,label:h("Farseeing eyeball"),backgroundPosition:"center center",backgroundSize:"cover",color:"#fff"},{...se,id:"img12",backgroundColor:"#ff0000",backgroundImage:`url(${nb})`,label:h("Canyon funnel"),backgroundPosition:"center center",backgroundSize:"cover",color:"#fff"},{...se,id:"img13",backgroundColor:"#ffdd99",backgroundImage:`url(${db})`,label:h("Threads ahead"),color:"#000",backgroundRepeat:"no-repeat"},{...se,id:"img14",backgroundImage:`url(${mb})`,label:h("Sprinkle"),backgroundRepeat:"repeat",backgroundPosition:"center center"},{...se,id:"img15",backgroundImage:`url(${pb})`,label:h("Circuit board"),backgroundRepeat:"repeat",backgroundPosition:"center center"},{...se,id:"img16",backgroundImage:`url(${fb})`,label:h("Snow"),backgroundRepeat:"repeat",backgroundPosition:"center center"}],bb=O(t("path",{d:"M9 16h6v-6h4l-7-7-7 7h4v6zm3-10.17L14.17 8H13v6h-2V8H9.83L12 5.83zM5 18h14v2H5z"}),"UploadOutlined"),vb={cover:{label:h("Stretch to fit"),bgConfig:{backgroundRepeat:"no-repeat",backgroundSize:"cover"}},contain:{label:h("Fit image"),bgConfig:{backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center top"}},repeat:{label:h("Repeat image"),bgConfig:{backgroundRepeat:"repeat",backgroundSize:void 0,backgroundPosition:"left top"}}};function yb({value:e,onChange:n}){const a=kb(e);return t("div",{className:"border-t mt-20 pt-14",children:t(Yl,{size:"sm",disabled:!e,children:Object.entries(vb).map(([r,s])=>t(Ql,{name:"background-position",value:r,checked:r===a,onChange:o=>{e&&(n==null||n({...e,...s.bgConfig}))},children:t(i,{...s.label})},r))})})}function kb(e){return(e==null?void 0:e.backgroundSize)==="cover"?"cover":(e==null?void 0:e.backgroundSize)==="contain"?"contain":"repeat"}function xb({value:e,onChange:n,className:a}){return u("div",{children:[u("div",{className:a,children:[t(wb,{value:e,onChange:n}),gb.map(r=>t(Yt,{onClick:()=>n==null?void 0:n({...se,...r}),isActive:(e==null?void 0:e.id)===r.id,style:{...Es(r),backgroundAttachment:"initial"},label:t(i,{...r.label})},r.id))]}),t(yb,{value:e,onChange:n})]})}function wb({value:e,onChange:n}){return e=(e==null?void 0:e.id)===se.id?e:void 0,u(T,{type:"popover",onClose:a=>{n==null||n(a?{...se,backgroundImage:`url(${a})`}:null)},children:[t(Yt,{label:t(i,{...se.label}),isActive:(e==null?void 0:e.id)===se.id,className:"border-dashed border-2",style:Es(e),children:t("span",{className:"inline-block text-white bg-black/20 rounded p-10",children:t(bb,{size:"lg"})})}),t(Cb,{value:e})]})}function Cb({value:e}){var o;const n=(o=e==null?void 0:e.backgroundImage)==null?void 0:o.replace("url(","").replace(")",""),a=J({defaultValues:{imageUrl:n}}),{close:r,formId:s}=K();return u(G,{size:"sm",children:[t(Q,{children:t(i,{message:"Upload image"})}),t(j,{children:t(he,{id:s,form:a,onSubmit:l=>{r(l.imageUrl)},children:t(gn,{children:t(bn,{autoFocus:!0,name:"imageUrl",diskPrefix:"biolinks",showRemoveButton:!0})})})}),u(Z,{children:[t(S,{onClick:()=>{r()},children:t(i,{message:"Cancel"})}),t(S,{variant:"flat",color:"primary",type:"submit",form:s,children:t(i,{message:"Select"})})]})]})}const Ln={h2:"text-xl font-semibold mb-20",h3:"my-12 font-semibold"},Sb={color:qg,gradient:Yg,image:xb};function Nb({className:e}){const n=tt(o=>{var l;return(l=o.appearance)==null?void 0:l.bgConfig}),[a,r]=f.exports.useState(()=>(n==null?void 0:n.type)==="color"?"color":(n==null?void 0:n.type)==="gradient"?"gradient":"color"),s=Sb[a];return u("div",{className:e,children:[t("h2",{className:Ln.h2,children:t(i,{message:"Background"})}),t(Ib,{activeTab:a,onTabChange:r}),t(s,{value:a===(n==null?void 0:n.type)?n:void 0,onChange:o=>{Pe().updateAppearance({bgConfig:o})},className:"grid gap-14 grid-cols-[repeat(auto-fill,minmax(90px,1fr))] items-start"})]})}function Ib({activeTab:e,onTabChange:n}){return u("div",{className:"my-20 pb-20 flex items-center gap-20 border-b",children:[t(Da,{isActive:e==="color",icon:t(qi,{}),title:t(i,{message:"Flat color"}),onClick:()=>{n("color")}}),t(Da,{isActive:e==="gradient",icon:t(Ki,{}),title:t(i,{message:"Gradient"}),onClick:()=>{n("gradient")}}),t(Da,{isActive:e==="image",icon:t(As,{}),title:t(i,{message:"Image"}),onClick:()=>{n("image")}})]})}function Da({isActive:e,icon:n,title:a,onClick:r}){return u("div",{role:"button",className:"block",onClick:r,children:[t("div",{className:D("w-50 h-50 mx-auto border rounded flex items-center justify-center text-muted mb-8",e&&"ring border-primary"),children:n}),t("div",{className:"text-sm text-center text-primary",children:a})]})}const Lb={flat:h("Fill"),outline:h("Outline")},Db={"rounded-none":h("Square"),rounded:h("Rounded"),"rounded-full":h("Pill")};function Pb({className:e}){const n=tt(r=>{var s;return(s=r.appearance)==null?void 0:s.btnConfig}),a=f.exports.useCallback(r=>{Pe().updateAppearance({btnConfig:{...n,...r}})},[n]);return u("div",{className:e,children:[t("h2",{className:Ln.h2,children:t(i,{message:"Buttons"})}),t($b,{value:n,onChange:a}),t(_b,{value:n,onChange:a})]})}function $b({value:e,onChange:n}){var s,o;const a=(s=e==null?void 0:e.variant)!=null?s:"flat",r=(o=e==null?void 0:e.radius)!=null?o:"rounded";return t("div",{children:Object.entries(Lb).map(([l,c])=>u("div",{children:[t("h3",{className:Ln.h3,children:t(i,{...c})}),t("div",{className:"grid gap-24 grid-cols-2 md:grid-cols-3",children:Object.entries(Db).map(([d,p])=>t("div",{className:D("rounded",l===a&&r===d&&"ring ring-primary-light ring-offset-4"),children:t(S,{variant:l,color:"primary",radius:d,className:"w-full",onClick:()=>{n({variant:l,radius:d})},children:t(i,{...p})})},d))})]},l))})}const Mb={"shadow-none":h("No shadow"),"rgb(0 0 0 / 20%) 0.2rem 0.2rem 0.4rem 0px":h("Light shadow"),"rgb(0 0 0 / 75%) 0.3rem 0.4rem 0px":h("Hard shadow")};function _b({value:e,onChange:n}){var r;const a=(r=e==null?void 0:e.shadow)!=null?r:"shadow-none";return u("div",{children:[t("h3",{className:"my-12 font-semibold",children:t(i,{message:"Shadow"})}),t("div",{className:"flex gap-24",children:Object.entries(Mb).map(([s,o])=>t("div",{style:{boxShadow:s},children:t(Et,{className:D("w-70 h-40 border rounded",a===s&&"border-primary"),onClick:()=>{n({shadow:s==="shadow-none"?void 0:s})},children:t("span",{className:"sr-only",children:t(i,{...o})})})},s))})]})}const Rb=""+new URL("font.a5a81d1a.svg",import.meta.url).href;function Ab({state:{filters:e,setFilters:n}}){const{trans:a}=H();return u("div",{className:"flex items-center gap-24 mb-24",children:[t(Xn,{className:"flex-auto",value:e.query,onChange:r=>{n({...e,query:r.target.value})},startAdornment:t(Oo,{}),placeholder:a(h("Search fonts"))}),u(Ps,{className:"flex-auto",selectionMode:"single",selectedValue:e.category,onSelectionChange:r=>{n({...e,category:r})},children:[t(A,{value:"",children:t(i,{message:"All categories"})}),t(A,{value:"serif",children:t(i,{message:"Serif"})}),t(A,{value:"sans-serif",children:t(i,{message:"Sans serif"})}),t(A,{value:"display",children:t(i,{message:"Display"})}),t(A,{value:"handwriting",children:t(i,{message:"Handwriting"})}),t(A,{value:"monospace",children:t(i,{message:"Monospace"})})]})]})}function zb(e){const n=Xl({usage:"search",...e});return{startsWith(a,r){return r.length===0?!0:(a=a.normalize("NFC"),r=r.normalize("NFC"),n.compare(a.slice(0,r.length),r)===0)},endsWith(a,r){return r.length===0?!0:(a=a.normalize("NFC"),r=r.normalize("NFC"),n.compare(a.slice(-r.length),r)===0)},contains(a,r){if(r.length===0)return!0;a=a.normalize("NFC"),r=r.normalize("NFC");let s=0;const o=r.length;for(;s+o<=a.length;s++){const l=a.slice(s,s+o);if(n.compare(r,l)===0)return!0}return!1}}}const ji=[{label:h("System"),family:'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',category:"sans-serif"},{family:"Impact, Charcoal, sans-serif",category:"sans-serif"},{family:"Arial, Helvetica Neue, Helvetica, sans-serif",category:"serif"},{family:'"Comic Sans MS", cursive, sans-serif',category:"Handwriting"},{family:"Century Gothic, sans-serif",category:"sans-serif"},{family:'"Courier New", Courier, monospace',category:"monospace"},{family:'"Lucida Sans Unicode", "Lucida Grande", sans-serif',category:"sans-serif"},{family:'"Times New Roman", Times, serif',category:"serif"},{family:'"Lucida Console", Monaco, monospace',category:"monospace"},{family:'"Andele Mono", monospace, sans-serif',category:"sans-serif"},{family:"Verdana, Geneva, sans-serif",category:"sans-serif"},{family:'"Helvetica Neue", Helvetica, Arial, sans-serif',category:"sans-serif"}];function Eb(e,n){return e.reduce((a,r,s)=>{const o=Math.floor(s/n);return a[o]||(a[o]=[]),a[o].push(r),a},[])}function Tb({value:e,onChange:n}){const{data:a,isLoading:r}=qn(["googleFonts"]),[s,o]=f.exports.useState(0),[l,c]=f.exports.useState({query:"",category:""}),{contains:d}=zb({sensitivity:"base"}),p=f.exports.useCallback(y=>{c(y),o(0)},[]),m=f.exports.useMemo(()=>{var y;return ji.concat((y=a==null?void 0:a.googleFonts)!=null?y:[])},[a==null?void 0:a.googleFonts]),b=f.exports.useMemo(()=>m.filter(y=>{var w;return d(y.family,l.query)&&(!l.category||((w=y.category)==null?void 0:w.toLowerCase())===l.category.toLowerCase())}),[m,l,d]),g=f.exports.useMemo(()=>Eb(b,20),[b]),v=g[s];return f.exports.useEffect(()=>{const y="font-selector";v!=null&&v.length&&Zl(v,{id:y})},[v,s]),{fonts:v||[],currentPage:s,filteredFonts:b||[],setCurrentPage:o,isLoading:r,filters:l,setFilters:p,value:e,onChange:n,pages:g}}function Fb({state:{currentPage:e=0,setCurrentPage:n,filteredFonts:a,pages:r}}){const s=(a==null?void 0:a.length)||0;return u("div",{className:"flex items-center justify-end gap-24 text-sm mt-30 pt-14 border-t",children:[s>0&&t("div",{children:t(i,{message:":from - :to of :total",values:{from:e*20+1,to:Math.min((e+1)*20,s),total:s}})}),u("div",{className:"text-muted",children:[t(R,{disabled:e<1,onClick:()=>{n(Math.max(0,e-1))},children:t(kn,{})}),t(R,{disabled:e>=r.length-1,onClick:()=>{n(e+1)},children:t(Vt,{})})]})]})}function Vb(e){const n=Tb(e);return u("div",{className:e.className,children:[t(Ab,{state:n}),t(Oe,{initial:!1,mode:"wait",children:t(Ob,{state:n})}),t(Fb,{state:n})]})}function Ob({state:e}){const{isLoading:n,fonts:a}=e,r="grid gap-24 grid-cols-[repeat(auto-fill,minmax(90px,1fr))] items-start";return n?t(Ub,{className:r}):a!=null&&a.length?t(ye.div,{...Ve,className:r,children:a==null?void 0:a.map(s=>t(Bb,{font:s,state:e},s.family))},"font-list"):t(Zn,{className:"mt-60",size:"sm",image:t(fn,{src:Rb}),title:t(i,{message:"No matching fonts"}),description:t(i,{message:"Try another search query or different category"})})}function Bb({font:e,state:{value:n,onChange:a}}){const r=(n==null?void 0:n.family)===e.family,s=e.family.split(",")[0].replace(/"/g,"");return u(Et,{onClick:()=>{a(e)},children:[t("span",{className:D("flex items-center justify-center text-4xl md:text-5xl border rounded aspect-square hover:bg-hover transition-bg-color",r&&"ring-2 ring-primary ring-offset-2"),children:t("span",{style:{fontFamily:e.family},children:"Aa"})}),t("span",{className:D("block mt-6 text-sm whitespace-nowrap overflow-hidden overflow-ellipsis",r&&"text-primary"),children:e.label?t(i,{...e.label}):s})]},e.family)}function Ub({className:e}){const n=Array.from(Array(20).keys());return t(ye.div,{...Ve,className:e,children:n.map(a=>u("div",{children:[t("div",{className:"aspect-square",children:t(De,{display:"block",variant:"rect"})}),t(De,{className:"text-sm mt-6"})]},a))},"font-list-skeleton")}function Hb(){const e=Gt();return q(()=>{const n=Pe().appearance;return Wb(e,{config:n})},{onSuccess:()=>{Pe().setAppearanceIsDirty(!1),Y.positive(h("Appearance saved"))},onError:n=>$e(n,h("Could not save appearance"))})}function Wb(e,n){return F.post(`biolink/${e}/appearance`,n).then(a=>a.data)}function Pa({value:e,onChange:n,label:a}){const r=At({size:"md",startAppend:t(f.exports.Fragment,{})}),s=f.exports.useId();return u("div",{children:[t("label",{className:r.label,htmlFor:s,children:a}),u("div",{className:"flex",children:[u(T,{type:"popover",children:[t(Et,{className:"w-42 h-42 bg-black rounded-l flex-shrink-0 border",style:{backgroundColor:e}}),t(pa,{showInput:!1,defaultValue:e,onChange:n})]}),t(Li,{id:s,autoComplete:"off",role:"textbox",autoCorrect:"off",spellCheck:"false",required:!0,prefixed:!0,className:r.input,color:e,onChange:n})]})]})}function Gb(){const e=Hb(),n=tt(a=>a.appearanceIsDirty);return u(f.exports.Fragment,{children:[u("header",{className:"mb-40",children:[t("h1",{className:"text-2xl mb-4",children:t(i,{message:"Custom appearance"})}),t("div",{className:"text-sm mb-20",children:t(i,{message:"Fully customize your Biolink. Change background color or select gradients and images. Choose button style, text color, typeface and more."})}),t(S,{variant:"flat",color:"primary",type:"submit",onClick:()=>e.mutate(),disabled:!n||e.isLoading,children:t(i,{message:"Save changes"})})]}),t(Nb,{}),t(qb,{}),t(Pb,{className:"my-60"}),t(Kb,{})]})}function qb(){const e=tt(a=>{var r;return(r=a.appearance)==null?void 0:r.btnConfig}),n=tt(a=>{var r;return(r=a.appearance)==null?void 0:r.bgConfig});return u("div",{className:"my-60",children:[t("h2",{className:Ln.h2,children:t(i,{message:"Colors"})}),u("div",{className:"md:grid grid-cols-3 items-center gap-24",children:[t(Pa,{label:t(i,{message:"Text color"}),value:(n==null?void 0:n.color)||"#000",onChange:a=>{Pe().updateAppearance({bgConfig:{...n,color:a}})}}),t(Pa,{label:t(i,{message:"Button color"}),value:(e==null?void 0:e.color)||"#000",onChange:a=>{Pe().updateAppearance({btnConfig:{...e,color:a}})}}),t(Pa,{label:t(i,{message:"Button text color"}),value:(e==null?void 0:e.textColor)||"#000",onChange:a=>{Pe().updateAppearance({btnConfig:{...e,textColor:a}})}})]})]})}function Kb(){const e=tt(n=>{var a;return(a=n.appearance)==null?void 0:a.fontConfig})||ji[0];return u("div",{children:[t("h2",{className:Ln.h2,children:t(i,{message:"Font"})}),t(Vb,{value:e,onChange:n=>{Pe().updateAppearance({fontConfig:{...e,...n}})}})]})}const bs={content:0,appearance:1,settings:2};function jb(){return u("div",{children:[t(Yb,{}),u("div",{className:"flex gap-60 p-24 container mx-auto",children:[t(Qb,{}),t(Hg,{})]})]})}function Yb(){const{biolink:e}=Wt();return u("header",{className:"border-b px-10 py-4 flex items-center gap-10 min-h-46",children:[t(Ms,{className:"text-muted"}),u(Oe,{children:[e&&t(ye.a,{className:Tt,href:e==null?void 0:e.short_url,target:"_blank",rel:"noreferrer",...Ve,children:et(e.short_url)},"link"),e&&f.exports.createElement(ye.div,{...Ve,key:"share-button",className:"ml-auto"},t(vt,{variant:"text",link:e}))]})]})}function Qb(){var r;const{biolinkId:e}=Ke(),{tabName:n="content"}=Ke(),a=(r=bs[n])!=null?r:bs.content;return Wt(),f.exports.useEffect(()=>{da()},[e]),t("div",{className:"flex-auto min-w-0",children:u(xi,{overflow:"overflow-visible",selectedTab:a,isLazy:!0,children:[u(wi,{className:"sticky top-0 bg dark:bg-alt z-10",children:[t(tn,{padding:"w-140",elementType:ge,to:"../content",relative:"path",children:t(i,{message:"Content"})}),t(tn,{padding:"w-140",elementType:ge,to:"../appearance",relative:"path",children:t(i,{message:"Appearance"})}),t(tn,{padding:"w-140",elementType:ge,to:"../settings",relative:"path",children:t(i,{message:"Settings"})})]}),u(Ci,{className:"py-20",children:[t(nn,{children:t(Xb,{})}),t(nn,{children:t(Gb,{})}),t(nn,{children:t(bg,{})})]})]})})}function Xb(){const{isLoading:e,status:n,biolink:a}=Wt(),[r,s]=f.exports.useState(null);let o;return n==="success"&&!(a!=null&&a.content.length)?o=f.exports.createElement(ye.div,{...Ve,key:"no-results"},t(Zn,{className:"mt-60",image:t(fn,{src:Jl}),title:t(i,{message:"This biolink does not have any content yet"})})):e?o=t(e1,{}):o=t(Zb,{biolink:a}),u(f.exports.Fragment,{children:[a&&t(Og,{biolink:a,activeWidget:r,onOpenChange:l=>{l||s(null)}}),u("div",{className:"mb-20",children:[t(Jb,{}),u(T,{type:"modal",onClose:l=>{l&&s(l)},children:[t(S,{color:"primary",variant:"outline",startIcon:t(ef,{}),children:t(i,{message:"Add widget"})}),t(Vg,{})]})]}),t(Oe,{initial:!1,mode:"wait",children:o})]})}function Zb({biolink:e}){return t(ye.div,{...Ve,children:e==null?void 0:e.content.map(n=>{const a=n.model_type==="biolinkWidget"?Bg:ug;return t(a,{item:n,biolink:e},`${n.model_type}-${n.id}`)})},"content")}function Jb(){const{biolink:e,biolinkId:n}=Wt(),a=`biolink/${n}/link`,r=e==null?void 0:e.content.filter(s=>s.pinned).length;return u(T,{type:"modal",children:[t(S,{color:"primary",variant:"flat",className:"mr-14 min-w-144",children:t(i,{message:"Add a link"})}),t(fr,{endpoint:a,position:r,group:e,hiddenFields:Gi,showButtonLabelField:!0,invalidateQueries:!1,onSuccess:s=>{Sn(s.biolink)}})]})}function e1(){return t(ye.div,{...Ve,children:[...Array(4).keys()].map((e,n)=>t(t1,{},n))},"loading-skeleton")}function t1(){return u(Dr,{title:t(De,{className:"mb-14 text-sm max-w-192"}),actionRow:t(De,{className:"text-xs max-w-288"}),children:[t(De,{className:"text-xs max-w-400"}),t(De,{className:"text-xs max-w-400"})]})}const Yi=({forCurrentUser:e=!1})=>[{path:"links",element:t(Pm,{forCurrentUser:e})},{path:"links/:linkId",element:t(ip,{})},{path:"biolinks",element:t(jh,{forCurrentUser:e})},{path:"biolinks/:biolinkId",element:t(Jh,{})},{path:"biolinks/:biolinkId/edit",element:t(ac,{to:"content",replace:!0})},{path:"biolinks/:biolinkId/edit/:tabName",element:t(jb,{})},{path:"link-groups",element:t(Xm,{forCurrentUser:e})},{path:"link-groups/:groupId",element:t(ap,{})},{path:"link-groups/:groupId/links",element:t(Fm,{})},{path:"custom-domains",element:t(Ip,{forCurrentUser:e})},{path:"pixels",element:t(Vp,{forCurrentUser:e})},{path:"link-overlays",element:t(nh,{forCurrentUser:e})},{path:"link-overlays/new",element:t(Eh,{})},{path:"link-overlays/:overlayId/edit",element:t(Bh,{})}];function n1(){const{workspaceId:e}=Ne(),n=[{path:"/",element:t(ec,{children:t(sd,{})}),children:[{index:!0,element:t(qd,{})},{path:"link-pages",element:t(Xp,{forCurrentUser:!e})},{path:"link-pages/new",element:t(Jr,{allowSlugEditing:!1,endpoint:"link-page"})},{path:"link-pages/:pageId/edit",element:t(Jr,{allowSlugEditing:!1,endpoint:"link-page"})},...Yi({forCurrentUser:!e})]},{path:"*",element:t(tc,{})}];return nc(n)}const o1=Object.freeze(Object.defineProperty({__proto__:null,SharedDashboardRoutes:Yi,default:n1},Symbol.toStringTag,{value:"Module"}));export{Ot as $,Bo as A,ee as B,Ct as C,sc as D,Br as E,B as F,xi as G,wi as H,tn as I,Ci as J,Vt as K,aa as L,nn as M,Lt as N,Vs as O,Ft as P,Cr as Q,X as R,or as S,Pp as T,St as U,Oo as V,bu as W,yn as X,Nt as Y,Jo as Z,xn as _,dc as a,br as a0,Bm as a1,Fn as a2,Cu as a3,dn as a4,Dd as a5,Or as a6,Ud as a7,Bd as a8,Ja as a9,Mm as aA,Uc as aB,om as aC,ei as aD,nf as aE,em as aF,bb as aG,ef as aH,zb as aI,o1 as aJ,ra as aa,wd as ab,Gd as ac,Yi as ad,Jr as ae,qi as af,uc as ag,fm as ah,lm as ai,ci as aj,tf as ak,en as al,jg as am,Zs as an,Mn as ao,un as ap,Za as aq,Wr as ar,Ki as as,bc as at,$p as au,td as av,Hm as aw,ir as ax,cc as ay,af as az,oc as b,lc as c,Se as d,xt as e,wt as f,dt as g,Um as h,ct as i,vc as j,Eb as k,$t as l,ln as m,tr as n,dr as o,ht as p,vi as q,pa as r,kn as s,Hc as t,tu as u,og as v,hf as w,es as x,bi as y,Gp as z};
//# sourceMappingURL=dashboard-routes.8cb78c02.js.map
